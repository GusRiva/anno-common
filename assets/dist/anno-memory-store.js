!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AnnoMemoryStore=t():e.AnnoMemoryStore=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=202)}([function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(68)("wks"),o=r(42),i=r(1).Symbol,a="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},function(e,t,r){var n=r(12);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(1),o=r(0),i=r(24),a=r(11),s=function(e,t,r){var u,c,f,l=e&s.F,h=e&s.G,p=e&s.S,d=e&s.P,v=e&s.B,y=e&s.W,m=h?o:o[t]||(o[t]={}),g=m.prototype,b=h?n:p?n[t]:(n[t]||{}).prototype;h&&(r=t);for(u in r)(c=!l&&b&&void 0!==b[u])&&u in m||(f=c?b[u]:r[u],m[u]=h&&"function"!=typeof b[u]?r[u]:v&&c?i(f,n):y&&b[u]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):d&&"function"==typeof f?i(Function.call,f):f,d&&((m.virtual||(m.virtual={}))[u]=f,e&s.R&&g&&!g[u]&&a(g,u,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){e.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(3),o=r(102),i=r(70),a=Object.defineProperty;t.f=r(6)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(7),o=r(39);e.exports=r(6)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){e.exports=!r(14)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(16),o=r(32);e.exports=r(13)?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(28),o=r(79),i=r(53),a=Object.defineProperty;t.f=r(13)?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(80),o=r(43);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(50)("wks"),o=r(33),i=r(5).Symbol,a="function"==typeof i;(e.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},function(e,t,r){"use strict";function n(e,t){t=t||{};for(var r in e)t[r]=e[r];return t}function o(e,t,r){var n=r?" !== ":" === ",o=r?" || ":" && ",i=r?"!":"",a=r?"":"!";switch(e){case"null":return t+n+"null";case"array":return i+"Array.isArray("+t+")";case"object":return"("+i+t+o+"typeof "+t+n+'"object"'+o+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+o+a+"("+t+" % 1)"+o+t+n+t+")";default:return"typeof "+t+n+'"'+e+'"'}}function i(e,t){switch(e.length){case 1:return o(e[0],t,!0);default:var r="",n=s(e);n.array&&n.object&&(r=n.null?"(":"(!"+t+" || ",r+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer;for(var i in n)r+=(r?" && ":"")+o(i,t,!0);return r}}function a(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var o=t[n];S[o]?r[r.length]=o:"array"===e&&"array"===o&&(r[r.length]=o)}if(r.length)return r}else{if(S[t])return[t];if("array"===e&&"array"===t)return["array"]}}function s(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function u(e){return"number"==typeof e?"["+e+"]":O.test(e)?"."+e:"['"+c(e)+"']"}function c(e){return e.replace(A,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function f(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0}function l(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")}function h(e){return e.replace(k,"").replace(j,"").replace(I,"if (!($1))")}function p(e,t){var r=e.match(R);return r&&2==r.length&&(e=t?e.replace(T,"").replace(C,L):e.replace($,"").replace(F,D)),r=e.match(N),r&&3===r.length?e.replace(M,""):e}function d(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0}function v(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0}function y(e){return"'"+c(e)+"'"}function m(e,t,r,n){return w(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")}function g(e,t,r){return w(e,y(r?"/"+P(t):u(t)))}function b(e,t,r){var n,o,i,a;if(""===e)return"rootData";if("/"==e[0]){if(!B.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,i="rootData"}else{if(!(a=e.match(q)))throw new Error("Invalid JSON-pointer: "+e);if(n=+a[1],"#"==(o=a[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(i="data"+(t-n||""),!o)return i}for(var s=i,c=o.split("/"),f=0;f<c.length;f++){var l=c[f];l&&(i+=u(x(l)),s+=" && "+i)}return s}function w(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function _(e){return x(decodeURIComponent(e))}function E(e){return encodeURIComponent(P(e))}function P(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function x(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}e.exports={copy:n,checkDataType:o,checkDataTypes:i,coerceToTypes:a,toHash:s,getProperty:u,escapeQuotes:c,equal:r(75),ucs2length:r(173),varOccurences:f,varReplace:l,cleanUpCode:h,finalCleanUpCode:p,schemaHasRules:d,schemaHasRulesExcept:v,toQuotedString:y,getPathExpr:m,getPath:g,getData:b,unescapeFragment:_,unescapeJsonPointer:x,escapeFragment:E,escapeJsonPointer:P};var S=s(["string","number","integer","boolean","null"]),O=/^[a-z$_][a-z$_0-9]*$/i,A=/'|\\/g,k=/else\s*{\s*}/g,j=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,I=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,R=/[^v.]errors/g,$=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,T=/var errors = 0;|var vErrors = null;/g,F="return errors === 0;",D="validate.errors = null; return true;",C=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,L="return data;",N=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,M=/if \(rootData === undefined\) rootData = data;/,B=/^\/(?:[^~]|~0|~1)*$/,q=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){var n=r(103),o=r(61);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(84),o=r(44);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(36);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports={}},function(e,t,r){var n=r(108),o=r(63);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(30);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){var n=r(5),o=r(8),i=r(140),a=r(15),s=function(e,t,r){var u,c,f,l=e&s.F,h=e&s.G,p=e&s.S,d=e&s.P,v=e&s.B,y=e&s.W,m=h?o:o[t]||(o[t]={}),g=m.prototype,b=h?n:p?n[t]:(n[t]||{}).prototype;h&&(r=t);for(u in r)(c=!l&&b&&void 0!==b[u])&&u in m||(f=c?b[u]:r[u],m[u]=h&&"function"!=typeof b[u]?r[u]:v&&c?i(f,n):y&&b[u]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):d&&"function"==typeof f?i(Function.call,f):f,d&&((m.virtual||(m.virtual={}))[u]=f,e&s.R&&g&&!g[u]&&a(g,u,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){e.exports={default:r(213),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(208),i=n(o),a=r(207),s=n(a),u="function"==typeof s.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(i.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=!0},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(7).f,o=r(10),i=r(2)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n=r(61);e.exports=function(e){return Object(n(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports={}},function(e,t){e.exports=!0},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(16).f,o=r(9),i=r(18)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},function(e,t,r){var n=r(50)("keys"),o=r(33);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(5),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(43);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(30);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(5),o=r(8),i=r(46),a=r(55),s=r(16).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){t.f=r(18)},function(e,t,r){"use strict";function n(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=a.url(e,t),this.missingSchema=a.normalizeId(a.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var a=r(57);e.exports={Validation:i(n),MissingRef:i(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){"use strict";function n(e,t,r){var i=this._refs[r];if("string"==typeof i){if(!this._refs[i])return n.call(this,e,t,i);i=this._refs[i]}if((i=i||this._schemas[r])instanceof g)return s(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var a,u,c,f=o.call(this,t,r);return f&&(a=f.schema,t=f.root,c=f.baseId),a instanceof g?u=a.validate||e.call(this,a.schema,t,void 0,c):void 0!==a&&(u=s(a,this._opts.inlineRefs)?a:e.call(this,a,t,void 0,c)),u}function o(e,t){var r=v.parse(t,!1,!0),n=l(r),o=f(this._getId(e.schema));if(n!==o){var s=h(n),u=this._refs[s];if("string"==typeof u)return i.call(this,e,u,r);if(u instanceof g)u.validate||this._compile(u),e=u;else{if(!((u=this._schemas[s])instanceof g))return;if(u.validate||this._compile(u),s==h(t))return{schema:u,root:e,baseId:o};e=u}if(!e.schema)return;o=f(this._getId(e.schema))}return a.call(this,r,o,e.schema,e)}function i(e,t,r){var n=o.call(this,e,t);if(n){var i=n.schema,s=n.baseId;e=n.root;var u=this._getId(i);return u&&(s=p(s,u)),a.call(this,r,s,i,e)}}function a(e,t,r,n){if(e.hash=e.hash||"","#/"==e.hash.slice(0,2)){for(var i=e.hash.split("/"),a=1;a<i.length;a++){var s=i[a];if(s){if(s=m.unescapeFragment(s),void 0===(r=r[s]))break;var u;if(!w[s]&&(u=this._getId(r),u&&(t=p(t,u)),r.$ref)){var c=p(t,r.$ref),f=o.call(this,n,c);f&&(r=f.schema,n=f.root,t=f.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}function s(e,t){return!1!==t&&(void 0===t||!0===t?u(e):t?c(e)<=t:void 0)}function u(e){var t;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(t=e[r])&&!u(t))return!1}else for(var n in e){if("$ref"==n)return!1;if("object"==typeof(t=e[n])&&!u(t))return!1}return!0}function c(e){var t,r=0;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t=e[n],"object"==typeof t&&(r+=c(t)),r==1/0)return 1/0}else for(var o in e){if("$ref"==o)return 1/0;if(_[o])r++;else if(t=e[o],"object"==typeof t&&(r+=c(t)+1),r==1/0)return 1/0}return r}function f(e,t){return!1!==t&&(e=h(e)),l(v.parse(e,!1,!0))}function l(e){var t=e.protocol||"//"==e.href.slice(0,2)?"//":"";return(e.protocol||"")+t+(e.host||"")+(e.path||"")+"#"}function h(e){return e?e.replace(E,""):""}function p(e,t){return t=h(t),v.resolve(e,t)}function d(e){var t=h(this._getId(e)),r={"":t},n={"":f(t,!1)},o={},i=this;return b(e,{allKeys:!0},function(e,t,a,s,u,c,f){if(""!==t){var l=i._getId(e),p=r[s],d=n[s]+"/"+u;if(void 0!==f&&(d+="/"+("number"==typeof f?f:m.escapeFragment(f))),"string"==typeof l){l=p=h(p?v.resolve(p,l):l);var g=i._refs[l];if("string"==typeof g&&(g=i._refs[g]),g&&g.schema){if(!y(e,g.schema))throw new Error('id "'+l+'" resolves to more than one schema')}else if(l!=h(d))if("#"==l[0]){if(o[l]&&!y(e,o[l]))throw new Error('id "'+l+'" resolves to more than one schema');o[l]=e}else i._refs[l]=d}r[t]=p,n[t]=d}}),o}var v=r(274),y=r(75),m=r(19),g=r(86),b=r(261);e.exports=n,n.normalizeId=h,n.fullPath=f,n.url=p,n.ids=d,n.inlineRef=s,n.schema=o;var w=m.toHash(["properties","patternProperties","enum","dependencies","definitions"]),_=m.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]),E=/#\/?$/},function(e,t,r){e.exports={default:r(218),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(95),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(12),o=r(1).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=r(36);e.exports.f=function(e){return new n(e)}},function(e,t,r){var n=r(3),o=r(238),i=r(63),a=r(67)("IE_PROTO"),s=function(){},u=function(){var e,t=r(62)("iframe"),n=i.length;for(t.style.display="none",r(101).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(68)("keys"),o=r(42);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,r){var n=r(1),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(12);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(1),o=r(0),i=r(37),a=r(72),s=r(7).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){t.f=r(2)},function(e,t,r){"use strict";var n=r(243)(!0);r(104)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){r(246);for(var n=r(1),o=r(11),i=r(25),a=r(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],f=n[c],l=f&&f.prototype;l&&!l[a]&&o(l,a,c),i[c]=i.Array}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;var n,o=Array.isArray(t),i=Array.isArray(r);if(o&&i){if(t.length!=r.length)return!1;for(n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if(o!=i)return!1;if(t&&r&&"object"==typeof t&&"object"==typeof r){var a=Object.keys(t);if(a.length!==Object.keys(r).length)return!1;var s=t instanceof Date,u=r instanceof Date;if(s&&u)return t.getTime()==r.getTime();if(s!=u)return!1;var c=t instanceof RegExp,f=r instanceof RegExp;if(c&&f)return t.toString()==r.toString();if(c!=f)return!1;for(n=0;n<a.length;n++)if(!Object.prototype.hasOwnProperty.call(r,a[n]))return!1;for(n=0;n<a.length;n++)if(!e(t[a[n]],r[a[n]]))return!1;return!0}return!1}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!v){var e=o(a);v=!0;for(var t=d.length;t;){for(p=d,d=[];++y<t;)p&&p[y].run();y=-1,t=d.length}p=null,v=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var f,l,h=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var p,d=[],v=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||v||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(30),o=r(5).document,i=n(o)&&n(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,r){e.exports=!r(13)&&!r(14)(function(){return 7!=Object.defineProperty(r(78)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(77);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(46),o=r(29),i=r(85),a=r(15),s=r(9),u=r(45),c=r(144),f=r(48),l=r(151),h=r(18)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,v,y,m,g){c(r,t,v);var b,w,_,E=function(e){if(!p&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},P=t+" Iterator",x="values"==y,S=!1,O=e.prototype,A=O[h]||O["@@iterator"]||y&&O[y],k=A||E(y),j=y?x?E("entries"):k:void 0,I="Array"==t?O.entries||A:A;if(I&&(_=l(I.call(new e)))!==Object.prototype&&_.next&&(f(_,P,!0),n||s(_,h)||a(_,h,d)),x&&A&&"values"!==A.name&&(S=!0,k=function(){return A.call(this)}),n&&!g||!p&&!S&&O[h]||a(O,h,k),u[t]=k,u[P]=d,y)if(b={values:x?k:E("values"),keys:m?k:E("keys"),entries:j},g)for(w in b)w in O||i(O,w,b[w]);else o(o.P+o.F*(p||S),t,b);return b}},function(e,t,r){var n=r(28),o=r(148),i=r(44),a=r(49)("IE_PROTO"),s=function(){},u=function(){var e,t=r(78)("iframe"),n=i.length;for(t.style.display="none",r(142).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[i[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:o(r,t)}},function(e,t,r){var n=r(84),o=r(44).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){var n=r(9),o=r(17),i=r(139)(!1),a=r(49)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t,r){e.exports=r(15)},function(e,t,r){"use strict";function n(e){o.copy(e,this)}var o=r(19);e.exports=n},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),p=e.opts.$data&&u&&u.$data;p?(i+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",o="schema"+a):o=u;var d="maximum"==t,v=d?"exclusiveMaximum":"exclusiveMinimum",y=e.schema[v],m=e.opts.$data&&y&&y.$data,g=d?"<":">",b=d?">":"<",n=void 0;if(m){var w=e.util.getData(y.$data,s,e.dataPathArr),_="exclusive"+a,E="exclType"+a,P="exclIsNumber"+a,x="op"+a,S="' + "+x+" + '";i+=" var schemaExcl"+a+" = "+w+"; ",w="schemaExcl"+a,i+=" var "+_+"; var "+E+" = typeof "+w+"; if ("+E+" != 'boolean' && "+E+" != 'undefined' && "+E+" != 'number') { ";var n=v,O=O||[];O.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+v+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var A=i;i=O.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",p&&(i+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),i+=" "+E+" == 'number' ? ( ("+_+" = "+o+" === undefined || "+w+" "+g+"= "+o+") ? "+h+" "+b+"= "+w+" : "+h+" "+b+" "+o+" ) : ( ("+_+" = "+w+" === true) ? "+h+" "+b+"= "+o+" : "+h+" "+b+" "+o+" ) || "+h+" !== "+h+") { var op"+a+" = "+_+" ? '"+g+"' : '"+g+"=';"}else{var P="number"==typeof y,S=g;if(P&&p){var x="'"+S+"'";i+=" if ( ",p&&(i+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),i+=" ( "+o+" === undefined || "+y+" "+g+"= "+o+" ? "+h+" "+b+"= "+y+" : "+h+" "+b+" "+o+" ) || "+h+" !== "+h+") { "}else{P&&void 0===u?(_=!0,n=v,f=e.errSchemaPath+"/"+v,o=y,b+="="):(P&&(o=Math[d?"min":"max"](y,u)),y===(!P||o)?(_=!0,n=v,f=e.errSchemaPath+"/"+v,b+="="):(_=!1,S+="="));var x="'"+S+"'";i+=" if ( ",p&&(i+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),i+=" "+h+" "+b+" "+o+" || "+h+" !== "+h+") { "}}n=n||t;var O=O||[];O.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { comparison: "+x+", limit: "+o+", exclusive: "+_+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+S+" ",i+=p?"' + "+o:o+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+c:""+u,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var A=i;return i=O.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+A+"]); ":i+=" validate.errors = ["+A+"]; return false; ":i+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),p=e.opts.$data&&u&&u.$data;p?(i+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",o="schema"+a):o=u;var d="maxItems"==t?">":"<";i+="if ( ",p&&(i+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),i+=" "+h+".length "+d+" "+o+") { ";var n=t,v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { limit: "+o+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"less",i+=" than ",i+=p?"' + "+o+" + '":""+u,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+c:""+u,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var y=i;return i=v.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),p=e.opts.$data&&u&&u.$data;p?(i+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",o="schema"+a):o=u;var d="maxLength"==t?">":"<";i+="if ( ",p&&(i+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),!1===e.opts.unicode?i+=" "+h+".length ":i+=" ucs2length("+h+") ",i+=" "+d+" "+o+") { ";var n=t,v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { limit: "+o+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=p?"' + "+o+" + '":""+u,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+c:""+u,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var y=i;return i=v.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),p=e.opts.$data&&u&&u.$data;p?(i+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",o="schema"+a):o=u;var d="maxProperties"==t?">":"<";i+="if ( ",p&&(i+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),i+=" Object.keys("+h+").length "+d+" "+o+") { ";var n=t,v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { limit: "+o+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"less",i+=" than ",i+=p?"' + "+o+" + '":""+u,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=p?"validate.schema"+c:""+u,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var y=i;return i=v.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,r){"use strict";e.exports=function(e,t,r){function n(e){for(var t=e.rules,r=0;r<t.length;r++)if(o(t[r]))return!0}function o(t){return void 0!==e.schema[t.keyword]||t.implements&&i(t)}function i(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}var a="",s=!0===e.schema.$async,u=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.isTop){if(s){e.async=!0;var f="es7"==e.opts.async;e.yieldAwait=f?"await":"yield"}a+=" var validate = ",s?f?a+=" (async function ":("*"!=e.opts.async&&(a+="co.wrap"),a+="(function* "):a+=" (function ",a+=" (data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(a+=" /*# sourceURL="+c+" */ ")}if("boolean"==typeof e.schema||!u&&!e.schema.$ref){var l,h=e.level,p=e.dataLevel,d=e.schema["false schema"],v=e.schemaPath+e.util.getProperty("false schema"),y=e.errSchemaPath+"/false schema",m=!e.opts.allErrors,g="data"+(p||""),b="valid"+h;if(!1===e.schema){e.isTop?m=!0:a+=" var "+b+" = false; ";var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(l||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: {} ",!1!==e.opts.messages&&(a+=" , message: 'boolean schema is false' "),e.opts.verbose&&(a+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),a+=" } "):a+=" {} ";var _=a;a=w.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?a+=s?" return data; ":" validate.errors = null; return true; ":a+=" var "+b+" = true; ";return e.isTop&&(a+=" }); return validate; "),a}if(e.isTop){var E=e.isTop,h=e.level=0,p=e.dataLevel=0,g="data";e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],a+=" var vErrors = null; ",a+=" var errors = 0;     ",a+=" if (rootData === undefined) rootData = data; "}else{var h=e.level,p=e.dataLevel,g="data"+(p||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),s&&!e.async)throw new Error("async schema in sync schema");a+=" var errs_"+h+" = errors;"}var l,b="valid"+h,m=!e.opts.allErrors,P="",x="",S=e.schema.type,O=Array.isArray(S);if(O&&1==S.length&&(S=S[0],O=!1),e.schema.$ref&&u){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(u=!1,console.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(S){if(e.opts.coerceTypes)var A=e.util.coerceToTypes(e.opts.coerceTypes,S);var k=e.RULES.types[S];if(A||O||!0===k||k&&!n(k)){var v=e.schemaPath+".type",y=e.errSchemaPath+"/type",v=e.schemaPath+".type",y=e.errSchemaPath+"/type",j=O?"checkDataTypes":"checkDataType";if(a+=" if ("+e.util[j](S,g,!0)+") { ",A){var I="dataType"+h,R="coerced"+h;a+=" var "+I+" = typeof "+g+"; ","array"==e.opts.coerceTypes&&(a+=" if ("+I+" == 'object' && Array.isArray("+g+")) "+I+" = 'array'; "),a+=" var "+R+" = undefined; ";var $="",T=A;if(T)for(var F,D=-1,C=T.length-1;D<C;)F=T[D+=1],D&&(a+=" if ("+R+" === undefined) { ",$+="}"),"array"==e.opts.coerceTypes&&"array"!=F&&(a+=" if ("+I+" == 'array' && "+g+".length == 1) { "+R+" = "+g+" = "+g+"[0]; "+I+" = typeof "+g+";  } "),"string"==F?a+=" if ("+I+" == 'number' || "+I+" == 'boolean') "+R+" = '' + "+g+"; else if ("+g+" === null) "+R+" = ''; ":"number"==F||"integer"==F?(a+=" if ("+I+" == 'boolean' || "+g+" === null || ("+I+" == 'string' && "+g+" && "+g+" == +"+g+" ","integer"==F&&(a+=" && !("+g+" % 1)"),a+=")) "+R+" = +"+g+"; "):"boolean"==F?a+=" if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+R+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+R+" = true; ":"null"==F?a+=" if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+R+" = null; ":"array"==e.opts.coerceTypes&&"array"==F&&(a+=" if ("+I+" == 'string' || "+I+" == 'number' || "+I+" == 'boolean' || "+g+" == null) "+R+" = ["+g+"]; ");a+=" "+$+" if ("+R+" === undefined) {   ";var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",a+=O?""+S.join(","):""+S,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=O?""+S.join(","):""+S,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),a+=" } "):a+=" {} ";var _=a;a=w.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else {  ";var L=p?"data"+(p-1||""):"parentData",N=p?e.dataPathArr[p]:"parentDataProperty";a+=" "+g+" = "+R+"; ",p||(a+="if ("+L+" !== undefined)"),a+=" "+L+"["+N+"] = "+R+"; } "}else{var w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",a+=O?""+S.join(","):""+S,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=O?""+S.join(","):""+S,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),a+=" } "):a+=" {} ";var _=a;a=w.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}a+=" } "}}if(e.schema.$ref&&!u)a+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",m&&(a+=" } if (errors === ",a+=E?"0":"errs_"+h,a+=") { ",x+="}");else{e.opts.v5&&e.schema.patternGroups&&console.warn('keyword "patternGroups" is deprecated and disabled. Use option patternGroups: true to enable.');var M=e.RULES;if(M)for(var k,B=-1,q=M.length-1;B<q;)if(k=M[B+=1],n(k)){if(k.type&&(a+=" if ("+e.util.checkDataType(k.type,g)+") { "),e.opts.useDefaults&&!e.compositeRule)if("object"==k.type&&e.schema.properties){var d=e.schema.properties,U=Object.keys(d),z=U;if(z)for(var V,K=-1,Q=z.length-1;K<Q;){V=z[K+=1];var G=d[V];if(void 0!==G.default){var Y=g+e.util.getProperty(V);a+="  if ("+Y+" === undefined) "+Y+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(G.default)+" ":a+=" "+JSON.stringify(G.default)+" ",a+="; "}}}else if("array"==k.type&&Array.isArray(e.schema.items)){var H=e.schema.items;if(H)for(var G,D=-1,J=H.length-1;D<J;)if(G=H[D+=1],void 0!==G.default){var Y=g+"["+D+"]";a+="  if ("+Y+" === undefined) "+Y+" = ","shared"==e.opts.useDefaults?a+=" "+e.useDefault(G.default)+" ":a+=" "+JSON.stringify(G.default)+" ",a+="; "}}var W=k.rules;if(W)for(var X,Z=-1,ee=W.length-1;Z<ee;)if(X=W[Z+=1],o(X)){var te=X.code(e,X.keyword,k.type);te&&(a+=" "+te+" ",m&&(P+="}"))}if(m&&(a+=" "+P+" ",P=""),k.type&&(a+=" } ",S&&S===k.type&&!A)){a+=" else { ";var v=e.schemaPath+".type",y=e.errSchemaPath+"/type",w=w||[];w.push(a),a="",!1!==e.createErrors?(a+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(y)+" , params: { type: '",a+=O?""+S.join(","):""+S,a+="' } ",!1!==e.opts.messages&&(a+=" , message: 'should be ",a+=O?""+S.join(","):""+S,a+="' "),e.opts.verbose&&(a+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),a+=" } "):a+=" {} ";var _=a;a=w.pop(),!e.compositeRule&&m?e.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } "}m&&(a+=" if (errors === ",a+=E?"0":"errs_"+h,a+=") { ",x+="}")}}return m&&(a+=" "+x+" "),E?(s?(a+=" if (errors === 0) return data;           ",a+=" else throw new ValidationError(vErrors); "):(a+=" validate.errors = vErrors; ",a+=" return errors === 0;       "),a+=" }); return validate;"):a+=" var "+b+" = errors === errs_"+h+";",a=e.util.cleanUpCode(a),E&&(a=e.util.finalCleanUpCode(a,s)),a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e,r={_replyids:[]};if(e=e.replace(/https?:\/\/.*\//,""),e=e.replace(/^([^\.~]+)/,function(e,t){return r._id=t,""}),e=e.replace(/\.(\d+)/g,function(e,t){return r._replyids.push(parseInt(t)),""}),e=e.replace(/~(\d+)/,function(e,t){return r._revid=t,""}))throw new Error("Could not parse '"+t+"' into id/replyid/revid, '"+e+"' remained");return r._fullid=r._replyids.length?r._id+"."+r._replyids.join("."):r._id,r}function i(e){function t(e,n){return e.forEach(function(e){e&&(e.id&&n.push(e.id),"object"===(void 0===e?"undefined":(0,h.default)(e))&&(0,f.default)(e).forEach(function(r){"creator"!==r&&(Array.isArray(e[r])?t(e[r],n):t([e[r]],n))}))}),r}var r=[];return t(e,r),r}function a(e,t,r,n){if(!r||"function"==typeof r){var o=[r,{}];n=o[0],r=o[1]}if(r.nestedProps=r.nestedProps||["hasReply","hasVersion"],t(e),r.nestedProps.forEach(function(n){e[n]&&(Array.isArray(e[n])?e[n].forEach(function(e){a(e,t,r,function(){})}):"object"===(0,h.default)(e[n])&&a(e[n],t,r,function(){}))}),n)return n()}function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.join("/").replace(/\/\/+/g,"/").replace(/\/+$/,"").replace(":/","://")}function u(e){return!0===e||1===e||"true"===e||"1"===e}var c=r(58),f=n(c),l=r(35),h=n(l),p=r(201),d=p.ensureArray,v=p.add,y=p.remove,m=p.numberOf,g=p.find,b=p.filter,w=p.packArray;e.exports={ensureArray:d,add:v,remove:y,numberOf:m,find:g,filter:b,packArray:w,splitIdRepliesRev:o,collectIds:i,applyToAnno:a,urlJoin:s,truthy:u}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(!e){if(!u.ENVYCONF_PREFIX)throw new Error("Need to set prefix");e=u.ENVYCONF_PREFIX}return u.ENVYCONF_PREFIX||(u.ENVYCONF_PREFIX=e),e}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===(void 0===e?"undefined":(0,y.default)(e))){var r=[e,null];t=r[0],e=r[1]}e=o(e);var n=new RegExp("^"+e+"_"),i={DEBUG:"false"},a=JSON.parse((0,d.default)(i));return(0,h.default)(a,JSON.parse((0,d.default)(t))),(0,f.default)(u).filter(function(e){return e.match(n)}).forEach(function(e){return a[e.replace(n,"")]=u[e]}),(0,f.default)(a).forEach(function(t){"string"==typeof a[t]&&a[t].match(/^true|false$/)&&(a[t]="false"!==a[t]),u[e+"_"+t]=a[t]}),a}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i(e,{LOGLEVEL:""}),o=function(e,r){return"string"!=typeof r&&(r=(0,d.default)(r)),"# "+e+" ["+(new Date).toISOString().substr(11).substr(0,11)+"] "+t+" - "+r},a=function(e,t){return e.match(/debug/i)&&n.LOGLEVEL.match(/(silly|debug)/i)?t():e.match(/SILLY/i)&&n.LOGLEVEL.match(/silly/i)?t():void 0};if(s&&n.LOGFILE){var u=r(119);return{silly:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a("silly",function(){return t.forEach(function(e){return u.appendFile(n.LOGFILE,o("SILLY",e+"\n"),function(){})})})},debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a("debug",function(){return t.forEach(function(e){return u.appendFile(n.LOGFILE,o("DEBUG",e+"\n"),function(){})})})}}}return{silly:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a("SILLY",function(){return t.forEach(function(e){return console[s?"log":"debug"](o("SILLY",e))})})},debug:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a("DEBUG",function(){return t.forEach(function(e){return console.log(o("DEBUG",e))})})}}}var s,u,c=r(128),f=n(c),l=r(127),h=n(l),p=r(126),d=n(p),v=r(131),y=n(v);try{u=window,s=!1}catch(e){u=process.env,s=!0}e.exports={envyConf:i,envyLog:a}},function(e,t,r){e.exports={default:r(214),__esModule:!0}},function(e,t,r){e.exports={default:r(216),__esModule:!0}},function(e,t,r){e.exports={default:r(217),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(205),i=n(o),a=r(204),s=n(a),u=r(35),c=n(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(35),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t){function r(e){var t=this,r=l.call(arguments,1);return new Promise(function(o,i){function a(t){var r;try{r=e.next(t)}catch(e){return i(e)}c(r)}function u(t){var r;try{r=e.throw(t)}catch(e){return i(e)}c(r)}function c(e){if(e.done)return o(e.value);var r=n.call(t,e.value);return r&&s(r)?r.then(a,u):u(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(e.value)+'"'))}if("function"==typeof e&&(e=e.apply(t,r)),!e||"function"!=typeof e.next)return o(e);a()})}function n(e){return e?s(e)?e:c(e)||u(e)?r.call(this,e):"function"==typeof e?o.call(this,e):Array.isArray(e)?i.call(this,e):f(e)?a.call(this,e):e:e}function o(e){var t=this;return new Promise(function(r,n){e.call(t,function(e,t){if(e)return n(e);arguments.length>2&&(t=l.call(arguments,1)),r(t)})})}function i(e){return Promise.all(e.map(n,this))}function a(e){for(var t=new e.constructor,r=Object.keys(e),o=[],i=0;i<r.length;i++){var a=r[i],u=n.call(this,e[a]);u&&s(u)?function(e,r){t[r]=void 0,o.push(e.then(function(e){t[r]=e}))}(u,a):t[a]=e[a]}return Promise.all(o).then(function(){return t})}function s(e){return"function"==typeof e.then}function u(e){return"function"==typeof e.next&&"function"==typeof e.throw}function c(e){var t=e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName||u(t.prototype))}function f(e){return Object==e.constructor}var l=Array.prototype.slice;e.exports=r.default=r.co=r,r.wrap=function(e){function t(){return r.call(this,e.apply(this,arguments))}return t.__generatorFunction__=e,t}},function(e,t,r){var n=r(23),o=r(2)("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){var n=r(1).document;e.exports=n&&n.documentElement},function(e,t,r){e.exports=!r(6)&&!r(20)(function(){return 7!=Object.defineProperty(r(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(23);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(37),o=r(4),i=r(112),a=r(11),s=r(10),u=r(25),c=r(232),f=r(40),l=r(107),h=r(2)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,v,y,m,g){c(r,t,v);var b,w,_,E=function(e){if(!p&&e in O)return O[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},P=t+" Iterator",x="values"==y,S=!1,O=e.prototype,A=O[h]||O["@@iterator"]||y&&O[y],k=A||E(y),j=y?x?E("entries"):k:void 0,I="Array"==t?O.entries||A:A;if(I&&(_=l(I.call(new e)))!==Object.prototype&&_.next&&(f(_,P,!0),n||s(_,h)||a(_,h,d)),x&&A&&"values"!==A.name&&(S=!0,k=function(){return A.call(this)}),n&&!g||!p&&!S&&O[h]||a(O,h,k),u[t]=k,u[P]=d,y)if(b={values:x?k:E("values"),keys:m?k:E("keys"),entries:j},g)for(w in b)w in O||i(O,w,b[w]);else o(o.P+o.F*(p||S),t,b);return b}},function(e,t,r){var n=r(38),o=r(39),i=r(21),a=r(70),s=r(10),u=r(102),c=Object.getOwnPropertyDescriptor;t.f=r(6)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(108),o=r(63).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t,r){var n=r(10),o=r(41),i=r(67)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(10),o=r(21),i=r(225)(!1),a=r(67)("IE_PROTO");e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},function(e,t,r){var n=r(4),o=r(0),i=r(20);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(3),o=r(12),i=r(64);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){e.exports=r(11)},function(e,t,r){var n=r(3),o=r(36),i=r(2)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},function(e,t,r){var n,o,i,a=r(24),s=r(228),u=r(101),c=r(62),f=r(1),l=f.process,h=f.setImmediate,p=f.clearImmediate,d=f.MessageChannel,v=f.Dispatch,y=0,m={},g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){g.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++y]=function(){s("function"==typeof e?e:Function(e),t)},n(y),y},p=function(e){delete m[e]},"process"==r(23)(l)?n=function(e){l.nextTick(a(g,e,1))}:v&&v.now?n=function(e){v.now(a(g,e,1))}:d?(o=new d,i=o.port2,o.port1.onmessage=b,n=a(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(n=function(e){f.postMessage(e+"","*")},f.addEventListener("message",b,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,r){var n=r(69),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){var n=r(100),o=r(2)("iterator"),i=r(25);e.exports=r(0).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},function(e,t){},function(e,t,r){var n="undefined"!=typeof JSON?JSON:r(262);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var a="boolean"==typeof t.cycles&&t.cycles,s=t.replacer||function(e,t){return t},u=t.cmp&&function(e){return function(t){return function(r,n){var o={key:r,value:t[r]},i={key:n,value:t[n]};return e(o,i)}}}(t.cmp),c=[];return function e(t,f,l,h){var p=r?"\n"+new Array(h+1).join(r):"",d=r?": ":":";if(l&&l.toJSON&&"function"==typeof l.toJSON&&(l=l.toJSON()),void 0!==(l=s.call(t,f,l))){if("object"!=typeof l||null===l)return n.stringify(l);if(o(l)){for(var v=[],y=0;y<l.length;y++){var m=e(l,y,l[y],h+1)||n.stringify(null);v.push(p+r+m)}return"["+v.join(",")+p+"]"}if(-1!==c.indexOf(l)){if(a)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(l);for(var g=i(l).sort(u&&u(l)),v=[],y=0;y<g.length;y++){var f=g[y],b=e(l,f,l[f],h+1);if(b){var w=n.stringify(f)+d+b;v.push(p+r+w)}}return c.splice(c.indexOf(l),1),"{"+v.join(",")+p+"}"}}({"":e},"",e,0)};var o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}},function(e,t){},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new n(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(271),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(96),i=n(o),a=r(59),s=n(a),u=r(60),c=n(u),f=r(98),l=n(f),h=r(97),p=n(h),d=r(266),v=(r(119),r(199)),y=function(e){function t(){(0,s.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.db=new d({}),e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"_init",value:function(e,t){if("function"==typeof e){var r=[e,{}];t=r[0],e=r[1]}this.db.loadDatabase(function(e){return e?t(e):t()})}},{key:"_wipe",value:function(e,t){if("function"==typeof e){var r=[e,{}];t=r[0],e=r[1]}return this.db=new d({}),this.init(e,t)}}]),t}(v);e.exports=y},function(e,t){e.exports={"@context":["http://www.w3.org/ns/anno.jsonld",{annox:"https://github.com/kba/anno/context.jsonld",dcterms:"http://www.w3.org/2000/01/rdf-schema#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sioc:"http://rdfs.org/sioc/ns#",AnnotationRevision:{"@id":"annox:AnnotationRevision","rdfs:subClassOf":"oa:Annotation"},AnnotationReply:{"@id":"annox:AnnotationReply","rdfs:subClassOf":"oa:Annotation"},hasReply:{"@id":"annox:hasReply","@type":"@id","rdfs:subClassOf":"sioc:has_reply","rdfs:domain":"oa:Annotation","rdfs:range":"annox:AnnotationComment"},replyTo:{"@id":"annox:replyTo","@type":"@id","rdfs:subClassOf":"sioc:reply_to","rdfs:domain":"annox:AnnotationComment","rdfs:range":"oa:Annotation"},hasVersion:{"@id":"http://purl.org/pav/hasVersion","@type":"@id"},versionOf:{"@id":"annox:versionOf","@type":"@id"},deleted:{"@id":"schema:dateDeleted"},collection:{"@id":"dcterms:isPartOf"}}]}},function(e,t){e.exports={definitions:{xsd_dateTime:{type:"string",format:"date-time"},iri:{type:"string",anyOf:[{format:"uri"},{pattern:"^urn:"}]},iri_object:{type:"object",required:["id"],additionalProperties:!1,properties:{id:{$ref:"#/definitions/iri"}}},mediaType:{type:"string",pattern:".*/.*"},language:{type:"string",pattern:"[a-z]{2,3}"},textDirection:{type:"string",enum:["","ltr","rtl","auto"]},Annotation:{type:"object",required:["target"],properties:{id:{$ref:"#/definitions/iri"},created:{$ref:"#/definitions/xsd_dateTime"},modified:{$ref:"#/definitions/xsd_dateTime"},generated:{$ref:"#/definitions/xsd_dateTime"},creator:{oneOf:[{type:"string"},{$ref:"#/definitions/Person"}]},generator:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Software"}]},canonical:{type:"string"},via:{$ref:"#/definitions/iri"},styledBy:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/CssStylesheet"}]},body:{anyOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/iri_object"},{$ref:"#/definitions/Resource"},{$ref:"#/definitions/TextualBody"},{$ref:"#/definitions/Choice"},{$ref:"#/definitions/SpecificResource"},{type:"array",items:{anyOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/iri_object"},{$ref:"#/definitions/Resource"},{$ref:"#/definitions/TextualBody"},{$ref:"#/definitions/Choice"},{$ref:"#/definitions/SpecificResource"}]}}]},target:{anyOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/iri_object"},{$ref:"#/definitions/Resource"},{$ref:"#/definitions/SpecificResource"},{type:"array",items:{anyOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/iri_object"},{$ref:"#/definitions/Resource"},{$ref:"#/definitions/SpecificResource"}]}}]}}},Resource:{type:"object",properties:{id:{$ref:"#/definitions/iri"},format:{$ref:"#/definitions/mediaType"},language:{oneOf:[{$ref:"#/definitions/language"},{type:"array",items:{$ref:"#/definitions/language"}}]},processingLanguage:{$ref:"#/definitions/language"},textDirection:{$ref:"#/definitions/textDirection"}}},TargetResource:{allOf:[{$ref:"#/definitions/Resource"},{type:"object",properties:{renderedVia:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Software"}]},styleClass:{type:"string"},source:{allOf:[{$ref:"#/definitions/iri"},{default:"http://foo"}]},scope:{$ref:"#/definitions/iri"},selector:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Selector"},{type:"array",items:{anyOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Selector"}]}}]}}}]},AnnotationMetadata:{type:"object",properties:{created:{$ref:"#/definitions/xsd_dateTime"},modified:{$ref:"#/definitions/xsd_dateTime"},generated:{$ref:"#/definitions/xsd_dateTime"},creator:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Person"}]},generator:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Software"}]}}},ResourceClass:{type:"string",enum:["Dataset","Image","Video","Sound","Text"]},resourceClassType:{type:"string"},TextualBody:{type:"object",required:["type","value"],properties:{type:{oneOf:[{type:"string",enum:["TextualBody"]},{type:"array",items:{type:"string"},contains:{const:"TextualBody"}}]},value:{type:"string"},format:{$ref:"#/definitions/mediaType"}}},Choice:{type:"object",required:["type"],properties:{type:{type:"string",enum:["Choice"]},items:{type:"array",minItems:1,items:{anyOf:[{$ref:"#/definitions/TextualBody"},{$ref:"#/definitions/Resource"},{$ref:"#/definitions/SpecificResource"}]}}}},Motivation:{type:"string",enum:["bookmarking","classifying","commenting","describing","editing","highlighting","identifying","linking","moderating","questioning","replying","tagging"]},Agent:{type:"object",required:["id"],properties:{id:{$ref:"#/definitions/iri"},type:{type:"string",enum:["Person","Organization","Software"]},name:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},nickname:{type:"string"},email:{type:"string",format:"email"},email_sha1:{type:"string"},homepage:{$ref:"#/definitions/iri"}}},Person:{allOf:[{$ref:"#/definitions/Agent"},{properties:{type:{enum:["Person"]}}},{required:["name"]}]},SpecificResource:{type:"object",anyOf:[{required:["source","purpose"]},{required:["source","selector"]},{required:["source","styleClass"]},{required:["source","state"]},{required:["source","scope"]},{required:["source"]}],properties:{type:{type:"string",enum:["SpecificResource"]},styleClass:{type:"string"},source:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Resource"}]},motivation:{oneOf:[{$ref:"#/definitions/Motivation"},{type:"array",contains:{$ref:"#/definitions/Motivation"}}]},purpose:{oneOf:[{$ref:"#/definitions/Motivation"},{type:"array",contains:{$ref:"#/definitions/Motivation"}}]},scope:{$ref:"#/definitions/iri"},accessibility:{type:"string"},state:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/iri_object"},{$ref:"#/definitions/State"},{type:"array",items:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/iri_object"},{$ref:"#/definitions/State"}]}}]},selector:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Selector"}]}}},Selector:{type:"object",oneOf:[{$ref:"#/definitions/FragmentSelector"},{$ref:"#/definitions/CssSelector"},{$ref:"#/definitions/XPathSelector"},{$ref:"#/definitions/TextQuoteSelector"},{$ref:"#/definitions/TextPositionSelector"},{$ref:"#/definitions/DataPositionSelector"},{$ref:"#/definitions/SvgSelector"},{$ref:"#/definitions/RangeSelector"}]},FragmentSelector:{type:"object",required:["type","value"],properties:{type:{type:"string",enum:["FragmentSelector"]},value:{type:"string"},conformsTo:{type:"string",enum:["http://tools.ietf.org/rfc/rfc3236","http://tools.ietf.org/rfc/rfc3778","http://tools.ietf.org/rfc/rfc5147","http://tools.ietf.org/rfc/rfc3023","http://tools.ietf.org/rfc/rfc3870","http://tools.ietf.org/rfc/rfc7111","http://www.w3.org/TR/media-frags/","http://www.w3.org/TR/SVG/","http://www.idpf.org/epub/linking/cfi/epub-cfi.html"]}}},CssSelector:{type:"object",required:["type","value"],properties:{type:{type:"string",enum:["CssSelector"]},value:{type:"string"}}},XPathSelector:{type:"object",required:["type","value"],properties:{type:{type:"string",enum:["XPathSelector"]},value:{type:"string"}}},TextQuoteSelector:{type:"object",required:["type","exact"],properties:{type:{type:"string",enum:["TextQuoteSelector"]},exact:{type:"string"},suffix:{type:"string"}}},TextPositionSelector:{type:"object",required:["start","end"],properties:{type:{type:"string",enum:["TextPositionSelector"]},start:{type:"number"},end:{type:"number"}}},DataPositionSelector:{type:"object",required:["start","end"],properties:{type:{type:"string",enum:["DataPositionSelector"]},start:{type:"number"},end:{type:"number"}}},SvgSelector:{type:"object",oneOf:[{required:["id","type"]},{required:["value","type"]}],properties:{id:{$ref:"#/definitions/iri"},type:{type:"string",enum:["SvgSelector"]},value:{type:"string"}}},RangeSelector:{type:"object",required:["type","startSelector","endSelector"],properties:{type:{type:"string",enum:["RangeSelector"]},startSelector:{$ref:"#/definitions/Selector"},endSelector:{$ref:"#/definitions/Selector"}}},State:{oneOf:[{$ref:"#/definitions/TimeState"},{$ref:"#/definitions/HttpRequestState"}]},TimeState:{type:"object",required:["type"],properties:{type:{type:"string",enum:["TimeState"]},sourceDate:{$ref:"#/definitions/xsd_dateTime"},sourceDateStart:{$ref:"#/definitions/xsd_dateTime"},sourceDateEnd:{$ref:"#/definitions/xsd_dateTime"},cached:{$ref:"#/definitions/iri"}}},HttpRequestState:{type:"object",required:["type"],properties:{type:{type:"string",enum:["HttpRequestState"]},value:{type:"string"}}},CssStylesheet:{type:"object",required:["type","value"],properties:{type:{type:"string",enum:["CssStylesheet"]},value:{type:"string"}}},Software:{allOf:[{$ref:"#/definitions/Agent"},{required:["id","type"],properties:{id:{$ref:"#/definitions/iri"},type:{type:"string",enum:["Software"]},"schema:softwareVersion":{type:"string"}}}]},AnnotationCollection:{type:"object",required:["id","type"],properties:{"@context":{oneOf:[{type:"string",enum:["http://www.w3.org/ns/anno.jsonld"]},{type:"array",items:{type:"string"},contains:{const:"http://www.w3.org/ns/anno.jsonld"}}]},id:{$ref:"#/definitions/iri"},type:{oneOf:[{type:"string",enum:["AnnotationCollection"]},{type:"array",items:{type:"string"},contains:{const:"AnnotationCollection"}}]},label:{type:"string"},total:{type:"number"},first:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/AnnotationPage"}]},last:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/AnnotationPage"}]}}},AnnotationPage:{type:"object",properties:{"@context":{oneOf:[{type:"string",enum:["http://www.w3.org/ns/anno.jsonld"]},{type:"array",items:{type:"string"},contains:{const:"http://www.w3.org/ns/anno.jsonld"}}]},id:{$ref:"#/definitions/iri"},type:{oneOf:[{type:"string",enum:["AnnotationPage"]},{type:"array",items:{type:"string"},contains:{const:"AnnotationPage"}}]},partOf:{oneOf:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/AnnotationPage"}]},items:{type:"array",items:[{$ref:"#/definitions/iri"},{$ref:"#/definitions/Annotation"}]}}}}}},function(e,t){e.exports={swagger:"2.0",basePath:"{{{ OPENAPI_BASEPATH }}}",host:"{{{ OPENAPI_HOST }}}",info:{title:"Anno Server API",version:"0.0.1",description:" See [Web Annotation Protocol](https://www.w3.org/TR/annotation-protocol) "},consumes:["application/ld+json"],produces:['application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"'],tags:[{name:"anno",description:"Web Annotation Protocol"},{name:"extensions",description:"Extensions to Web Annotation Protocol"},{name:"authentication",description:"Authentication/token related endpoints"}],securityDefinitions:{Bearer:{type:"apiKey",name:"Authorization",description:"Format: 'Bearer TOKEN_HERE'",in:"header"}},paths:{"/{{ OPENAPI_PATH }}":{head:{tags:["anno"],summary:"Get all annotations that adhere to query without body/target",parameters:[{in:"query",name:"$target",required:!0,type:"string",format:"url"}],responses:{200:{description:"all okay",schema:{type:"array",items:{$ref:"#/definitions/Annotation"}}}}},get:{tags:["anno"],summary:"Get all annotations that adhere to query",parameters:[{in:"query",name:"target.source",required:!1,type:"string",format:"url"},{in:"query",name:"metadataOnly",type:"boolean",default:!1,allowEmptyValue:!0,description:"Send only metadata"},{in:"query",name:"skipVersions",type:"boolean",default:!1,allowEmptyValue:!0,description:"Leave off versions"},{in:"query",name:"skipReplies",type:"boolean",default:!1,allowEmptyValue:!0,description:"Leave off replies"},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"Prefer",description:'<a href="https://www.w3.org/TR/annotation-protocol/#container-representations">Preferred Container Representation</a>',enum:['return=representation;include="http://www.w3.org/ns/ldp#PreferMinimalContainer"','return=representation;include="http://www.w3.org/ns/oa#PreferContainedIRIs','return=representation;include="http://www.w3.org/ns/oa#PreferContainedDescriptions"']}],responses:{200:{description:"all okay",schema:{type:"array",items:{$ref:"#/definitions/Annotation"}}}}},post:{tags:["anno"],security:[{Bearer:[]}],summary:"Post a new annotation",parameters:[{in:"body",name:"body",description:"New annotation to post",schema:{$ref:"#/definitions/Annotation"}},{in:"header",name:"Slug",description:"Preferred annotation ID"},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"X-Anno-Context",description:"Context from whence this annotation origins",required:!0},{in:"query",name:"metadataOnly",type:"boolean",default:!1,allowEmptyValue:!0,description:"Send only metadata"},{in:"query",name:"skipVersions",type:"boolean",default:!1,allowEmptyValue:!0,description:"Leave off versions"},{in:"query",name:"skipReplies",type:"boolean",default:!1,allowEmptyValue:!0,description:"Leave off replies"}],responses:{200:{description:"all okay"}}},delete:{tags:["extensions"],security:[{Bearer:[]}],summary:"Wipe the store",parameters:[],responses:{200:{description:"all okay"}}}},"/{{ OPENAPI_PATH }}/{annoId}":{get:{tags:["anno"],summary:"Get a single annotation",parameters:[{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"query",name:"metadataOnly",type:"boolean",default:!1,allowEmptyValue:!0,description:"Send only metadata"},{in:"query",name:"skipVersions",type:"boolean",default:!1,allowEmptyValue:!0,description:"Leave off versions"},{in:"query",name:"skipReplies",type:"boolean",default:!1,allowEmptyValue:!0,description:"Leave off replies"}],responses:{200:{description:"all okay",schema:{$ref:"#/definitions/Annotation"}},404:{description:"No such annotation exists in the store"},410:{description:"This annotation has been deleted"}}},head:{tags:["anno"],summary:"Get a single annotation without body/target",parameters:[{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"}],responses:{200:{description:"all okay"},404:{description:"No such annotation exists in the store"},410:{description:"This annotation has been deleted"}}},delete:{tags:["anno"],summary:"Delete an annotation",description:" Will mark the annotation as deleted.\nSubsequent GET requests will return 410. ",parameters:[{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"X-Anno-Context",description:"Context from whence this annotation origins",required:!0}],responses:{200:{description:"Annotation deleted"},404:{description:"Annotation not found"}}},put:{tags:["anno"],summary:"Store a new revision of an annotation",parameters:[{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"},{in:"body",name:"body",description:"Updated annotation",required:!0,schema:{$ref:"#/definitions/Annotation"}},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"X-Anno-Context",description:"Context from whence this annotation origins",required:!0}],responses:{200:{description:"Created a new revision",schema:{$ref:"#/definitions/Annotation"}}}}},"/anno/{annoId}/!":{delete:{tags:["extensions"],security:[{Bearer:[]}],summary:"Completely delete the annotation",description:" Will remove the annotation and all replies and versions from the store. Subsequent GET requests will return 404 ",parameters:[{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"X-Anno-Context",description:"Context from whence this annotation origins",required:!0}],responses:{200:{description:"all okay"}}}},"/anno/{annoId}~{revId}":{get:{tags:["extensions"],summary:"Get a single revision of one annotation",parameters:[{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"},{in:"path",name:"revId",type:"string",required:!0,description:"ID of the revision"}],responses:{200:{description:"all okay"}}},head:{tags:["extensions"],summary:"Get a single revision of one annotation without body/target",parameters:[{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"},{in:"path",name:"revId",type:"string",required:!0,description:"ID of the revision"}],responses:{200:{description:"all okay"}}}},"/anno/{annoId}/reply":{post:{tags:["extensions"],summary:"Reply to an annotation",parameters:[{in:"path",name:"annoId",type:"string",required:!0,description:"ID of the annotation"},{in:"body",name:"body",required:!0,description:"Reply to post",schema:{$ref:"#/definitions/AnnotationReply"}},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"X-Anno-Context",description:"Context from whence this annotation origins",required:!0}],responses:{201:{description:"Reply created"},404:{description:"Annotation not found"}}}},"/anno/acl":{post:{tags:["extensions"],summary:"Get authorization information for a list of targets",parameters:[{in:"body",name:"body",required:!0,description:"List of target urls",schema:{type:"object",required:["targets"],properties:{targets:{type:"array",items:{type:"string",format:"url"}}}}}],responses:{200:{description:"create/revise/read/remove information",schema:{type:"object",patternProperties:{"*":{type:"object",required:["read","create","revise","remove"],properties:{read:{type:"boolean"},create:{type:"boolean"},revise:{type:"boolean"},remove:{type:"boolean"}}}}}}}}},"/anno/import":{post:{description:"' Import an annotation, including replies and versions. Honor `Slug` and replace as necessary '",tags:["extensions"],security:[{Bearer:[]}],summary:"Import an annotation",parameters:[{in:"body",name:"body",description:"New annotation to post",schema:{$ref:"#/definitions/Annotation"}},{in:"header",name:"Slug",description:"Preferred annotation ID"},{in:"header",name:"X-Anno-Collection",description:"Anno Collection",default:"default"},{in:"header",name:"X-Anno-Context",description:"Context from whence this annotation origins",required:!0}],responses:{201:{description:"Imported the annotation"}}}},"/auth/login":{get:{tags:["authentication"],summary:"Show login mask using whatever auth backend is configured",parameters:[{in:"query",name:"from",type:"uri",required:!0,description:"Back link"}],responses:{200:{description:"all okay"}}},post:{tags:["authentication"],summary:"Post login data if applicable to backend."}},"/auth/logout":{get:{tags:["authentication"],summary:"Show logout mask using whatever auth backend is configured",parameters:[{in:"query",name:"from",type:"uri",required:!0,description:"Back link"}],responses:{200:{description:"all okay"}}},post:{tags:["authentication"],summary:"Logout."}},"/auth/token/{collection}":{get:{tags:["authentication"],summary:"Get the JWT token to authenticate against the backend",responses:{200:{description:"The token",schema:{type:"object"}}}}}}}},function(e,t,r){e.exports={default:r(132),__esModule:!0}},function(e,t,r){e.exports={default:r(133),__esModule:!0}},function(e,t,r){e.exports={default:r(134),__esModule:!0}},function(e,t,r){e.exports={default:r(135),__esModule:!0}},function(e,t,r){e.exports={default:r(136),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r(130),i=n(o),a=r(129),s=n(a),u="function"==typeof s.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(i.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,r){var n=r(8),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,r){r(157),e.exports=r(8).Object.assign},function(e,t,r){r(158),e.exports=r(8).Object.keys},function(e,t,r){r(161),r(159),r(162),r(163),e.exports=r(8).Symbol},function(e,t,r){r(160),r(164),e.exports=r(55).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(17),o=r(155),i=r(154);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),f=i(a,c);if(e&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},function(e,t,r){var n=r(137);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(22),o=r(47),i=r(31);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(5).document;e.exports=n&&n.documentElement},function(e,t,r){var n=r(77);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){"use strict";var n=r(82),o=r(32),i=r(48),a={};r(15)(a,r(18)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(33)("meta"),o=r(30),i=r(9),a=r(16).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(14)(function(){return u(Object.preventExtensions({}))}),f=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},h=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},p=function(e){return c&&d.NEED&&u(e)&&!i(e,n)&&f(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:l,getWeak:h,onFreeze:p}},function(e,t,r){"use strict";var n=r(22),o=r(47),i=r(31),a=r(52),s=r(80),u=Object.assign;e.exports=!u||r(14)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,f=o.f,l=i.f;u>c;)for(var h,p=s(arguments[c++]),d=f?n(p).concat(f(p)):n(p),v=d.length,y=0;v>y;)l.call(p,h=d[y++])&&(r[h]=p[h]);return r}:u},function(e,t,r){var n=r(16),o=r(28),i=r(22);e.exports=r(13)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){var n=r(31),o=r(32),i=r(17),a=r(53),s=r(9),u=r(79),c=Object.getOwnPropertyDescriptor;t.f=r(13)?c:function(e,t){if(e=i(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(17),o=r(83).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(n(e))}},function(e,t,r){var n=r(9),o=r(52),i=r(49)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(29),o=r(8),i=r(14);e.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(51),o=r(43);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,r){var n=r(51),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,r){var n=r(51),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){"use strict";var n=r(138),o=r(145),i=r(45),a=r(17);e.exports=r(81)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t,r){var n=r(29);n(n.S+n.F,"Object",{assign:r(147)})},function(e,t,r){var n=r(52),o=r(22);r(152)("keys",function(){return function(e){return o(n(e))}})},function(e,t){},function(e,t,r){"use strict";var n=r(153)(!0);r(81)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n=r(5),o=r(9),i=r(13),a=r(29),s=r(85),u=r(146).KEY,c=r(14),f=r(50),l=r(48),h=r(33),p=r(18),d=r(55),v=r(54),y=r(141),m=r(143),g=r(28),b=r(17),w=r(53),_=r(32),E=r(82),P=r(150),x=r(149),S=r(16),O=r(22),A=x.f,k=S.f,j=P.f,I=n.Symbol,R=n.JSON,$=R&&R.stringify,T=p("_hidden"),F=p("toPrimitive"),D={}.propertyIsEnumerable,C=f("symbol-registry"),L=f("symbols"),N=f("op-symbols"),M=Object.prototype,B="function"==typeof I,q=n.QObject,U=!q||!q.prototype||!q.prototype.findChild,z=i&&c(function(){return 7!=E(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(M,t);n&&delete M[t],k(e,t,r),n&&e!==M&&k(M,t,n)}:k,V=function(e){var t=L[e]=E(I.prototype);return t._k=e,t},K=B&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Q=function(e,t,r){return e===M&&Q(N,t,r),g(e),t=w(t,!0),g(r),o(L,t)?(r.enumerable?(o(e,T)&&e[T][t]&&(e[T][t]=!1),r=E(r,{enumerable:_(0,!1)})):(o(e,T)||k(e,T,_(1,{})),e[T][t]=!0),z(e,t,r)):k(e,t,r)},G=function(e,t){g(e);for(var r,n=y(t=b(t)),o=0,i=n.length;i>o;)Q(e,r=n[o++],t[r]);return e},Y=function(e,t){return void 0===t?E(e):G(E(e),t)},H=function(e){var t=D.call(this,e=w(e,!0));return!(this===M&&o(L,e)&&!o(N,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,T)&&this[T][e])||t)},J=function(e,t){if(e=b(e),t=w(t,!0),e!==M||!o(L,t)||o(N,t)){var r=A(e,t);return!r||!o(L,t)||o(e,T)&&e[T][t]||(r.enumerable=!0),r}},W=function(e){for(var t,r=j(b(e)),n=[],i=0;r.length>i;)o(L,t=r[i++])||t==T||t==u||n.push(t);return n},X=function(e){for(var t,r=e===M,n=j(r?N:b(e)),i=[],a=0;n.length>a;)!o(L,t=n[a++])||r&&!o(M,t)||i.push(L[t]);return i};B||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===M&&t.call(N,r),o(this,T)&&o(this[T],e)&&(this[T][e]=!1),z(this,e,_(1,r))};return i&&U&&z(M,e,{configurable:!0,set:t}),V(e)},s(I.prototype,"toString",function(){return this._k}),x.f=J,S.f=Q,r(83).f=P.f=W,r(31).f=H,r(47).f=X,i&&!r(46)&&s(M,"propertyIsEnumerable",H,!0),d.f=function(e){return V(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:I});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)p(Z[ee++]);for(var te=O(p.store),re=0;te.length>re;)v(te[re++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return o(C,e+="")?C[e]:C[e]=I(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in C)if(C[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),a(a.S+a.F*!B,"Object",{create:Y,defineProperty:Q,defineProperties:G,getOwnPropertyDescriptor:J,getOwnPropertyNames:W,getOwnPropertySymbols:X}),R&&a(a.S+a.F*(!B||c(function(){var e=I();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!K(e)){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);return t=n[1],"function"==typeof t&&(r=t),!r&&m(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!K(t))return t}),n[1]=t,$.apply(R,n)}}}),I.prototype[F]||r(15)(I.prototype,F,I.prototype.valueOf),l(I,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(e,t,r){r(54)("asyncIterator")},function(e,t,r){r(54)("observable")},function(e,t,r){r(156);for(var n=r(5),o=r(15),i=r(45),a=r(18)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],f=n[c],l=f&&f.prototype;l&&!l[a]&&o(l,a,c),i[c]=i.Array}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,i=t[r].split("/"),a=e;for(o=1;o<i.length;o++)a=a[i[o]];for(o=0;o<n.length;o++){var s=n[o],u=a[s];u&&(a[s]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]})}}return e}},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);e=this._opts=L.copy(e)||{},this._schemas={},this._refs={},this._fragments={},this._formats=T(e.format);var t=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(e){return t.test(e)},this._cache=e.cache||new I,this._loadingSchemas={},this._compilations=[],this.RULES=F(),this._getId=m(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=$),this._metaOpts=A(this),e.formats&&S(this),P(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x(this),e.patternGroups&&C(this)}function o(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);return!0===r.$async?"*"==this._opts.async?N(o):o:(this.errors=r.errors,o)}function i(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)}function a(e,t,r,n){if(Array.isArray(e))for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,r,n);else{var i=this._getId(e);if(void 0!==i&&"string"!=typeof i)throw new Error("schema id must be string");t=j.normalizeId(t||i),O(this,t),this._schemas[t]=this._addSchema(e,r,n,!0)}}function s(e,t,r){this.addSchema(e,t,r,!0)}function u(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||c(this)))return console.warn("meta-schema not available"),this.errors=null,!0;var n=this._formats.uri;this._formats.uri="function"==typeof n?this._schemaUriFormatFunc:this._schemaUriFormat;var o;try{o=this.validate(r,e)}finally{this._formats.uri=n}if(!o&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);console.error(i)}return o}function c(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(q)?q:void 0,e._opts.defaultMeta}function f(e){var t=h(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return l(this,e)}}function l(e,t){var r=j.schema.call(e,{schema:{}},t);if(r){var n=r.schema,o=r.root,i=r.baseId,a=k.call(e,n,o,void 0,i);return e._fragments[t]=new R({ref:t,fragment:!0,schema:n,root:o,baseId:i,validate:a}),a}}function h(e,t){return t=j.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function p(e){if(e instanceof RegExp)return d(this,this._schemas,e),void d(this,this._refs,e);switch(typeof e){case"undefined":return d(this,this._schemas),d(this,this._refs),void this._cache.clear();case"string":var t=h(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],void delete this._refs[e];case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var o=this._getId(e);o&&(o=j.normalizeId(o),delete this._schemas[o],delete this._refs[o])}}function d(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function v(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,i=o?o(e):e,a=this._cache.get(i);if(a)return a;n=n||!1!==this._opts.addUsedSchema;var s=j.normalizeId(this._getId(e));s&&n&&O(this,s);var u,c=!1!==this._opts.validateSchema&&!t;c&&!(u=s&&s==j.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=j.ids.call(this,e),l=new R({id:s,schema:e,localRefs:f,cacheKey:i,meta:r});return"#"!=s[0]&&n&&(this._refs[s]=l),this._cache.put(i,l),c&&u&&this.validateSchema(e,!0),l}function y(e,t){function r(){var t=e.validate,n=t.apply(null,arguments);return r.errors=t.errors,n}if(e.compiling)return e.validate=r,r.schema=e.schema,r.errors=null,r.root=t||r,!0===e.schema.$async&&(r.$async=!0),r;e.compiling=!0;var n;e.meta&&(n=this._opts,this._opts=this._metaOpts);var o;try{o=k.call(this,e.schema,t,e.localRefs)}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o}function m(e){switch(e.schemaId){case"$id":return b;case"id":return g;default:return w}}function g(e){return e.$id&&console.warn("schema $id ignored",e.$id),e.id}function b(e){return e.id&&console.warn("schema id ignored",e.id),e.$id}function w(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function _(e,t){if(!(e=e||this.errors))return"No errors";t=t||{};for(var r=void 0===t.separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,o="",i=0;i<e.length;i++){var a=e[i];a&&(o+=n+a.dataPath+" "+a.message+r)}return o.slice(0,-r.length)}function E(e,t){"string"==typeof t&&(t=new RegExp(t)),this._formats[e]=t}function P(e){var t;if(e._opts.$data&&(t=r(194),e.addMetaSchema(t,t.$id,!0)),!1!==e._opts.meta){var n=r(195);e._opts.$data&&(n=D(n,z)),e.addMetaSchema(n,q,!0),e._refs["http://json-schema.org/schema"]=q}}function x(e){var t=e._opts.schemas;if(t)if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}function S(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}function O(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function A(e){for(var t=L.copy(e._opts),r=0;r<U.length;r++)delete t[U[r]];return t}var k=r(171),j=r(57),I=r(167),R=r(86),$=r(118),T=r(170),F=r(172),D=r(165),C=r(193),L=r(19),N=r(99);e.exports=n,n.prototype.validate=o,n.prototype.compile=i,n.prototype.addSchema=a,n.prototype.addMetaSchema=s,n.prototype.validateSchema=u,n.prototype.getSchema=f,n.prototype.removeSchema=p,n.prototype.addFormat=E,n.prototype.errorsText=_,n.prototype._addSchema=v,n.prototype._compile=y,n.prototype.compileAsync=r(169);var M=r(192);n.prototype.addKeyword=M.add,n.prototype.getKeyword=M.get,n.prototype.removeKeyword=M.remove;var B=r(56);n.ValidationError=B.Validation,n.MissingRefError=B.MissingRef,n.$dataMetaSchema=D;var q="http://json-schema.org/draft-06/schema",U=["removeAdditional","useDefaults","coerceTypes"],z=["/properties"]},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";e.exports={$ref:r(189),allOf:r(174),anyOf:r(175),const:r(176),contains:r(177),dependencies:r(179),enum:r(180),format:r(181),items:r(182),maximum:r(87),minimum:r(87),maxItems:r(88),minItems:r(88),maxLength:r(89),minLength:r(89),maxProperties:r(90),minProperties:r(90),multipleOf:r(183),not:r(184),oneOf:r(185),pattern:r(186),properties:r(187),propertyNames:r(188),required:r(190),uniqueItems:r(191),validate:r(91)}},function(e,t,r){"use strict";function n(e,t,r){function i(e){var t=e.$schema;return t&&!s.getSchema(t)?n.call(s,{$ref:t},!0):Promise.resolve()}function a(e){try{return s._compile(e)}catch(r){if(r instanceof o)return function(r){function n(){delete s._loadingSchemas[u]}function o(e){return s._refs[e]||s._schemas[e]}var u=r.missingSchema;if(o(u))throw new Error("Schema "+u+" is loaded but "+r.missingRef+" cannot be resolved");var c=s._loadingSchemas[u];return c||(c=s._loadingSchemas[u]=s._opts.loadSchema(u),c.then(n,n)),c.then(function(e){if(!o(u))return i(e).then(function(){o(u)||s.addSchema(e,u,void 0,t)})}).then(function(){return a(e)})}(r);throw r}}var s=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof t&&(r=t,t=void 0);var u=i(e).then(function(){var r=s._addSchema(e,void 0,t);return r.validate||a(r)});return r&&u.then(function(e){r(null,e)},r),u}var o=r(56).MissingRef;e.exports=n},function(e,t,r){"use strict";function n(e){return e="full"==e?"full":"fast",f.copy(n[e])}function o(e){var t=e.match(l);if(!t)return!1;var r=+t[1],n=+t[2];return r>=1&&r<=12&&n>=1&&n<=h[r]}function i(e,t){var r=e.match(p);if(!r)return!1;var n=r[1],o=r[2],i=r[3],a=r[5];return n<=23&&o<=59&&i<=59&&(!t||a)}function a(e){var t=e.split(E);return 2==t.length&&o(t[0])&&i(t[1],!0)}function s(e){return e.length<=255&&d.test(e)}function u(e){return P.test(e)&&v.test(e)}function c(e){if(x.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var f=r(19),l=/^\d\d\d\d-(\d\d)-(\d\d)$/,h=[0,31,29,31,30,31,30,31,31,30,31,30,31],p=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,d=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,v=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,m=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#.\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,g=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,b=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,w=/^(?:\/(?:[^~\/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,_=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;e.exports=n,n.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":m,url:g,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:d,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:c,uuid:b,"json-pointer":w,"relative-json-pointer":_},n.full={date:o,time:i,"date-time":a,uri:u,"uri-reference":y,"uri-template":m,url:g,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:c,uuid:b,"json-pointer":w,"relative-json-pointer":_};var E=/t|\s/i,P=/\/|:/,x=/[^\\]\\Z/},function(e,t,r){"use strict";function n(e,t,r,a){function _(){var e=q.validate,t=e.apply(null,arguments);return _.errors=e.errors,t}function E(e,r,o,i){var a=!r||r&&r.schema==e;if(r.schema!=t.schema)return n.call(R,e,r,o,i);var v=!0===e.$async,_=y({isTop:!0,schema:e,isRoot:a,baseId:i,root:r,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:d.MissingRef,RULES:z,validate:y,util:p,resolve:h,resolveRef:P,usePattern:k,useDefault:j,useCustomRule:I,opts:$,formats:U,self:R});_=l(T,c)+l(D,s)+l(L,u)+l(M,f)+_,$.processCode&&(_=$.processCode(_));var E;try{E=new Function("self","RULES","formats","root","refVal","defaults","customRules","co","equal","ucs2length","ValidationError",_)(R,z,U,t,T,L,M,m,b,g,w),T[0]=E}catch(e){throw console.error("Error compiling schema, function code:",_),e}return E.schema=e,E.errors=null,E.refs=F,E.refVal=T,E.root=a?E:r,v&&(E.$async=!0),!0===$.sourceCode&&(E.source={code:_,patterns:D,defaults:L}),E}function P(e,o,i){o=h.url(e,o);var a,s,u=F[o];if(void 0!==u)return a=T[u],s="refVal["+u+"]",A(a,s);if(!i&&t.refs){var c=t.refs[o];if(void 0!==c)return a=t.refVal[c],s=x(o,a),A(a,s)}s=x(o);var f=h.call(R,E,t,o);if(void 0===f){var l=r&&r[o];l&&(f=h.inlineRef(l,$.inlineRefs)?l:n.call(R,l,t,r,e))}if(void 0!==f)return O(o,f),A(f,s);S(o)}function x(e,t){var r=T.length;return T[r]=t,F[e]=r,"refVal"+r}function S(e){delete F[e]}function O(e,t){var r=F[e];T[r]=t}function A(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&e.$async}}function k(e){var t=C[e];return void 0===t&&(t=C[e]=D.length,D[t]=e),"pattern"+t}function j(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return p.toQuotedString(e);case"object":if(null===e)return"null";var t=v(e),r=N[t];return void 0===r&&(r=N[t]=L.length,L[r]=e),"default"+r}}function I(e,t,r,n){var o=e.definition.validateSchema;if(o&&!1!==R._opts.validateSchema){if(!o(t)){var i="keyword schema is invalid: "+R.errorsText(o.errors);if("log"!=R._opts.validateSchema)throw new Error(i);console.error(i)}}var a,s=e.definition.compile,u=e.definition.inline,c=e.definition.macro;if(s)a=s.call(R,t,r,n);else if(c)a=c.call(R,t,r,n),!1!==$.validateSchema&&R.validateSchema(a,!0);else if(u)a=u.call(R,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var f=M.length;return M[f]=a,{code:"customRule"+f,validate:a}}var R=this,$=this._opts,T=[void 0],F={},D=[],C={},L=[],N={},M=[];t=t||{schema:e,refVal:T,refs:F};var B=o.call(this,e,t,a),q=this._compilations[B.index];if(B.compiling)return q.callValidate=_;var U=this._formats,z=this.RULES;try{var V=E(e,t,r,a);q.validate=V;var K=q.callValidate;return K&&(K.schema=V.schema,K.errors=null,K.refs=V.refs,K.refVal=V.refVal,K.root=V.root,K.$async=V.$async,$.sourceCode&&(K.source=V.source)),V}finally{i.call(this,e,t,a)}}function o(e,t,r){var n=a.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function i(e,t,r){var n=a.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function a(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function s(e,t){return"var pattern"+e+" = new RegExp("+p.toQuotedString(t[e])+");"}function u(e){return"var default"+e+" = defaults["+e+"];"}function c(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function f(e){return"var customRule"+e+" = customRules["+e+"];"}function l(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}var h=r(57),p=r(19),d=r(56),v=r(118),y=r(91),m=r(99),g=p.ucs2length,b=r(75),w=d.Validation;e.exports=n},function(e,t,r){"use strict";var n=r(168),o=r(19).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","contains","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf"]}],t=["type"],r=["additionalItems","$schema","id","title","description","default","definitions"],i=["number","integer","string","array","object","boolean","null"];return e.all=o(t),e.types=o(i),e.forEach(function(r){r.rules=r.rules.map(function(r){var o;if("object"==typeof r){var i=Object.keys(r)[0];o=r[i],r=i,o.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}}),r.type&&(e.types[r.type]=r)}),e.keywords=o(t.concat(r)),e.custom={},e}},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,u=e.util.copy(e),c="";u.level++;var f="valid"+u.level,l=u.baseId,h=!0,p=o;if(p)for(var d,v=-1,y=p.length-1;v<y;)d=p[v+=1],e.util.schemaHasRules(d,e.RULES.all)&&(h=!1,u.schema=d,u.schemaPath=i+"["+v+"]",u.errSchemaPath=a+"/"+v,n+="  "+e.validate(u)+" ",u.baseId=l,s&&(n+=" if ("+f+") { ",c+="}"));return s&&(n+=h?" if (true) { ":" "+c.slice(0,-1)+" "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h="errs__"+o,p=e.util.copy(e),d="";p.level++;var v="valid"+p.level;if(a.every(function(t){return e.util.schemaHasRules(t,e.RULES.all)})){var y=p.baseId;n+=" var "+h+" = errors; var "+l+" = false;  ";var m=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=a;if(g)for(var b,w=-1,_=g.length-1;w<_;)b=g[w+=1],p.schema=b,p.schemaPath=s+"["+w+"]",p.errSchemaPath=u+"/"+w,n+="  "+e.validate(p)+" ",p.baseId=y,n+=" "+l+" = "+l+" || "+v+"; if (!"+l+") { ",d+="}";e.compositeRule=p.compositeRule=m,n+=" "+d+" if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}else c&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; "),h||(n+=" var schema"+o+" = validate.schema"+s+";"),n+="var "+l+" = equal("+f+", schema"+o+"); if (!"+l+") {   ";var p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var d=n;return n=p.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+d+"]); ":n+=" validate.errors = ["+d+"]; return false; ":n+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h="errs__"+o,p=e.util.copy(e);p.level++;var d="valid"+p.level,v="i"+o,y=p.dataLevel=e.dataLevel+1,m="data"+y,g=e.baseId,b=e.util.schemaHasRules(a,e.RULES.all);if(n+="var "+h+" = errors;var "+l+";",b){var w=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=a,p.schemaPath=s,p.errSchemaPath=u,n+=" var "+d+" = false; for (var "+v+" = 0; "+v+" < "+f+".length; "+v+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);var _=f+"["+v+"]";p.dataPathArr[y]=v;var E=e.validate(p);p.baseId=g,e.util.varOccurences(E,m)<2?n+=" "+e.util.varReplace(E,m,_)+" ":n+=" var "+m+" = "+_+"; "+E+" ",n+=" if ("+d+") break; }  ",e.compositeRule=p.compositeRule=w,n+="  if (!"+d+") {"}else n+=" if ("+f+".length == 0) {";var P=P||[];P.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var x=n;return n=P.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+x+"]); ":n+=" validate.errors = ["+x+"]; return false; ":n+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.schemaPath+e.util.getProperty(t),f=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),p="valid"+a,d="errs__"+a,v=e.opts.$data&&u&&u.$data;v?(i+=" var schema"+a+" = "+e.util.getData(u.$data,s,e.dataPathArr)+"; ",o="schema"+a):o=u;var y,m,g,b,w,_=this,E="definition"+a,P=_.definition,x="";if(v&&P.$data){w="keywordValidate"+a;var S=P.validateSchema;i+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+w+" = "+E+".validate;"}else{if(!(b=e.useCustomRule(_,u,e.schema,e)))return;o="validate.schema"+c,w=b.code,y=P.compile,m=P.inline,g=P.macro}var O=w+".errors",A="i"+a,k="ruleErr"+a,j=P.async;if(j&&!e.async)throw new Error("async keyword in sync schema");if(m||g||(i+=O+" = null;"),i+="var "+d+" = errors;var "+p+";",v&&P.$data&&(x+="}",i+=" if ("+o+" === undefined) { "+p+" = true; } else { ",S&&(x+="}",i+=" "+p+" = "+E+".validateSchema("+o+"); if ("+p+") { ")),m)P.statements?i+=" "+b.validate+" ":i+=" "+p+" = "+b.validate+"; ";else if(g){var I=e.util.copy(e),x="";I.level++;var R="valid"+I.level;I.schema=b.validate,I.schemaPath="";var $=e.compositeRule;e.compositeRule=I.compositeRule=!0;var T=e.validate(I).replace(/validate\.schema/g,w);e.compositeRule=I.compositeRule=$,i+=" "+T}else{var F=F||[];F.push(i),i="",i+="  "+w+".call( ",e.opts.passContext?i+="this":i+="self",y||!1===P.schema?i+=" , "+h+" ":i+=" , "+o+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var D=s?"data"+(s-1||""):"parentData",C=s?e.dataPathArr[s]:"parentDataProperty";i+=" , "+D+" , "+C+" , rootData )  ";var L=i;i=F.pop(),!1===P.errors?(i+=" "+p+" = ",j&&(i+=""+e.yieldAwait),i+=L+"; "):j?(O="customErrors"+a,i+=" var "+O+" = null; try { "+p+" = "+e.yieldAwait+L+"; } catch (e) { "+p+" = false; if (e instanceof ValidationError) "+O+" = e.errors; else throw e; } "):i+=" "+O+" = null; "+p+" = "+L+"; "}if(P.modifying&&(i+=" if ("+D+") "+h+" = "+D+"["+C+"];"),i+=""+x,P.valid)l&&(i+=" if (true) { ");else{i+=" if ( ",void 0===P.valid?(i+=" !",i+=g?""+R:""+p):i+=" "+!P.valid+" ",i+=") { ",n=_.keyword;var F=F||[];F.push(i),i="";var F=F||[];F.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { keyword: '"+_.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+_.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var N=i;i=F.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+N+"]); ":i+=" validate.errors = ["+N+"]; return false; ":i+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var M=i;i=F.pop(),m?P.errors?"full"!=P.errors&&(i+="  for (var "+A+"="+d+"; "+A+"<errors; "+A+"++) { var "+k+" = vErrors["+A+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+f+'"; } ',e.opts.verbose&&(i+=" "+k+".schema = "+o+"; "+k+".data = "+h+"; "),i+=" } "):!1===P.errors?i+=" "+M+" ":(i+=" if ("+d+" == errors) { "+M+" } else {  for (var "+A+"="+d+"; "+A+"<errors; "+A+"++) { var "+k+" = vErrors["+A+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+f+'"; } ',e.opts.verbose&&(i+=" "+k+".schema = "+o+"; "+k+".data = "+h+"; "),i+=" } } "):g?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { keyword: '"+_.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+_.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===P.errors?i+=" "+M+" ":(i+=" if (Array.isArray("+O+")) { if (vErrors === null) vErrors = "+O+"; else vErrors = vErrors.concat("+O+"); errors = vErrors.length;  for (var "+A+"="+d+"; "+A+"<errors; "+A+"++) { var "+k+" = vErrors["+A+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+e.errorPath+";  "+k+'.schemaPath = "'+f+'";  ',e.opts.verbose&&(i+=" "+k+".schema = "+o+"; "+k+".data = "+h+"; "),i+=" } } else { "+M+" } "),i+=" } ",l&&(i+=" else { ")}return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="errs__"+o,h=e.util.copy(e),p="";h.level++;var d="valid"+h.level,v={},y={},m=e.opts.ownProperties;for(_ in a){var g=a[_],b=Array.isArray(g)?y:v;b[_]=g}n+="var "+l+" = errors;";var w=e.errorPath;n+="var missing"+o+";";for(var _ in y)if(b=y[_],b.length){if(n+=" if ( "+f+e.util.getProperty(_)+" !== undefined ",m&&(n+=" && Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(_)+"') "),c){n+=" && ( ";var E=b;if(E)for(var P,x=-1,S=E.length-1;x<S;){P=E[x+=1],x&&(n+=" || ");var O=e.util.getProperty(P),A=f+O;n+=" ( ( "+A+" === undefined ",m&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(P)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?P:O)+") ) "}n+=")) {  ";var k="missing"+o,j="' + "+k+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,k,!0):w+" + "+k);var I=I||[];I.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var R=n;n=I.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+R+"]); ":n+=" validate.errors = ["+R+"]; return false; ":n+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var $=b;if($)for(var P,T=-1,F=$.length-1;T<F;){P=$[T+=1];var O=e.util.getProperty(P),j=e.util.escapeQuotes(P),A=f+O;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,P,e.opts.jsonPointers)),n+=" if ( "+A+" === undefined ",m&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(P)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { property: '"+e.util.escapeQuotes(_)+"', missingProperty: '"+j+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(_)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",c&&(p+="}",n+=" else { ")}e.errorPath=w;var D=h.baseId;for(var _ in v){var g=v[_];e.util.schemaHasRules(g,e.RULES.all)&&(n+=" "+d+" = true; if ( "+f+e.util.getProperty(_)+" !== undefined ",m&&(n+=" && Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(_)+"') "),n+=") { ",h.schema=g,h.schemaPath=s+e.util.getProperty(_),h.errSchemaPath=u+"/"+e.util.escapeFragment(_),n+="  "+e.validate(h)+" ",h.baseId=D,n+=" }  ",c&&(n+=" if ("+d+") { ",p+="}"))}return c&&(n+="   "+p+" if ("+l+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ");var p="i"+o,d="schema"+o;h||(n+=" var "+d+" = validate.schema"+s+";"),n+="var "+l+";",h&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=l+" = false;for (var "+p+"=0; "+p+"<"+d+".length; "+p+"++) if (equal("+f+", "+d+"["+p+"])) { "+l+" = true; break; }",h&&(n+="  }  "),n+=" if (!"+l+") {   ";var v=v||[];v.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var y=n;return n=v.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||"");if(!1===e.opts.format)return c&&(n+=" if (true) { "),n;var l,h=e.opts.$data&&a&&a.$data;h?(n+=" var schema"+o+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ",l="schema"+o):l=a;var p=e.opts.unknownFormats,d=Array.isArray(p);if(h){var v="format"+o,y="isObject"+o,m="formatType"+o;n+=" var "+v+" = formats["+l+"]; var "+y+" = typeof "+v+" == 'object' && !("+v+" instanceof RegExp) && "+v+".validate; var "+m+" = "+y+" && "+v+".type || 'string'; if ("+y+") { ",e.async&&(n+=" var async"+o+" = "+v+".async; "),n+=" "+v+" = "+v+".validate; } if (  ",h&&(n+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),n+=" (","ignore"!=p&&(n+=" ("+l+" && !"+v+" ",d&&(n+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),n+=") || "),n+=" ("+v+" && "+m+" == '"+r+"' && !(typeof "+v+" == 'function' ? ",e.async?n+=" (async"+o+" ? "+e.yieldAwait+" "+v+"("+f+") : "+v+"("+f+")) ":n+=" "+v+"("+f+") ",n+=" : "+v+".test("+f+"))))) {"}else{var v=e.formats[a];if(!v){if("ignore"==p)return console.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),c&&(n+=" if (true) { "),n;if(d&&p.indexOf(a)>=0)return c&&(n+=" if (true) { "),n;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var y="object"==typeof v&&!(v instanceof RegExp)&&v.validate,m=y&&v.type||"string";if(y){var g=!0===v.async;v=v.validate}if(m!=r)return c&&(n+=" if (true) { "),n;if(g){if(!e.async)throw new Error("async format in sync schema");var b="formats"+e.util.getProperty(a)+".validate";n+=" if (!("+e.yieldAwait+" "+b+"("+f+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(a);y&&(b+=".validate"),n+="function"==typeof v?" "+b+"("+f+") ":" "+b+".test("+f+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { format:  ",n+=h?""+l:""+e.util.toQuotedString(a),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=h?"' + "+l+" + '":""+e.util.escapeQuotes(a),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+s:""+e.util.toQuotedString(a),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var _=n;return n=w.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h="errs__"+o,p=e.util.copy(e),d="";p.level++;var v="valid"+p.level,y="i"+o,m=p.dataLevel=e.dataLevel+1,g="data"+m,b=e.baseId;if(n+="var "+h+" = errors;var "+l+";",Array.isArray(a)){var w=e.schema.additionalItems;if(!1===w){n+=" "+l+" = "+f+".length <= "+a.length+"; ";var _=u;u=e.errSchemaPath+"/additionalItems",n+="  if (!"+l+") {   ";var E=E||[];E.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var P=n;n=E.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+P+"]); ":n+=" validate.errors = ["+P+"]; return false; ":n+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u=_,c&&(d+="}",n+=" else { ")}var x=a;if(x)for(var S,O=-1,A=x.length-1;O<A;)if(S=x[O+=1],e.util.schemaHasRules(S,e.RULES.all)){n+=" "+v+" = true; if ("+f+".length > "+O+") { ";var k=f+"["+O+"]";p.schema=S,p.schemaPath=s+"["+O+"]",p.errSchemaPath=u+"/"+O,p.errorPath=e.util.getPathExpr(e.errorPath,O,e.opts.jsonPointers,!0),p.dataPathArr[m]=O;var j=e.validate(p);p.baseId=b,e.util.varOccurences(j,g)<2?n+=" "+e.util.varReplace(j,g,k)+" ":n+=" var "+g+" = "+k+"; "+j+" ",n+=" }  ",c&&(n+=" if ("+v+") { ",d+="}")}if("object"==typeof w&&e.util.schemaHasRules(w,e.RULES.all)){p.schema=w,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+v+" = true; if ("+f+".length > "+a.length+") {  for (var "+y+" = "+a.length+"; "+y+" < "+f+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var k=f+"["+y+"]";p.dataPathArr[m]=y;var j=e.validate(p);p.baseId=b,e.util.varOccurences(j,g)<2?n+=" "+e.util.varReplace(j,g,k)+" ":n+=" var "+g+" = "+k+"; "+j+" ",c&&(n+=" if (!"+v+") break; "),n+=" } }  ",c&&(n+=" if ("+v+") { ",d+="}")}}else if(e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=s,p.errSchemaPath=u,n+="  for (var "+y+" = 0; "+y+" < "+f+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var k=f+"["+y+"]";p.dataPathArr[m]=y;var j=e.validate(p);p.baseId=b,e.util.varOccurences(j,g)<2?n+=" "+e.util.varReplace(j,g,k)+" ":n+=" var "+g+" = "+k+"; "+j+" ",c&&(n+=" if (!"+v+") break; "),n+=" }"}return c&&(n+=" "+d+" if ("+h+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,l="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,o+="var division"+i+";if (",h&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+i+" = "+l+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+i+" !== parseInt(division"+i+") ",o+=" ) ",h&&(o+="  )  "),o+=" ) {   ";var p=p||[];p.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=h?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+u:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var d=o;return o=p.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+d+"]); ":o+=" validate.errors = ["+d+"]; return false; ":o+=" var err = "+d+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",f&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="errs__"+o,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u,n+=" var "+l+" = errors;  ";var d=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.createErrors=!1;var v;h.opts.allErrors&&(v=h.opts.allErrors,h.opts.allErrors=!1),n+=" "+e.validate(h)+" ",h.createErrors=!0,v&&(h.opts.allErrors=v),e.compositeRule=h.compositeRule=d,n+=" if ("+p+") {   ";var y=y||[];y.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var m=n;n=y.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h="errs__"+o,p=e.util.copy(e),d="";p.level++;var v="valid"+p.level;n+="var "+h+" = errors;var prevValid"+o+" = false;var "+l+" = false;";var y=p.baseId,m=e.compositeRule;e.compositeRule=p.compositeRule=!0;var g=a;if(g)for(var b,w=-1,_=g.length-1;w<_;)b=g[w+=1],e.util.schemaHasRules(b,e.RULES.all)?(p.schema=b,p.schemaPath=s+"["+w+"]",p.errSchemaPath=u+"/"+w,n+="  "+e.validate(p)+" ",p.baseId=y):n+=" var "+v+" = true; ",w&&(n+=" if ("+v+" && prevValid"+o+") "+l+" = false; else { ",d+="}"),n+=" if ("+v+") "+l+" = prevValid"+o+" = true;";return e.compositeRule=p.compositeRule=m,n+=d+"if (!"+l+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,l="data"+(a||""),h=e.opts.$data&&s&&s.$data;h?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s;var p=h?"(new RegExp("+n+"))":e.usePattern(s);o+="if ( ",h&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+p+".test("+l+") ) {   ";var d=d||[];d.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",o+=h?""+n:""+e.util.toQuotedString(s),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=h?"' + "+n+" + '":""+e.util.escapeQuotes(s),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+u:""+e.util.toQuotedString(s),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;return o=d.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",f&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h="errs__"+o,p=e.util.copy(e),d="";p.level++;var v="valid"+p.level,y="key"+o,m="idx"+o,g=p.dataLevel=e.dataLevel+1,b="data"+g,w="dataProperties"+o,_=Object.keys(a||{}),E=e.schema.patternProperties||{},P=Object.keys(E),x=e.schema.additionalProperties,S=_.length||P.length,O=!1===x,A="object"==typeof x&&Object.keys(x).length,k=e.opts.removeAdditional,j=O||A||k,I=e.opts.ownProperties,R=e.baseId,$=e.schema.required;if($&&(!e.opts.v5||!$.$data)&&$.length<e.opts.loopRequired)var T=e.util.toHash($);if(e.opts.patternGroups)var F=e.schema.patternGroups||{},D=Object.keys(F);if(n+="var "+h+" = errors;var "+v+" = true;",I&&(n+=" var "+w+" = undefined;"),j){if(n+=I?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+m+"=0; "+m+"<"+w+".length; "+m+"++) { var "+y+" = "+w+"["+m+"]; ":" for (var "+y+" in "+f+") { ",S){if(n+=" var isAdditional"+o+" = !(false ",_.length)if(_.length>5)n+=" || validate.schema"+s+"["+y+"] ";else{var C=_;if(C)for(var L,N=-1,M=C.length-1;N<M;)L=C[N+=1],n+=" || "+y+" == "+e.util.toQuotedString(L)+" "}if(P.length){var B=P;if(B)for(var q,U=-1,z=B.length-1;U<z;)q=B[U+=1],n+=" || "+e.usePattern(q)+".test("+y+") "}if(e.opts.patternGroups&&D.length){var V=D;if(V)for(var K,U=-1,Q=V.length-1;U<Q;)K=V[U+=1],n+=" || "+e.usePattern(K)+".test("+y+") "}n+=" ); if (isAdditional"+o+") { "}if("all"==k)n+=" delete "+f+"["+y+"]; ";else{var G=e.errorPath,Y="' + "+y+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers)),O)if(k)n+=" delete "+f+"["+y+"]; ";else{n+=" "+v+" = false; ";var H=u;u=e.errSchemaPath+"/additionalProperties";var J=J||[];J.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { additionalProperty: '"+Y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have additional properties' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var W=n;n=J.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+W+"]); ":n+=" validate.errors = ["+W+"]; return false; ":n+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=H,c&&(n+=" break; ")}else if(A)if("failing"==k){n+=" var "+h+" = errors;  ";var X=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=x,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var Z=f+"["+y+"]";p.dataPathArr[g]=y;var ee=e.validate(p);p.baseId=R,e.util.varOccurences(ee,b)<2?n+=" "+e.util.varReplace(ee,b,Z)+" ":n+=" var "+b+" = "+Z+"; "+ee+" ",n+=" if (!"+v+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+f+"["+y+"]; }  ",e.compositeRule=p.compositeRule=X}else{p.schema=x,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var Z=f+"["+y+"]";p.dataPathArr[g]=y;var ee=e.validate(p);p.baseId=R,e.util.varOccurences(ee,b)<2?n+=" "+e.util.varReplace(ee,b,Z)+" ":n+=" var "+b+" = "+Z+"; "+ee+" ",c&&(n+=" if (!"+v+") break; ")}e.errorPath=G}S&&(n+=" } "),n+=" }  ",c&&(n+=" if ("+v+") { ",d+="}")}var te=e.opts.useDefaults&&!e.compositeRule;if(_.length){var re=_;if(re)for(var L,ne=-1,oe=re.length-1;ne<oe;){L=re[ne+=1];var ie=a[L];if(e.util.schemaHasRules(ie,e.RULES.all)){var ae=e.util.getProperty(L),Z=f+ae,se=te&&void 0!==ie.default;p.schema=ie,p.schemaPath=s+ae,p.errSchemaPath=u+"/"+e.util.escapeFragment(L),p.errorPath=e.util.getPath(e.errorPath,L,e.opts.jsonPointers),p.dataPathArr[g]=e.util.toQuotedString(L);var ee=e.validate(p);if(p.baseId=R,e.util.varOccurences(ee,b)<2){ee=e.util.varReplace(ee,b,Z);var ue=Z}else{var ue=b;n+=" var "+b+" = "+Z+"; "}if(se)n+=" "+ee+" ";else{if(T&&T[L]){n+=" if ( "+ue+" === undefined ",I&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(L)+"') "),n+=") { "+v+" = false; ";var G=e.errorPath,H=u,ce=e.util.escapeQuotes(L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(G,L,e.opts.jsonPointers)),u=e.errSchemaPath+"/required";var J=J||[];J.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+ce+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ce+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var W=n;n=J.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+W+"]); ":n+=" validate.errors = ["+W+"]; return false; ":n+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=H,e.errorPath=G,n+=" } else { "}else c?(n+=" if ( "+ue+" === undefined ",I&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(L)+"') "),n+=") { "+v+" = true; } else { "):(n+=" if ("+ue+" !== undefined ",I&&(n+=" &&   Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(L)+"') "),n+=" ) { ");n+=" "+ee+" } "}}c&&(n+=" if ("+v+") { ",d+="}")}}if(P.length){var fe=P;if(fe)for(var q,le=-1,he=fe.length-1;le<he;){q=fe[le+=1];var ie=E[q];if(e.util.schemaHasRules(ie,e.RULES.all)){p.schema=ie,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(q),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(q),n+=I?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+m+"=0; "+m+"<"+w+".length; "+m+"++) { var "+y+" = "+w+"["+m+"]; ":" for (var "+y+" in "+f+") { ",n+=" if ("+e.usePattern(q)+".test("+y+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var Z=f+"["+y+"]";p.dataPathArr[g]=y;var ee=e.validate(p);p.baseId=R,e.util.varOccurences(ee,b)<2?n+=" "+e.util.varReplace(ee,b,Z)+" ":n+=" var "+b+" = "+Z+"; "+ee+" ",c&&(n+=" if (!"+v+") break; "),n+=" } ",c&&(n+=" else "+v+" = true; "),n+=" }  ",c&&(n+=" if ("+v+") { ",d+="}")}}}if(e.opts.patternGroups&&D.length){var pe=D;if(pe)for(var K,de=-1,ve=pe.length-1;de<ve;){K=pe[de+=1];var ye=F[K],ie=ye.schema;if(e.util.schemaHasRules(ie,e.RULES.all)){p.schema=ie,p.schemaPath=e.schemaPath+".patternGroups"+e.util.getProperty(K)+".schema",p.errSchemaPath=e.errSchemaPath+"/patternGroups/"+e.util.escapeFragment(K)+"/schema",n+=" var pgPropCount"+o+" = 0;  ",n+=I?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+m+"=0; "+m+"<"+w+".length; "+m+"++) { var "+y+" = "+w+"["+m+"]; ":" for (var "+y+" in "+f+") { ",n+=" if ("+e.usePattern(K)+".test("+y+")) { pgPropCount"+o+"++; ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers);var Z=f+"["+y+"]";p.dataPathArr[g]=y;var ee=e.validate(p);p.baseId=R,e.util.varOccurences(ee,b)<2?n+=" "+e.util.varReplace(ee,b,Z)+" ":n+=" var "+b+" = "+Z+"; "+ee+" ",c&&(n+=" if (!"+v+") break; "),n+=" } ",c&&(n+=" else "+v+" = true; "),n+=" }  ",c&&(n+=" if ("+v+") { ",d+="}");var me=ye.minimum,ge=ye.maximum;if(void 0!==me||void 0!==ge){n+=" var "+l+" = true; ";var H=u;if(void 0!==me){var be=me,we="minimum",_e="less";n+=" "+l+" = pgPropCount"+o+" >= "+me+"; ",u=e.errSchemaPath+"/patternGroups/minimum",n+="  if (!"+l+") {   ";var J=J||[];J.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { reason: '"+we+"', limit: "+be+", pattern: '"+e.util.escapeQuotes(K)+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have "+_e+" than "+be+' properties matching pattern "'+e.util.escapeQuotes(K)+"\"' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var W=n;n=J.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+W+"]); ":n+=" validate.errors = ["+W+"]; return false; ":n+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",void 0!==ge&&(n+=" else ")}if(void 0!==ge){var be=ge,we="maximum",_e="more";n+=" "+l+" = pgPropCount"+o+" <= "+ge+"; ",u=e.errSchemaPath+"/patternGroups/maximum",n+="  if (!"+l+") {   ";var J=J||[];J.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { reason: '"+we+"', limit: "+be+", pattern: '"+e.util.escapeQuotes(K)+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have "+_e+" than "+be+' properties matching pattern "'+e.util.escapeQuotes(K)+"\"' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var W=n;n=J.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+W+"]); ":n+=" validate.errors = ["+W+"]; return false; ":n+=" var err = "+W+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}u=H,c&&(n+=" if ("+l+") { ",d+="}")}}}}return c&&(n+=" "+d+" if ("+h+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="errs__"+o,h=e.util.copy(e);h.level++;var p="valid"+h.level;if(e.util.schemaHasRules(a,e.RULES.all)){h.schema=a,h.schemaPath=s,h.errSchemaPath=u;var d="key"+o,v="idx"+o,y="i"+o,m="' + "+d+" + '",g=h.dataLevel=e.dataLevel+1,b="data"+g,w="dataProperties"+o,_=e.opts.ownProperties,E=e.baseId;n+=" var "+l+" = errors; ",_&&(n+=" var "+w+" = undefined; "),n+=_?" "+w+" = "+w+" || Object.keys("+f+"); for (var "+v+"=0; "+v+"<"+w+".length; "+v+"++) { var "+d+" = "+w+"["+v+"]; ":" for (var "+d+" in "+f+") { ",n+=" var startErrs"+o+" = errors; ";var P=d,x=e.compositeRule;e.compositeRule=h.compositeRule=!0;var S=e.validate(h);h.baseId=E,e.util.varOccurences(S,b)<2?n+=" "+e.util.varReplace(S,b,P)+" ":n+=" var "+b+" = "+P+"; "+S+" ",e.compositeRule=h.compositeRule=x,n+=" if (!"+p+") { for (var "+y+"=startErrs"+o+"; "+y+"<errors; "+y+"++) { vErrors["+y+"].propertyName = "+d+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { propertyName: '"+m+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+m+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&c&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),c&&(n+=" break; "),n+=" } }"}return c&&(n+="  if ("+l+" == errors) {"),n=e.util.cleanUpCode(n)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",a=e.level,s=e.dataLevel,u=e.schema[t],c=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,l="data"+(s||""),h="valid"+a;if("#"==u||"#/"==u)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var p=e.resolveRef(e.baseId,u,e.isRoot);if(void 0===p){var d=e.MissingRefError.message(e.baseId,u);if("fail"==e.opts.missingRefs){console.error(d);var v=v||[];v.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),i+=" } "):i+=" {} ";var y=i;i=v.pop(),!e.compositeRule&&f?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,u,d);console.warn(d),f&&(i+=" if (true) { ")}}else if(p.inline){var m=e.util.copy(e);m.level++;var g="valid"+m.level;m.schema=p.schema,m.schemaPath="",m.errSchemaPath=u;var b=e.validate(m).replace(/validate\.schema/g,p.code);i+=" "+b+" ",f&&(i+=" if ("+g+") { ")}else n=!0===p.$async,o=p.code}if(o){var v=v||[];v.push(i),i="",e.opts.passContext?i+=" "+o+".call(this, ":i+=" "+o+"( ",i+=" "+l+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);i+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";var w=i;if(i=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");f&&(i+=" var "+h+"; "),i+=" try { "+e.yieldAwait+" "+w+"; ",f&&(i+=" "+h+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",f&&(i+=" "+h+" = false; "),i+=" } ",f&&(i+=" if ("+h+") { ")}else i+=" if (!"+w+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",f&&(i+=" else { ")}return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,f="data"+(i||""),l="valid"+o,h=e.opts.$data&&a&&a.$data;h&&(n+=" var schema"+o+" = "+e.util.getData(a.$data,i,e.dataPathArr)+"; ");var p="schema"+o;if(!h)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var d=[],v=a;if(v)for(var y,m=-1,g=v.length-1;m<g;){y=v[m+=1];var b=e.schema.properties[y];b&&e.util.schemaHasRules(b,e.RULES.all)||(d[d.length]=y)}}else var d=a;if(h||d.length){var w=e.errorPath,_=h||d.length>=e.opts.loopRequired,E=e.opts.ownProperties;if(c)if(n+=" var missing"+o+"; ",_){h||(n+=" var "+p+" = validate.schema"+s+"; ");var P="i"+o,x="schema"+o+"["+P+"]",S="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,x,e.opts.jsonPointers)),n+=" var "+l+" = true; ",h&&(n+=" if (schema"+o+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+o+")) "+l+" = false; else {"),n+=" for (var "+P+" = 0; "+P+" < "+p+".length; "+P+"++) { "+l+" = "+f+"["+p+"["+P+"]] !== undefined ",E&&(n+=" &&   Object.prototype.hasOwnProperty.call("+f+", "+p+"["+P+"]) "),n+="; if (!"+l+") break; } ",h&&(n+="  }  "),n+="  if (!"+l+") {   ";var O=O||[];O.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var A=n;n=O.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var k=d;if(k)for(var j,P=-1,I=k.length-1;P<I;){j=k[P+=1],P&&(n+=" || ");var R=e.util.getProperty(j),$=f+R;n+=" ( ( "+$+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(j)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:R)+") ) "}n+=") {  ";var x="missing"+o,S="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,x,!0):w+" + "+x);var O=O||[];O.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ";var A=n;n=O.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(_){h||(n+=" var "+p+" = validate.schema"+s+"; ");var P="i"+o,x="schema"+o+"["+P+"]",S="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,x,e.opts.jsonPointers)),h&&(n+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),n+=" for (var "+P+" = 0; "+P+" < "+p+".length; "+P+"++) { if ("+f+"["+p+"["+P+"]] === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", "+p+"["+P+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",h&&(n+="  }  ")}else{var T=d;if(T)for(var j,F=-1,D=T.length-1;F<D;){j=T[F+=1];var R=e.util.getProperty(j),S=e.util.escapeQuotes(j),$=f+R;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,j,e.opts.jsonPointers)),n+=" if ( "+$+" === undefined ",E&&(n+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+e.util.escapeQuotes(j)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+S+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else c&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,a=e.dataLevel,s=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,f=!e.opts.allErrors,l="data"+(a||""),h="valid"+i,p=e.opts.$data&&s&&s.$data;if(p?(o+=" var schema"+i+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",n="schema"+i):n=s,(s||p)&&!1!==e.opts.uniqueItems){p&&(o+=" var "+h+"; if ("+n+" === false || "+n+" === undefined) "+h+" = true; else if (typeof "+n+" != 'boolean') "+h+" = false; else { "),o+=" var "+h+" = true; if ("+l+".length > 1) { var i = "+l+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+h+" = false; break outer; } } } } ",p&&(o+="  }  "),o+=" if (!"+h+") {   ";var d=d||[];d.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=p?"validate.schema"+u:""+s,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),o+=" } "):o+=" {} ";var v=o;o=d.pop(),!e.compositeRule&&f?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",f&&(o+=" else { ")}else f&&(o+=" if (true) { ");return o}},function(e,t,r){"use strict";function n(e,t){function r(e,t,r){for(var n,i=0;i<o.length;i++){var a=o[i];if(a.type==t){n=a;break}}n||(n={type:t,rules:[]},o.push(n));var u={keyword:e,definition:r,custom:!0,code:s,implements:r.implements};n.rules.push(u),o.custom[e]=u}function n(e){if(!o.types[e])throw new Error("Unknown type "+e)}var o=this.RULES;if(o.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!a.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){if(t.macro&&void 0!==t.valid)throw new Error('"valid" option cannot be used with macro keywords');var i=t.type;if(Array.isArray(i)){var u,c=i.length;for(u=0;u<c;u++)n(i[u]);for(u=0;u<c;u++)r(e,i[u],t)}else i&&n(i),r(e,i,t);var f=!0===t.$data&&this._opts.$data;if(f&&!t.validate)throw new Error('$data support: "validate" function is not defined');var l=t.metaSchema;l&&(f&&(l={anyOf:[l,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]}),t.validateSchema=this.compile(l,!0))}o.keywords[e]=o.all[e]=!0}function o(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1}function i(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}}var a=/^[a-z_$][a-z0-9_$-]*$/i,s=r(178);e.exports={add:n,get:o,remove:i}},function(e,t,r){"use strict";e.exports=function(e){var t=e._opts.defaultMeta,r="string"==typeof t?{$ref:t}:e.getSchema("http://json-schema.org/draft-06/schema")?{$ref:"http://json-schema.org/draft-06/schema"}:{};e.addKeyword("patternGroups",{metaSchema:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{type:"integer",minimum:0},minimum:{type:"integer",minimum:0},schema:r},additionalProperties:!1}}}),e.RULES.all.properties.implements.push("patternGroups")}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#",description:"Meta-schema for $data reference (JSON-schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},function(e,t){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},function(e,t,r){(function(e,r,n,o){!function(e,r){r(t)}(0,function(t){"use strict";function i(e,t){t|=0;for(var r=Math.max(e.length-t,0),n=Array(r),o=0;o<r;o++)n[o]=e[t+o];return n}function a(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function s(e){setTimeout(e,0)}function u(e){return function(t){var r=i(arguments,1);e(function(){t.apply(null,r)})}}function c(e){return at(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}a(n)&&"function"==typeof n.then?n.then(function(e){f(r,null,e)},function(e){f(r,e.message?e:new Error(e))}):r(null,n)})}function f(e,t,r){try{e(t,r)}catch(e){ct(l,e)}}function l(e){throw e}function h(e){return ft&&"AsyncFunction"===e[Symbol.toStringTag]}function p(e){return h(e)?c(e):e}function d(e){return function(t){var r=i(arguments,1),n=at(function(r,n){var o=this;return e(t,function(e,t){p(e).apply(o,r.concat(t))},n)});return r.length?n.apply(this,r):n}}function v(e){var t=yt.call(e,gt),r=e[gt];try{e[gt]=void 0;var n=!0}catch(e){}var o=mt.call(e);return n&&(t?e[gt]=r:delete e[gt]),o}function y(e){return wt.call(e)}function m(e){return null==e?void 0===e?Et:_t:(e=Object(e),Pt&&Pt in e?v(e):y(e))}function g(e){if(!a(e))return!1;var t=m(e);return t==St||t==Ot||t==xt||t==At}function b(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=kt}function w(e){return null!=e&&b(e.length)&&!g(e)}function _(){}function E(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}function P(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function x(e){return null!=e&&"object"==typeof e}function S(e){return x(e)&&m(e)==$t}function O(){return!1}function A(e,t){return!!(t=null==t?Vt:t)&&("number"==typeof e||Kt.test(e))&&e>-1&&e%1==0&&e<t}function k(e){return x(e)&&b(e.length)&&!!Qt[m(e)]}function j(e,t){var r=Lt(e),n=!r&&Ct(e),o=!r&&!n&&zt(e),i=!r&&!n&&!o&&Zt(e),a=r||n||o||i,s=a?P(e.length,String):[],u=s.length;for(var c in e)!t&&!tr.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||A(c,u))||s.push(c);return s}function I(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||rr)}function R(e){if(!I(e))return nr(e);var t=[];for(var r in Object(e))ir.call(e,r)&&"constructor"!=r&&t.push(r);return t}function $(e){return w(e)?j(e):R(e)}function T(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function F(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function D(e){var t=$(e),r=-1,n=t.length;return function(){var o=t[++r];return r<n?{value:e[o],key:o}:null}}function C(e){if(w(e))return T(e);var t=Rt(e);return t?F(t):D(e)}function L(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function N(e){return function(t,r,n){function o(e,t){if(u-=1,e)s=!0,n(e);else{if(t===jt||s&&u<=0)return s=!0,n(null);i()}}function i(){for(;u<e&&!s;){var t=a();if(null===t)return s=!0,void(u<=0&&n(null));u+=1,r(t.value,t.key,L(o))}}if(n=E(n||_),e<=0||!t)return n(null);var a=C(t),s=!1,u=0;i()}}function M(e,t,r,n){N(t)(e,p(r),n)}function B(e,t){return function(r,n,o){return e(r,t,n,o)}}function q(e,t,r){function n(e,t){e?r(e):++i!==a&&t!==jt||r(null)}r=E(r||_);var o=0,i=0,a=e.length;for(0===a&&r(null);o<a;o++)t(e[o],o,L(n))}function U(e){return function(t,r,n){return e(sr,t,p(r),n)}}function z(e,t,r,n){n=n||_,t=t||[];var o=[],i=0,a=p(r);e(t,function(e,t,r){var n=i++;a(e,function(e,t){o[n]=t,r(e)})},function(e){n(e,o)})}function V(e){return function(t,r,n,o){return e(N(r),t,p(n),o)}}function K(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Q(e,t){return e&&dr(e,t,$)}function G(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Y(e){return e!==e}function H(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function J(e,t,r){return t===t?H(e,t,r):G(e,Y,r)}function W(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function X(e){return"symbol"==typeof e||x(e)&&m(e)==yr}function Z(e){if("string"==typeof e)return e;if(Lt(e))return W(e,Z)+"";if(X(e))return br?br.call(e):"";var t=e+"";return"0"==t&&1/e==-mr?"-0":t}function ee(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}function te(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ee(e,t,r)}function re(e,t){for(var r=e.length;r--&&J(t,e[r],0)>-1;);return r}function ne(e,t){for(var r=-1,n=e.length;++r<n&&J(t,e[r],0)>-1;);return r}function oe(e){return e.split("")}function ie(e){return wr.test(e)}function ae(e){return e.match($r)||[]}function se(e){return ie(e)?ae(e):oe(e)}function ue(e){return null==e?"":Z(e)}function ce(e,t,r){if((e=ue(e))&&(r||void 0===t))return e.replace(Tr,"");if(!e||!(t=Z(t)))return e;var n=se(e),o=se(t);return te(n,ne(n,o),re(n,o)+1).join("")}function fe(e){return e=e.toString().replace(Lr,""),e=e.match(Fr)[2].replace(" ",""),e=e?e.split(Dr):[],e=e.map(function(e){return ce(e.replace(Cr,""))})}function le(e,t){var r={};Q(e,function(e,t){function n(t,r){var n=W(o,function(e){return t[e]});n.push(r),p(e).apply(null,n)}var o,i=h(e),a=!i&&1===e.length||i&&0===e.length;if(Lt(e))o=e.slice(0,-1),e=e[e.length-1],r[t]=o.concat(o.length>0?n:e);else if(a)r[t]=e;else{if(o=fe(e),0===e.length&&!i&&0===o.length)throw new Error("autoInject task functions require explicit parameters.");i||o.pop(),r[t]=o.concat(n)}}),vr(r,t)}function he(){this.head=this.tail=null,this.length=0}function pe(e,t){e.length=1,e.head=e.tail=t}function de(e,t,r){function n(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(c.started=!0,Lt(e)||(e=[e]),0===e.length&&c.idle())return ct(function(){c.drain()});for(var n=0,o=e.length;n<o;n++){var i={data:e[n],callback:r||_};t?c._tasks.unshift(i):c._tasks.push(i)}ct(c.process)}function o(e){return function(t){a-=1;for(var r=0,n=e.length;r<n;r++){var o=e[r],i=J(s,o,0);i>=0&&s.splice(i,1),o.callback.apply(o,arguments),null!=t&&c.error(t,o.data)}a<=c.concurrency-c.buffer&&c.unsaturated(),c.idle()&&c.drain(),c.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=p(e),a=0,s=[],u=!1,c={_tasks:new he,concurrency:t,payload:r,saturated:_,unsaturated:_,buffer:t/4,empty:_,drain:_,error:_,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){c.drain=_,c._tasks.empty()},unshift:function(e,t){n(e,!0,t)},remove:function(e){c._tasks.remove(e)},process:function(){if(!u){for(u=!0;!c.paused&&a<c.concurrency&&c._tasks.length;){var e=[],t=[],r=c._tasks.length;c.payload&&(r=Math.min(r,c.payload));for(var n=0;n<r;n++){var f=c._tasks.shift();e.push(f),s.push(f),t.push(f.data)}a+=1,0===c._tasks.length&&c.empty(),a===c.concurrency&&c.saturated();var l=L(o(e));i(t,l)}u=!1}},length:function(){return c._tasks.length},running:function(){return a},workersList:function(){return s},idle:function(){return c._tasks.length+a===0},pause:function(){c.paused=!0},resume:function(){!1!==c.paused&&(c.paused=!1,ct(c.process))}};return c}function ve(e,t){return de(e,1,t)}function ye(e,t,r,n){n=E(n||_);var o=p(r);Mr(e,function(e,r,n){o(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})}function me(){var e=W(arguments,p);return function(){var t=i(arguments),r=this,n=t[t.length-1];"function"==typeof n?t.pop():n=_,ye(e,t,function(e,t,n){t.apply(r,e.concat(function(e){var t=i(arguments,1);n(e,t)}))},function(e,t){n.apply(r,[e].concat(t))})}}function ge(e){return e}function be(e,t){return function(r,n,o,i){i=i||_;var a,s=!1;r(n,function(r,n,i){o(r,function(n,o){n?i(n):e(o)&&!a?(s=!0,a=t(!0,r),i(null,jt)):i()})},function(e){e?i(e):i(null,s?a:t(!1))})}}function we(e,t){return t}function _e(e){return function(t){var r=i(arguments,1);r.push(function(t){var r=i(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&K(r,function(t){console[e](t)}))}),p(t).apply(null,r)}}function Ee(e,t,r){function n(e){if(e)return r(e);var t=i(arguments,1);t.push(o),s.apply(this,t)}function o(e,t){return e?r(e):t?void a(n):r(null)}r=L(r||_);var a=p(e),s=p(t);o(null,!0)}function Pe(e,t,r){r=L(r||_);var n=p(e),o=function(e){if(e)return r(e);var a=i(arguments,1);return t.apply(this,a)?n(o):void r.apply(null,[null].concat(a))};n(o)}function xe(e,t,r){Pe(e,function(){return!t.apply(this,arguments)},r)}function Se(e,t,r){function n(e){return e?r(e):void a(o)}function o(e,t){return e?r(e):t?void i(n):r(null)}r=L(r||_);var i=p(t),a=p(e);a(o)}function Oe(e){return function(t,r,n){return e(t,n)}}function Ae(e,t,r){sr(e,Oe(p(t)),r)}function ke(e,t,r,n){N(t)(e,Oe(p(r)),n)}function je(e){return h(e)?e:at(function(t,r){var n=!0;t.push(function(){var e=arguments;n?ct(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function Ie(e){return!e}function Re(e){return function(t){return null==t?void 0:t[e]}}function $e(e,t,r,n){var o=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){o[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],i=0;i<t.length;i++)o[i]&&r.push(t[i]);n(null,r)})}function Te(e,t,r,n){var o=[];e(t,function(e,t,n){r(e,function(r,i){r?n(r):(i&&o.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,W(o.sort(function(e,t){return e.index-t.index}),Re("value")))})}function Fe(e,t,r,n){(w(t)?$e:Te)(e,t,p(r),n||_)}function De(e,t){function r(e){return e?n(e):void o(r)}var n=L(t||_),o=p(je(e));r()}function Ce(e,t,r,n){n=E(n||_);var o={},i=p(r);M(e,t,function(e,t,r){i(e,t,function(e,n){return e?r(e):(o[t]=n,void r())})},function(e){n(e,o)})}function Le(e,t){return t in e}function Ne(e,t){var r=Object.create(null),n=Object.create(null);t=t||ge;var o=p(e),a=at(function(e,a){var s=t.apply(null,e);Le(r,s)?ct(function(){a.apply(null,r[s])}):Le(n,s)?n[s].push(a):(n[s]=[a],o.apply(null,e.concat(function(){var e=i(arguments);r[s]=e;var t=n[s];delete n[s];for(var o=0,a=t.length;o<a;o++)t[o].apply(null,e)})))});return a.memo=r,a.unmemoized=e,a}function Me(e,t,r){r=r||_;var n=w(t)?[]:{};e(t,function(e,t,r){p(e)(function(e,o){arguments.length>2&&(o=i(arguments,1)),n[t]=o,r(e)})},function(e){r(e,n)})}function Be(e,t){Me(sr,e,t)}function qe(e,t,r){Me(N(t),e,r)}function Ue(e,t){if(t=E(t||_),!Lt(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)p(e[r])(t)}function ze(e,t,r,n){ye(i(e).reverse(),t,r,n)}function Ve(e){var t=p(e);return at(function(e,r){return e.push(function(e,t){if(e)r(null,{error:e});else{var n;n=arguments.length<=2?t:i(arguments,1),r(null,{value:n})}}),t.apply(this,e)})}function Ke(e,t,r,n){Fe(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},n)}function Qe(e){var t;return Lt(e)?t=W(e,Ve):(t={},Q(e,function(e,r){t[r]=Ve.call(this,e)})),t}function Ge(e){return function(){return e}}function Ye(e,t,r){function n(){s(function(e){e&&u++<a.times&&("function"!=typeof a.errorFilter||a.errorFilter(e))?setTimeout(n,a.intervalFunc(u)):r.apply(null,arguments)})}var o=5,i=0,a={times:o,intervalFunc:Ge(i)};if(arguments.length<3&&"function"==typeof e?(r=t||_,t=e):(function(e,t){if("object"==typeof t)e.times=+t.times||o,e.intervalFunc="function"==typeof t.interval?t.interval:Ge(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||o}}(a,e),r=r||_),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=p(t),u=1;n()}function He(e,t){Me(Mr,e,t)}function Je(e,t,r){function n(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}var o=p(t);ur(e,function(e,t){o(e,function(r,n){return r?t(r):void t(null,{value:e,criteria:n})})},function(e,t){return e?r(e):void r(null,W(t.sort(n),Re("value")))})}function We(e,t,r){var n=p(e);return at(function(o,i){function a(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),u=!0,i(n)}var s,u=!1;o.push(function(){u||(i.apply(null,arguments),clearTimeout(s))}),s=setTimeout(a,t),n.apply(null,o)})}function Xe(e,t,r,n){for(var o=-1,i=_n(wn((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a}function Ze(e,t,r,n){var o=p(r);fr(Xe(0,e,1),t,o,n)}function et(e,t,r,n){arguments.length<=3&&(n=r,r=t,t=Lt(e)?[]:{}),n=E(n||_);var o=p(r);sr(e,function(e,r,n){o(t,e,r,n)},function(e){n(e,t)})}function tt(e,t){var r,n=null;t=t||_,Jr(e,function(e,t){p(e)(function(e,o){r=arguments.length>2?i(arguments,1):o,n=e,t(!e)})},function(){t(n,r)})}function rt(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function nt(e,t,r){r=L(r||_);var n=p(t);if(!e())return r(null);var o=function(t){if(t)return r(t);if(e())return n(o);var a=i(arguments,1);r.apply(null,[null].concat(a))};n(o)}function ot(e,t,r){nt(function(){return!e.apply(this,arguments)},t,r)}var it,at=function(e){return function(){var t=i(arguments),r=t.pop();e.call(this,t,r)}},st="function"==typeof e&&e,ut="object"==typeof r&&"function"==typeof r.nextTick;it=st?e:ut?r.nextTick:s;var ct=u(it),ft="function"==typeof Symbol,lt="object"==typeof n&&n&&n.Object===Object&&n,ht="object"==typeof self&&self&&self.Object===Object&&self,pt=lt||ht||Function("return this")(),dt=pt.Symbol,vt=Object.prototype,yt=vt.hasOwnProperty,mt=vt.toString,gt=dt?dt.toStringTag:void 0,bt=Object.prototype,wt=bt.toString,_t="[object Null]",Et="[object Undefined]",Pt=dt?dt.toStringTag:void 0,xt="[object AsyncFunction]",St="[object Function]",Ot="[object GeneratorFunction]",At="[object Proxy]",kt=9007199254740991,jt={},It="function"==typeof Symbol&&Symbol.iterator,Rt=function(e){return It&&e[It]&&e[It]()},$t="[object Arguments]",Tt=Object.prototype,Ft=Tt.hasOwnProperty,Dt=Tt.propertyIsEnumerable,Ct=S(function(){return arguments}())?S:function(e){return x(e)&&Ft.call(e,"callee")&&!Dt.call(e,"callee")},Lt=Array.isArray,Nt="object"==typeof t&&t&&!t.nodeType&&t,Mt=Nt&&"object"==typeof o&&o&&!o.nodeType&&o,Bt=Mt&&Mt.exports===Nt,qt=Bt?pt.Buffer:void 0,Ut=qt?qt.isBuffer:void 0,zt=Ut||O,Vt=9007199254740991,Kt=/^(?:0|[1-9]\d*)$/,Qt={};Qt["[object Float32Array]"]=Qt["[object Float64Array]"]=Qt["[object Int8Array]"]=Qt["[object Int16Array]"]=Qt["[object Int32Array]"]=Qt["[object Uint8Array]"]=Qt["[object Uint8ClampedArray]"]=Qt["[object Uint16Array]"]=Qt["[object Uint32Array]"]=!0,Qt["[object Arguments]"]=Qt["[object Array]"]=Qt["[object ArrayBuffer]"]=Qt["[object Boolean]"]=Qt["[object DataView]"]=Qt["[object Date]"]=Qt["[object Error]"]=Qt["[object Function]"]=Qt["[object Map]"]=Qt["[object Number]"]=Qt["[object Object]"]=Qt["[object RegExp]"]=Qt["[object Set]"]=Qt["[object String]"]=Qt["[object WeakMap]"]=!1;var Gt="object"==typeof t&&t&&!t.nodeType&&t,Yt=Gt&&"object"==typeof o&&o&&!o.nodeType&&o,Ht=Yt&&Yt.exports===Gt,Jt=Ht&&lt.process,Wt=function(){try{return Jt&&Jt.binding("util")}catch(e){}}(),Xt=Wt&&Wt.isTypedArray,Zt=Xt?function(e){return function(t){return e(t)}}(Xt):k,er=Object.prototype,tr=er.hasOwnProperty,rr=Object.prototype,nr=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),or=Object.prototype,ir=or.hasOwnProperty,ar=B(M,1/0),sr=function(e,t,r){(w(e)?q:ar)(e,p(t),r)},ur=U(z),cr=d(ur),fr=V(z),lr=B(fr,1),hr=d(lr),pr=function(e){var t=i(arguments,1);return function(){var r=i(arguments);return e.apply(null,t.concat(r))}},dr=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===r(i[u],u,i))break}return t}}(),vr=function(e,t,r){function n(e,t){m.push(function(){u(e,t)})}function o(){if(0===m.length&&0===d)return r(null,h);for(;m.length&&d<t;){m.shift()()}}function a(e,t){var r=y[e];r||(r=y[e]=[]),r.push(t)}function s(e){K(y[e]||[],function(e){e()}),o()}function u(e,t){if(!v){var n=L(function(t,n){if(d--,arguments.length>2&&(n=i(arguments,1)),t){var o={};Q(h,function(e,t){o[t]=e}),o[e]=n,v=!0,y=Object.create(null),r(t,o)}else h[e]=n,s(e)});d++;var o=p(t[t.length-1]);t.length>1?o(h,n):o(n)}}function c(t){var r=[];return Q(e,function(e,n){Lt(e)&&J(e,t,0)>=0&&r.push(n)}),r}"function"==typeof t&&(r=t,t=null),r=E(r||_);var f=$(e),l=f.length;if(!l)return r(null);t||(t=l);var h={},d=0,v=!1,y=Object.create(null),m=[],g=[],b={};Q(e,function(t,r){if(!Lt(t))return n(r,[t]),void g.push(r);var o=t.slice(0,t.length-1),i=o.length;return 0===i?(n(r,t),void g.push(r)):(b[r]=i,void K(o,function(s){if(!e[s])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+s+"` in "+o.join(", "));a(s,function(){0===--i&&n(r,t)})}))}),function(){for(var e,t=0;g.length;)e=g.pop(),t++,K(c(e),function(e){0==--b[e]&&g.push(e)});if(t!==l)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),o()},yr="[object Symbol]",mr=1/0,gr=dt?dt.prototype:void 0,br=gr?gr.toString:void 0,wr=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),_r="\\ud800-\\udfff",Er="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Pr="\\ud83c[\\udffb-\\udfff]",xr="[^"+_r+"]",Sr="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",Ar="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",kr="[\\ufe0e\\ufe0f]?",jr="(?:\\u200d(?:"+[xr,Sr,Or].join("|")+")"+kr+Ar+")*",Ir=kr+Ar+jr,Rr="(?:"+[xr+Er+"?",Er,Sr,Or,"[\\ud800-\\udfff]"].join("|")+")",$r=RegExp(Pr+"(?="+Pr+")|"+Rr+Ir,"g"),Tr=/^\s+|\s+$/g,Fr=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Dr=/,/,Cr=/(=.+)?(\s*)$/,Lr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;he.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},he.prototype.empty=function(){for(;this.head;)this.shift();return this},he.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},he.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},he.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):pe(this,e)},he.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):pe(this,e)},he.prototype.shift=function(){return this.head&&this.removeLink(this.head)},he.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},he.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,r=0;r<this.length;r++)e[r]=t.data,t=t.next;return e},he.prototype.remove=function(e){for(var t=this.head;t;){var r=t.next;e(t)&&this.removeLink(t),t=r}return this};var Nr,Mr=B(M,1),Br=function(){return me.apply(null,i(arguments).reverse())},qr=Array.prototype.concat,Ur=function(e,t,r,n){n=n||_;var o=p(r);fr(e,t,function(e,t){o(e,function(e){return e?t(e):t(null,i(arguments,1))})},function(e,t){for(var r=[],o=0;o<t.length;o++)t[o]&&(r=qr.apply(r,t[o]));return n(e,r)})},zr=B(Ur,1/0),Vr=B(Ur,1),Kr=function(){var e=i(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}},Qr=U(be(ge,we)),Gr=V(be(ge,we)),Yr=B(Gr,1),Hr=_e("dir"),Jr=B(ke,1),Wr=U(be(Ie,Ie)),Xr=V(be(Ie,Ie)),Zr=B(Xr,1),en=U(Fe),tn=V(Fe),rn=B(tn,1),nn=function(e,t,r,n){n=n||_;var o=p(r);fr(e,t,function(e,t){o(e,function(r,n){return r?t(r):t(null,{key:n,val:e})})},function(e,t){for(var r={},o=Object.prototype.hasOwnProperty,i=0;i<t.length;i++)if(t[i]){var a=t[i].key,s=t[i].val;o.call(r,a)?r[a].push(s):r[a]=[s]}return n(e,r)})},on=B(nn,1/0),an=B(nn,1),sn=_e("log"),un=B(Ce,1/0),cn=B(Ce,1);Nr=ut?r.nextTick:st?e:s;var fn=u(Nr),ln=function(e,t){var r=p(e);return de(function(e,t){r(e[0],t)},t,1)},hn=function(e,t){var r=ln(e,t);return r.push=function(e,t,n){if(null==n&&(n=_),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,Lt(e)||(e=[e]),0===e.length)return ct(function(){r.drain()});t=t||0;for(var o=r._tasks.head;o&&t>=o.priority;)o=o.next;for(var i=0,a=e.length;i<a;i++){var s={data:e[i],priority:t,callback:n};o?r._tasks.insertBefore(o,s):r._tasks.push(s)}ct(r.process)},delete r.unshift,r},pn=U(Ke),dn=V(Ke),vn=B(dn,1),yn=function(e,t){t||(t=e,e=null);var r=p(t);return at(function(t,n){function o(e){r.apply(null,t.concat(e))}e?Ye(e,o,n):Ye(o,n)})},mn=U(be(Boolean,ge)),gn=V(be(Boolean,ge)),bn=B(gn,1),wn=Math.ceil,_n=Math.max,En=B(Ze,1/0),Pn=B(Ze,1),xn=function(e,t){function r(t){var r=p(e[o++]);t.push(L(n)),r.apply(null,t)}function n(n){return n||o===e.length?t.apply(null,arguments):void r(i(arguments,1))}if(t=E(t||_),!Lt(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var o=0;r([])},Sn={applyEach:cr,applyEachSeries:hr,apply:pr,asyncify:c,auto:vr,autoInject:le,cargo:ve,compose:Br,concat:zr,concatLimit:Ur,concatSeries:Vr,constant:Kr,detect:Qr,detectLimit:Gr,detectSeries:Yr,dir:Hr,doDuring:Ee,doUntil:xe,doWhilst:Pe,during:Se,each:Ae,eachLimit:ke,eachOf:sr,eachOfLimit:M,eachOfSeries:Mr,eachSeries:Jr,ensureAsync:je,every:Wr,everyLimit:Xr,everySeries:Zr,filter:en,filterLimit:tn,filterSeries:rn,forever:De,groupBy:on,groupByLimit:nn,groupBySeries:an,log:sn,map:ur,mapLimit:fr,mapSeries:lr,mapValues:un,mapValuesLimit:Ce,mapValuesSeries:cn,memoize:Ne,nextTick:fn,parallel:Be,parallelLimit:qe,priorityQueue:hn,queue:ln,race:Ue,reduce:ye,reduceRight:ze,reflect:Ve,reflectAll:Qe,reject:pn,rejectLimit:dn,rejectSeries:vn,retry:Ye,retryable:yn,seq:me,series:He,setImmediate:ct,some:mn,someLimit:gn,someSeries:bn,sortBy:Je,timeout:We,times:En,timesLimit:Ze,timesSeries:Pn,transform:et,tryEach:tt,unmemoize:rt,until:ot,waterfall:xn,whilst:nt,all:Wr,any:mn,forEach:Ae,forEachSeries:Jr,forEachLimit:ke,forEachOf:sr,forEachOfSeries:Mr,forEachOfLimit:M,inject:ye,foldl:ye,foldr:ze,select:en,selectLimit:tn,selectSeries:rn,wrapSync:c};t.default=Sn,t.applyEach=cr,t.applyEachSeries=hr,t.apply=pr,t.asyncify=c,t.auto=vr,t.autoInject=le,t.cargo=ve,t.compose=Br,t.concat=zr,t.concatLimit=Ur,t.concatSeries=Vr,t.constant=Kr,t.detect=Qr,t.detectLimit=Gr,t.detectSeries=Yr,t.dir=Hr,t.doDuring=Ee,t.doUntil=xe,t.doWhilst=Pe,t.during=Se,t.each=Ae,t.eachLimit=ke,t.eachOf=sr,t.eachOfLimit=M,t.eachOfSeries=Mr,t.eachSeries=Jr,t.ensureAsync=je,t.every=Wr,t.everyLimit=Xr,t.everySeries=Zr,t.filter=en,t.filterLimit=tn,t.filterSeries=rn,t.forever=De,t.groupBy=on,t.groupByLimit=nn,t.groupBySeries=an,t.log=sn,t.map=ur,t.mapLimit=fr,t.mapSeries=lr,t.mapValues=un,t.mapValuesLimit=Ce,t.mapValuesSeries=cn,t.memoize=Ne,t.nextTick=fn,t.parallel=Be,t.parallelLimit=qe,t.priorityQueue=hn,t.queue=ln,t.race=Ue,t.reduce=ye,t.reduceRight=ze,t.reflect=Ve,t.reflectAll=Qe,t.reject=pn,t.rejectLimit=dn,t.rejectSeries=vn,t.retry=Ye,t.retryable=yn,t.seq=me,t.series=He,t.setImmediate=ct,t.some=mn,t.someLimit=gn,t.someSeries=bn,t.sortBy=Je,t.timeout=We,t.times=En,t.timesLimit=Ze,t.timesSeries=Pn,t.transform=et,t.tryEach=tt,t.unmemoize=rt,t.until=ot,t.waterfall=xn,t.whilst=nt,t.all=Wr,t.allLimit=Xr,t.allSeries=Zr,t.any=mn,t.anyLimit=gn,t.anySeries=bn,t.find=Qr,t.findLimit=Gr,t.findSeries=Yr,t.forEach=Ae,t.forEachSeries=Jr,t.forEachLimit=ke,t.forEachOf=sr,t.forEachOfSeries=Mr,t.forEachOfLimit=M,t.inject=ye,t.foldl=ye,t.foldr=ze,t.select=en,t.selectLimit=tn,t.selectSeries=rn,t.wrapSync=c,Object.defineProperty(t,"__esModule",{value:!0})})}).call(t,r(120).setImmediate,r(76),r(27),r(121)(e))},function(e,t,r){"use strict";var n=r(34),o=function(e){return e&&e.__esModule?e:{default:e}}(n);e.exports={badSlug:function(e){var t=new Error("Slug Bad: "+(0,o.default)(e));return t.code=400,t},annotationDeleted:function(e,t){var r=new Error("Annotation was deleted: "+(0,o.default)({id:e,date:t}));return r.code=410,r},annotationNotFound:function(e){var t=new Error("Annotation not found in store: "+(0,o.default)(e));return t.code=404,t},replyNotFound:function(e){var t=new Error("Reply not found in store: "+(0,o.default)(e));return t.code=404,t},revisionNotFound:function(e,t){var r=new Error("No revision '"+t+"' for annotation '"+e+"'");return r.code=404,r},readonlyValue:function(e,t,r,n){var i=new Error("Client must not change the '"+t+"' of annotation '"+e+"' from \n"+(0,o.default)(r)+" to "+(0,o.default)(n));return i.code=409,i},invalidAnnotation:function(e,t){var r=new Error("Annotation is invalid: "+(0,o.default)({anno:e,errors:t},null,2));return r.validationErrors=t,r.code=415,r},mismatch:function(e,t,r){var n=new Error("Mismatch: "+e+"\n\tExpected: '"+t+"'\n\tActual: "+r);return n.code=412,n.ctx={expected:t,actual:r},n},forbidden:function(e,t){var r=new Error("ACL forbids it: "+e);return r.code=403,r.ctx=t,r},badRequest:function(e,t){var r=new Error("[Bad request] "+e+": "+(t?(0,o.default)(t,null,2):""));return r.code=400,r.ctx={errors:t},r},fileNotFound:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=new Error("[File not found] "+e+": "+(t?(0,o.default)(t,null,2):""));return r.code=500,r.ctx={error:t},r},notImplemented:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=new Error("[Not Implemented] "+e+": "+(t?(0,o.default)(t,null,2):""));return r.code=500,r.ctx={error:t},r}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return JSON.parse(c.render((0,u.default)(e),t))}var i=r(58),a=n(i),s=r(34),u=n(s),c=r(265),f=r(93),l=f.envyConf,h=r(166)({allErrors:!0,errorDataPath:!0}),p={CONTEXT_URL:"https://kba.github.io/anno/context.jsonld",OPENAPI_HOST:"localhost:3000",OPENAPI_BASEPATH:"/",OPENAPI_PATH:"anno"},d=r(124),v=r(123),y=r(125);y.definitions=d.definitions,e.exports={get openapi(){return o(y,l("ANNO",p))},definitions:d.definitions,get jsonldContext(){return o(v,l("ANNO",p))},contentType:{anno:'application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"',annox:'application/ld+json;profile="http://www.w3.org/ns/anno.jsonld"'},validate:{}},(0,a.default)(d.definitions).forEach(function(t){var r=JSON.parse((0,u.default)(d.definitions[t]));r.definitions=JSON.parse((0,u.default)(d.definitions)),e.exports.validate[t]=h.compile(r)})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(94),i=n(o),a=r(35),s=n(a),u=r(58),c=n(u),f=r(209),l=n(f),h=r(34),p=n(h),d=r(203),v=n(d),y=r(96),m=n(y),g=r(59),b=n(g),w=r(60),_=n(w),E=r(98),P=n(E),x=r(97),S=n(x),O=r(200),A=r(198),k=r(197),j=r(92),I=j.splitIdRepliesRev,R=j.truthy,$=function(e){function t(){var e;(0,b.default)(this,t);for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return(0,P.default)(this,(e=t.__proto__||(0,m.default)(t)).call.apply(e,[this].concat(n)))}return(0,S.default)(t,e),(0,_.default)(t,[{key:"_wipe",value:function(e,t){if("function"==typeof e){var r=[e,{}];r[0],e=r[1]}throw new Error("Must override '_wipe'")}},{key:"_disconnect",value:function(e,t){if("function"==typeof e){var r=[e,{}];t=r[0],e=r[1]}return t()}},{key:"_get",value:function(e,t){var r=this,n=this._idFromURL(e.annoId),o=this._projectionFromOptions(e),i=I(n),a=i._id,s=i._replyids,u=i._revid,c={_id:a};this.db.findOne(c,o,function(o,i){if(!i)return t(k.annotationNotFound({annoId:n,_id:a,_replyids:s,_revid:u}));if(i.deleted)return t(k.annotationDeleted(n,i.deleted));var c=!0,f=!1,l=void 0;try{for(var h,p=(0,v.default)(s);!(c=(h=p.next()).done);c=!0){var d=h.value;if(!(i=i._replies[d-1]))return t(k.replyNotFound(n))}}catch(o){f=!0,l=o}finally{try{!c&&p.return&&p.return()}finally{if(f)throw l}}if(Array.isArray(i._revisions)){var y=u?i._revisions[u-1]:i._revisions[i._revisions.length-1];if(!y)return t(k.revisionNotFound(a,u));e.latest&&(n=a+"~"+i._revisions.length,i=y)}else console.error("BAD ANNOTATION IN STORE",n);return s.length&&(i.replyTo=r._urlFromId(""+a+s.map(function(e){return"."+e}).join(""))),u&&(i.versionOf=r._urlFromId(a)),t(null,r._toJSONLD(n,i,e))})}},{key:"_create",value:function(e,t){var r=this,n=JSON.parse((0,p.default)(e.anno));n=this._deleteId(n),n=this._normalizeType(n),n._replies=[],n._revisions=[JSON.parse((0,p.default)(n))];var o=n.created||(new Date).toISOString();n.modified=o,n.created=o,n._revisions[0].created=o,n.replyTo?this._createReply(n,e,t):e.slug?(n._id=e.slug,this.db.count({_id:n._id},function(o,i){i>0&&(console.log(t(k.badSlug(e.slug))),n._id+="_"+r._genid()),r._createInsert(n,e,t)})):(n._id=this._genid(),this._createInsert(n,e,t))}},{key:"_createInsert",value:function(e,t,r){var n=this,o=A.validate.Annotation;if(!o(e))return r(k.invalidAnnotation(e,o.errors));t.collection&&(e.collection=t.collection),this.db.insert(e,function(e,o){return e?r(e):"insertedIds"in o?n.get(o.insertedIds[0],t,r):n.get(o._id,t,r)})}},{key:"_createReply",value:function(e,t,r){var n=this,o=A.validate.Annotation;if(!o(e))return r(k.invalidAnnotation(e,o.errors));var i=I(this._idFromURL(e.replyTo)),a=i._id,s=i._replyids;this.db.findOne({_id:a},function(o,i){if(o)return r(o);if(!i)return r(k.annotationNotFound(e.replyTo));var u="",c=i;s.length>0&&s.forEach(function(e){u+="_replies."+(e-1)+".",c=c._replies[e-1]});var f=n._idFromURL(e.replyTo+"."+(c._replies.length+1));console.log("CREATEREPLY",(0,p.default)({replyFullId:f,anno:e},null,2)),n.db.update({_id:a},{$push:(0,l.default)({},u+"_replies",e)},function(e,o){return e?r(e):(t.latest=!0,delete t.annoId,delete t.anno,n.get(f,t,r))})})}},{key:"_import",value:function(e,t){var r=this,n=e.anno;n=function e(t){t=r._normalizeType(t);var n={};if((0,c.default)(t).forEach(function(r){"hasVersion"==r?(n._revisions=t[r].map(e),delete t[r]):"hasReply"==r?(n._replies=t[r].map(e),delete t[r]):n[r]=t[r]}),!n._revisions){var o=JSON.parse((0,p.default)(n));delete o._replies,delete o.id,n._revisions=[o]}return n._replies=n._replies||[],n}(n),e.slug?this.db.remove({_id:e.slug},e,function(o){n._id=e.slug,r._createInsert(n,e,t)}):(n._id=this._genid(),this._createInsert(n,e,t))}},{key:"_revise",value:function(e,t){var r=this,n=this._idFromURL(e.annoId),o=e.anno,i=I(n),a=i._id,s=i._replyids;this.db.findOne({_id:a},function(n,i){if(n)return t(n);if(!i)return t(k.annotationNotFound(a));for(var u=["canonical","via","hasReply","replyTo","hasVersion","versionOf"],f=0;f<u.length;f++){var h=u[f];o[h]&&(o[h],i[h])}var d=JSON.parse((0,p.default)(o));d.created=(new Date).toISOString(),delete d.modified,delete d.creator,r._deleteId(d),r._normalizeType(d);var v=A.validate.Annotation;if(!v(d))return t(k.invalidAnnotation(o,v.errors));var y=JSON.parse((0,p.default)(d));y.modified=d.created;var m=void 0;if(s.length>0){var g=s.map(function(e){return"_replies."+(e-1)}).join("."),b={};(0,c.default)(y).forEach(function(e){return b[g+"."+e]=y[e]}),m=[{$set:b},{$push:(0,l.default)({},g+"._revisions",d)}]}else delete y.created,m=[{$set:y},{$push:{_revisions:d}}];r.db.update({_id:a},m[0],{},function(n,o){if(n)return t(n);r.db.update({_id:a},m[1],{},function(n,o){return n?t(n):(e.latest=!0,delete e.anno,r.get(a,e,t))})})})}},{key:"_delete",value:function(e,t){var r=I(this._idFromURL(e.annoId)),n=r._id,o=r._replyids;e.forceDelete&&(console.log("FORCE DELETE",e),this.db.remove({_id:n},function(e,r){return e?t(e):t()}));var i="",a=!0,s=!1,u=void 0;try{for(var c,f=(0,v.default)(o);!(a=(c=f.next()).done);a=!0){i+="_replies."+(c.value-1)+"."}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}i+="deleted",this.db.update({_id:n},{$set:(0,l.default)({},i,new Date)},function(e,r){return e?t(e):t()})}},{key:"_search",value:function(e,t){var r=this,n=e.query,o=R(n.$regex);delete n.$regex;var i=R(n.$nested);if(R(n.includeDeleted)||(n.deleted={$exists:!1}),delete n.includeDeleted,"$target"in n){var a=o?{$regex:n.$target}:n.$target;n.$or=[{target:a},{"target.id":a},{"target.scope":a},{"target.source":a}],delete n.$target}if(o&&(0,c.default)(n).forEach(function(e){"string"==typeof n[e]&&(n[e]={$regex:n[e]})}),i){n.$or||(n.$or=[]);for(var s=0;s<20;s++){var u={};for(var f in n)u["_reply."+s+"."+f]=JSON.parse((0,p.default)(n[f]));n.$or.push(u)}}var l=this._projectionFromOptions(e);this.db.find(n,l,function(n,o){return n?t(n):(void 0===o&&(o=[]),e.skipContext=!0,Array.isArray(o)?t(null,o.map(function(t){return r._toJSONLD(t._id,t,e)})):void o.toArray(function(n,o){return n?t(n):t(null,o.map(function(t){return r._toJSONLD(t._id,t,e)}))}))})}},{key:"_toJSONLD",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===(void 0===e?"undefined":(0,s.default)(e))){var a=[e._id,e];e=a[0],t=a[1]}var u=(0,i.default)({},o);return n.skipContext||(u["@context"]="http://www.w3.org/ns/anno.jsonld"),u.id=this._urlFromId(e),u.type="Annotation",n.skipContext=!0,(0,c.default)(t).forEach(function(o){if("_revisions"!==o||e.match(/~\d$/))if("_replies"===o){if(t._replies.length>0&&!n.skipReplies){var i=0;u.hasReply=t._replies.map(function(t){var o=r._toJSONLD(e+"."+ ++i,t,n);return o.replyTo=u.id,o}).filter(function(e){return!e.deleted})}}else o.match(/^_/)||o in u||(u[o]=t[o]);else if(t._revisions.length>0&&!n.skipVersions){var a=0;u.hasVersion=t._revisions.map(function(t){return r._toJSONLD(e+"~"+ ++a,t,n,{versionOf:u.id})})}}),u}},{key:"_projectionFromOptions",value:function(e){var t={};if(e.metadataOnly){(0,i.default)(t,{body:!1,target:!1});for(var r=0;r<20;r++)t["_revisions."+r+".body"]=!1,t["_revisions."+r+".target"]=!1,t["_replies."+r+".body"]=!1,t["_replies."+r+".target"]=!1}return t}}]),t}(O);e.exports=$},function(e,t,r){"use strict";(function(t){function n(e){return e&&e.__esModule?e:{default:e}}var o=r(206),i=n(o),a=r(34),s=n(a),u=r(94),c=n(u),f=r(59),l=n(f),h=r(60),p=n(h),d=r(272),v=r(196),y=r(92),m=y.urlJoin,g=r(93),b=g.envyConf,w=g.envyLog,_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e),this.log=w("ANNO","store"),this.config=(0,c.default)(b("ANNO",{BASE_URL:"http://ANNO_BASE_URL-NOT-SET",BASE_PATH:"",STORE_HOOKS_PRE:"",STORE_HOOKS_POST:""}),t),this.hooks={pre:[],post:[]}}return(0,p.default)(e,null,[{key:"load",value:function(e){var r=e.loadingModule,n=e.loadPlugins,o=b("ANNO",{BASE_URL:"http://ANNO_BASE_URL-NOT-SET",BASE_PATH:"",STORE_HOOKS_PRE:"",STORE_HOOKS_POST:""});if(!r)throw new Error("Must pass the loading module to Store.load");if(!o.STORE)throw new Error("No store configured. Set the ANNO_STORE env var or STORE config option.");o.DEBUG&&console.log("Loading store "+o.STORE+" for "+r.filename);var i=void 0;try{i=r.require(o.STORE)}catch(e){console.log(e),console.error("Please install '"+o.STORE+"' configured as store"),t.exit(1)}var a=new i;return v.eachSeries(["pre","post"],function(e,t){n(o["STORE_HOOKS_"+e.toUpperCase()],{loadingModule:r,afterLoad:function(t,r){a.use(t,e),r()}},t)}),a}}]),(0,p.default)(e,[{key:"__logContext",value:function(e,t){if(!t.dryRun){var r=(0,c.default)({},t);this.log.silly(e+": "+(0,s.default)(r))}}},{key:"_callMethod",value:function(e,t){var r=this,n="_"+e.method;if(!(n in this))return t(new Error(n+" not implemented"));this.__logContext("BEFORE Method: "+e.method,e),v.eachSeries(this.hooks.pre,function(t,n){t(e,function(){r.__logContext("After preproc "+t.impl,e),n.apply(void 0,arguments)})},function(o,i){if(o){var a=e.user&&e.user.id?e.user.id:e.user;r.log.silly(a+" may not "+e.method+": "+o)}if(o)return t(o);if(e.dryRun)return t(null);r.__logContext("NOW Method: "+e.method,e);try{r[n](e,function(n){for(var o=arguments.length,i=Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(n)return t(n);v.eachSeries(r.hooks.post,function(t,n){r.log.silly("Running postproc "+t.impl),e.retvals=i,t(e,function(){r.__logContext(t.name,e),n.apply(void 0,arguments)})},function(e){return e?t(e):t.apply(void 0,[null].concat(i))})})}catch(e){t(e)}})}},{key:"use",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pre";this.hooks[t].push(e)}},{key:"init",value:function(e,t){if("function"==typeof e){var r=[e,{}];t=r[0],e=r[1]}this._callMethod((0,c.default)(e,{method:"init"}),t)}},{key:"wipe",value:function(e,t){if("function"==typeof e){var r=[e,{}];t=r[0],e=r[1]}this._callMethod((0,c.default)(e,{method:"wipe"}),t)}},{key:"disconnect",value:function(e,t){if("function"==typeof e){var r=[e,{}];t=r[0],e=r[1]}this._callMethod((0,c.default)(e,{method:"disconnect"}),t)}},{key:"get",value:function(e,t,r){if("function"==typeof t){var n=[t,{}];r=n[0],t=n[1]}this._callMethod((0,c.default)(t,{method:"get",annoId:e}),r)}},{key:"create",value:function(e,t,r){if("function"==typeof t){var n=[t,{}];r=n[0],t=n[1]}this._callMethod((0,c.default)(t,{method:"create",anno:e}),r)}},{key:"revise",value:function(e,t,r,n){if("function"==typeof r){var o=[r,{}];n=o[0],r=o[1]}this._callMethod((0,c.default)(r,{method:"revise",annoId:e,anno:t}),n)}},{key:"delete",value:function(e,t,r){if("function"==typeof t){var n=[t,{}];r=n[0],t=n[1]}this._callMethod((0,c.default)(t,{method:"delete",annoId:e}),r)}},{key:"search",value:function(e,t,r){if("function"==typeof e){var n=[e,{},{}];r=n[0],e=n[1],t=n[2]}if("function"==typeof t){var o=[t,{}];r=o[0],t=o[1]}this._callMethod((0,c.default)(t,{method:"search",query:e}),r)}},{key:"reply",value:function(e,t,r,n){if(this.log.debug("Replying to "+e,t),"function"==typeof r){var o=[r,{}];n=o[0],r=o[1]}this._callMethod((0,c.default)(r,{method:"reply",annoId:e,anno:t}),n)}},{key:"_reply",value:function(e,t){var r=e.anno,n=e.annoId;r.replyTo=n.match(/\/\//)?n:this._urlFromId(n),r.target&&"string"!=typeof r.target?r.target.id=r.replyTo:r.target=r.replyTo,this.log.debug("Replying to "+n,r),this.create(r,t)}},{key:"aclCheck",value:function(e,t,r){if("function"==typeof t){var n=[t,{}];r=n[0],t=n[1]}this._callMethod((0,c.default)(t,{method:"aclCheck",targets:e}),r)}},{key:"_aclCheck",value:function(e,t){var r=this,n={};e.dryRun=!0;var o=e.targets;v.forEach(o,function(t,o){n[t]={},r.get(t,{metadataOnly:!0},function(i,a){var s={target:t};a&&(0,c.default)(s,a,{target:t}),v.parallel({read:function(e){return e(null,!0)},create:function(t){return r.create(s,e,function(e){return t(null,!e)})},revise:function(n){return r.revise(t,s,e,function(e){return n(null,!e)})},remove:function(n){return r.delete(t,e,function(e){return n(null,!e)})}},function(e,r){n[t]=r,o()})})},function(e){return t(e,n)})}},{key:"import",value:function(e,t,r){if("function"==typeof t){var n=[t,{}];r=n[0],t=n[1]}this._callMethod((0,c.default)(t,{method:"import",anno:e}),r)}},{key:"_idFromURL",value:function(e){return e.replace(m(this.config.BASE_URL,this.config.BASE_PATH,"anno")+"/","")}},{key:"_urlFromId",value:function(e){return m(this.config.BASE_URL,this.config.BASE_PATH,"anno",e)}},{key:"_normalizeTarget",value:function(e){return Array.isArray(e.target)||(e.target=[e.target]),e.target=e.target.map(function(e){return"string"==typeof e?{source:e}:e}),1===e.target.length&&(e.target=e.target[0]),e}},{key:"_normalizeType",value:function(e){return"type"in e||(e.type=[]),Array.isArray(e.type)||(e.type=[e.type]),-1===e.type.indexOf("Annotation")&&e.type.push("Annotation"),e}},{key:"_deleteId",value:function(e){return e.id&&(e.via=e.id,delete e.id),e}},{key:"_genid",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+d.nice()}}]),e}();_.prototype.remove=_.prototype.delete,_.prototype.comment=_.prototype.reply,_.prototype.promisify=function(){var e=this,t={};return["use","init","wipe","disconnect","get","create","revise","delete","search","reply","aclCheck","import"].map(function(r){t[r]=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return new i.default(function(t,o){return e[r].apply(e,n.concat([function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return e?o(e):t.apply(void 0,n)}]))})}}),t},e.exports=_}).call(t,r(76))},function(e,t,r){"use strict";function n(e,t){Array.isArray(e[t])||(void 0===e[t]||null===e[t]?e[t]=[]:e[t]=[e[t]])}function o(e,t,r){void 0===e[t]||null===e[t]?e[t]=r:Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r],i(e,t)}function i(e,t){Array.isArray(e[t])&&1===e[t].length?e[t]=e[t][0]:null===e[t]&&delete e[t]}function a(e,t,r){if(Array.isArray(e[t])){var n=e[t].indexOf(r);e[t].splice(n,1)}else e.body===r&&(e[t]=[])}function s(e,t){return Array.isArray(e[t])?e[t].length:e[t]?1:0}function u(e,t){return Array.isArray(e)?e.filter(t):t(e)?[e]:void 0}function c(e,t){return Array.isArray(e)?e.find(t):t(e)?e:void 0}e.exports={ensureArray:n,add:o,remove:a,numberOf:s,find:c,packArray:i,filter:u}},function(e,t,r){"use strict";e.exports=r(122)},function(e,t,r){e.exports={default:r(212),__esModule:!0}},function(e,t,r){e.exports={default:r(215),__esModule:!0}},function(e,t,r){e.exports={default:r(219),__esModule:!0}},function(e,t,r){e.exports={default:r(220),__esModule:!0}},function(e,t,r){e.exports={default:r(221),__esModule:!0}},function(e,t,r){e.exports={default:r(222),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(95),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-n(e)}function i(e){var t,r,o,i,a,s=e.length;i=n(e),a=new l(3*s/4-i),r=i>0?s-4:s;var u=0;for(t=0;t<r;t+=4)o=f[e.charCodeAt(t)]<<18|f[e.charCodeAt(t+1)]<<12|f[e.charCodeAt(t+2)]<<6|f[e.charCodeAt(t+3)],a[u++]=o>>16&255,a[u++]=o>>8&255,a[u++]=255&o;return 2===i?(o=f[e.charCodeAt(t)]<<2|f[e.charCodeAt(t+1)]>>4,a[u++]=255&o):1===i&&(o=f[e.charCodeAt(t)]<<10|f[e.charCodeAt(t+1)]<<4|f[e.charCodeAt(t+2)]>>2,a[u++]=o>>8&255,a[u++]=255&o),a}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(a(n));return o.join("")}function u(e){for(var t,r=e.length,n=r%3,o="",i=[],a=0,u=r-n;a<u;a+=16383)i.push(s(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],o+=c[t>>2],o+=c[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=c[t>>10],o+=c[t>>4&63],o+=c[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=o,t.toByteArray=i,t.fromByteArray=u;for(var c=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)c[p]=h[p],f[h.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(e,t,r){"use strict";(function(e){function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?f(e,t,r):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function c(e,t){if(s(t),e=o(e,t<0?0:0|d(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=o(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function l(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=l(e,t),e}function p(e,t){if(i.isBuffer(t)){var r=0|d(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||H(t.length)?o(e,0):l(e,t);if("Buffer"===t.type&&X(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),i.alloc(+e)}function y(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return $(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}var c;if(o){var f=-1;for(c=r;c<s;c++)if(i(e,c)===i(t,-1===f?0:c-f)){if(-1===f&&(f=c),c-f+1===u)return f*a}else-1!==f&&(c-=c-f),f=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var l=!0,h=0;h<u;h++)if(i(e,c+h)!==i(t,h)){l=!1;break}if(l)return c}return-1}function _(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function E(e,t,r,n){return Y(V(t,e.length-r),e,r,n)}function P(e,t,r,n){return Y(K(t),e,r,n)}function x(e,t,r,n){return P(e,t,r,n)}function S(e,t,r,n){return Y(G(t),e,r,n)}function O(e,t,r,n){return Y(Q(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){var u,c,f,l;switch(s){case 1:i<128&&(a=i);break;case 2:u=e[o+1],128==(192&u)&&(l=(31&i)<<6|63&u)>127&&(a=l);break;case 3:u=e[o+1],c=e[o+2],128==(192&u)&&128==(192&c)&&(l=(15&i)<<12|(63&u)<<6|63&c)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=e[o+1],c=e[o+2],f=e[o+3],128==(192&u)&&128==(192&c)&&128==(192&f)&&(l=(15&i)<<18|(63&u)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return j(n)}function j(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function $(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=z(e[i]);return o}function T(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function F(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function N(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,o){return o||N(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return o||N(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(e,t,r,n,52,8),r+8}function q(e){if(e=U(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function U(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function K(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Q(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function G(e){return J.toByteArray(q(e))}function Y(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function H(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var J=r(210),W=r(259),X=r(260);t.Buffer=i,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,r){return a(null,e,t,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,r){return u(null,e,t,r)},i.allocUnsafe=function(e){return c(null,e)},i.allocUnsafeSlow=function(e){return c(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!X(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=r-t,u=Math.min(a,s),c=this.slice(n,o),f=e.slice(t,r),l=0;l<u;++l)if(c[l]!==f[l]){a=c[l],s=f[l];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return P(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=i.prototype;else{var o=t-e;n=new i(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},i.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),W.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),W.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),W.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),W.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);D(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);D(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=i.isBuffer(e)?e:V(new i(e,n).toString()),u=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(27))},function(e,t,r){r(74),r(73),e.exports=r(245)},function(e,t,r){var n=r(0),o=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,r){r(247),e.exports=r(0).Object.assign},function(e,t,r){r(248);var n=r(0).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){r(249);var n=r(0).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){r(250),e.exports=r(0).Object.getPrototypeOf},function(e,t,r){r(251),e.exports=r(0).Object.keys},function(e,t,r){r(252),e.exports=r(0).Object.setPrototypeOf},function(e,t,r){r(117),r(73),r(74),r(253),r(255),r(256),e.exports=r(0).Promise},function(e,t,r){r(254),r(117),r(257),r(258),e.exports=r(0).Symbol},function(e,t,r){r(73),r(74),e.exports=r(72).f("iterator")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(21),o=r(115),i=r(244);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),f=i(a,c);if(e&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}}},function(e,t,r){var n=r(26),o=r(66),i=r(38);e.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),u=i.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,r){var n=r(24),o=r(231),i=r(229),a=r(3),s=r(115),u=r(116),c={},f={},t=e.exports=function(e,t,r,l,h){var p,d,v,y,m=h?function(){return e}:u(e),g=n(r,l,t?2:1),b=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(p=s(e.length);p>b;b++)if((y=t?g(a(d=e[b])[0],d[1]):g(e[b]))===c||y===f)return y}else for(v=m.call(e);!(d=v.next()).done;)if((y=o(v,g,d.value,t))===c||y===f)return y};t.BREAK=c,t.RETURN=f},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(25),o=r(2)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},function(e,t,r){var n=r(23);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(3);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},function(e,t,r){"use strict";var n=r(65),o=r(39),i=r(40),a={};r(11)(a,r(2)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},function(e,t,r){var n=r(2)("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(42)("meta"),o=r(12),i=r(10),a=r(7).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(20)(function(){return u(Object.preventExtensions({}))}),f=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},l=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[n].i},h=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[n].w},p=function(e){return c&&d.NEED&&u(e)&&!i(e,n)&&f(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:l,getWeak:h,onFreeze:p}},function(e,t,r){var n=r(1),o=r(114).set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(23)(a);e.exports=function(){var e,t,r,c=function(){var n,o;for(u&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(i){var f=!0,l=document.createTextNode("");new i(c).observe(l,{characterData:!0}),r=function(){l.data=f=!f}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(c)}}else r=function(){o.call(n,c)};return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},function(e,t,r){"use strict";var n=r(26),o=r(66),i=r(38),a=r(41),s=r(103),u=Object.assign;e.exports=!u||r(20)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,f=o.f,l=i.f;u>c;)for(var h,p=s(arguments[c++]),d=f?n(p).concat(f(p)):n(p),v=d.length,y=0;v>y;)l.call(p,h=d[y++])&&(r[h]=p[h]);return r}:u},function(e,t,r){var n=r(7),o=r(3),i=r(26);e.exports=r(6)?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){var n=r(21),o=r(106).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(n(e))}},function(e,t,r){var n=r(11);e.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},function(e,t,r){var n=r(12),o=r(3),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(24)(Function.call,r(105).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:i}},function(e,t,r){"use strict";var n=r(1),o=r(0),i=r(7),a=r(6),s=r(2)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(69),o=r(61);e.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,r){var n=r(69),o=Math.max,i=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},function(e,t,r){var n=r(3),o=r(116);e.exports=r(0).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){"use strict";var n=r(223),o=r(234),i=r(25),a=r(21);e.exports=r(104)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(e,t,r){var n=r(4);n(n.S+n.F,"Object",{assign:r(237)})},function(e,t,r){var n=r(4);n(n.S,"Object",{create:r(65)})},function(e,t,r){var n=r(4);n(n.S+n.F*!r(6),"Object",{defineProperty:r(7).f})},function(e,t,r){var n=r(41),o=r(107);r(109)("getPrototypeOf",function(){return function(e){return o(n(e))}})},function(e,t,r){var n=r(41),o=r(26);r(109)("keys",function(){return function(e){return o(n(e))}})},function(e,t,r){var n=r(4);n(n.S,"Object",{setPrototypeOf:r(241).set})},function(e,t,r){"use strict";var n,o,i,a,s=r(37),u=r(1),c=r(24),f=r(100),l=r(4),h=r(12),p=r(36),d=r(224),v=r(227),y=r(113),m=r(114).set,g=r(236)(),b=r(64),w=r(110),_=r(111),E=u.TypeError,P=u.process,x=u.Promise,S="process"==f(P),O=function(){},A=o=b.f,k=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[r(2)("species")]=function(e){e(O,O)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t}catch(e){}}(),j=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var r=e._c;g(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a=o?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(o||(2==e._h&&T(e),e._h=1),!0===a?r=n:(c&&c.enter(),r=a(n),c&&c.exit()),r===t.promise?u(E("Promise-chain cycle")):(i=j(r))?i.call(r,s,u):s(r)):u(n)}catch(e){u(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){m.call(u,function(){var t,r,n,o=e._v,i=$(e);if(i&&(t=w(function(){S?P.emit("unhandledRejection",o,e):(r=u.onunhandledrejection)?r({promise:e,reason:o}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=S||$(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},$=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!$(t.promise))return!1;return!0},T=function(e){m.call(u,function(){var t;S?P.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},F=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),I(t,!0))},D=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw E("Promise can't be resolved itself");(t=j(e))?g(function(){var n={_w:r,_d:!1};try{t.call(e,c(D,n,1),c(F,n,1))}catch(e){F.call(n,e)}}):(r._v=e,r._s=1,I(r,!1))}catch(e){F.call({_w:r,_d:!1},e)}}};k||(x=function(e){d(this,x,"Promise","_h"),p(e),n.call(this);try{e(c(D,this,1),c(F,this,1))}catch(e){F.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(240)(x.prototype,{then:function(e,t){var r=A(y(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?P.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&I(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(D,e,1),this.reject=c(F,e,1)},b.f=A=function(e){return e===x||e===a?new i(e):o(e)}),l(l.G+l.W+l.F*!k,{Promise:x}),r(40)(x,"Promise"),r(242)("Promise"),a=r(0).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!k),"Promise",{resolve:function(e){return _(s&&this===a?x:this,e)}}),l(l.S+l.F*!(k&&r(233)(function(e){x.all(e).catch(O)})),"Promise",{all:function(e){var t=this,r=A(t),n=r.resolve,o=r.reject,i=w(function(){var r=[],i=0,a=1;v(e,!1,function(e){var s=i++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=A(t),n=r.reject,o=w(function(){v(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},function(e,t,r){"use strict";var n=r(1),o=r(10),i=r(6),a=r(4),s=r(112),u=r(235).KEY,c=r(20),f=r(68),l=r(40),h=r(42),p=r(2),d=r(72),v=r(71),y=r(226),m=r(230),g=r(3),b=r(21),w=r(70),_=r(39),E=r(65),P=r(239),x=r(105),S=r(7),O=r(26),A=x.f,k=S.f,j=P.f,I=n.Symbol,R=n.JSON,$=R&&R.stringify,T=p("_hidden"),F=p("toPrimitive"),D={}.propertyIsEnumerable,C=f("symbol-registry"),L=f("symbols"),N=f("op-symbols"),M=Object.prototype,B="function"==typeof I,q=n.QObject,U=!q||!q.prototype||!q.prototype.findChild,z=i&&c(function(){return 7!=E(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(M,t);n&&delete M[t],k(e,t,r),n&&e!==M&&k(M,t,n)}:k,V=function(e){var t=L[e]=E(I.prototype);return t._k=e,t},K=B&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Q=function(e,t,r){return e===M&&Q(N,t,r),g(e),t=w(t,!0),g(r),o(L,t)?(r.enumerable?(o(e,T)&&e[T][t]&&(e[T][t]=!1),r=E(r,{enumerable:_(0,!1)})):(o(e,T)||k(e,T,_(1,{})),e[T][t]=!0),z(e,t,r)):k(e,t,r)},G=function(e,t){g(e);for(var r,n=y(t=b(t)),o=0,i=n.length;i>o;)Q(e,r=n[o++],t[r]);return e},Y=function(e,t){return void 0===t?E(e):G(E(e),t)},H=function(e){var t=D.call(this,e=w(e,!0));return!(this===M&&o(L,e)&&!o(N,e))&&(!(t||!o(this,e)||!o(L,e)||o(this,T)&&this[T][e])||t)},J=function(e,t){if(e=b(e),t=w(t,!0),e!==M||!o(L,t)||o(N,t)){var r=A(e,t);return!r||!o(L,t)||o(e,T)&&e[T][t]||(r.enumerable=!0),r}},W=function(e){for(var t,r=j(b(e)),n=[],i=0;r.length>i;)o(L,t=r[i++])||t==T||t==u||n.push(t);return n},X=function(e){for(var t,r=e===M,n=j(r?N:b(e)),i=[],a=0;n.length>a;)!o(L,t=n[a++])||r&&!o(M,t)||i.push(L[t]);return i};B||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===M&&t.call(N,r),o(this,T)&&o(this[T],e)&&(this[T][e]=!1),z(this,e,_(1,r))};return i&&U&&z(M,e,{configurable:!0,set:t}),V(e)},s(I.prototype,"toString",function(){return this._k}),x.f=J,S.f=Q,r(106).f=P.f=W,r(38).f=H,r(66).f=X,i&&!r(37)&&s(M,"propertyIsEnumerable",H,!0),d.f=function(e){return V(p(e))}),a(a.G+a.W+a.F*!B,{Symbol:I});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)p(Z[ee++]);for(var te=O(p.store),re=0;te.length>re;)v(te[re++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return o(C,e+="")?C[e]:C[e]=I(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in C)if(C[t]===e)return t},useSetter:function(){U=!0},useSimple:function(){U=!1}}),a(a.S+a.F*!B,"Object",{create:Y,defineProperty:Q,defineProperties:G,getOwnPropertyDescriptor:J,getOwnPropertyNames:W,getOwnPropertySymbols:X}),R&&a(a.S+a.F*(!B||c(function(){var e=I();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!K(e)){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);return t=n[1],"function"==typeof t&&(r=t),!r&&m(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!K(t))return t}),n[1]=t,$.apply(R,n)}}}),I.prototype[F]||r(11)(I.prototype,F,I.prototype.valueOf),l(I,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(e,t,r){"use strict";var n=r(4),o=r(0),i=r(1),a=r(113),s=r(111);n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(4),o=r(64),i=r(110);n(n.S,"Promise",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(71)("asyncIterator")},function(e,t,r){r(71)("observable")},function(e,t){t.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?o-1:0,h=r?-1:1,p=e[t+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+e[t+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+p]=255&a,p+=d,a/=256,c-=8);e[r+p-d]|=128*v}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";function n(e,t,r,a,s,u,c,f,l){if(r&&"object"==typeof r&&!Array.isArray(r)){t(r,a,s,u,c,f,l);for(var h in r){var p=r[h];if(Array.isArray(p)){if(h in i.arrayKeywords)for(var d=0;d<p.length;d++)n(e,t,p[d],a+"/"+h+"/"+d,s,a,h,r,d)}else if(h in i.propsKeywords){if(p&&"object"==typeof p)for(var v in p)n(e,t,p[v],a+"/"+h+"/"+o(v),s,a,h,r,v)}else(h in i.keywords||e.allKeys&&!(h in i.skipKeywords))&&n(e,t,p,a+"/"+h,s,a,h,r)}}}function o(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var i=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,r,e,"",e)};i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){t.parse=r(263),t.stringify=r(264)},function(e,t){var r,n,o,i,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:r,text:o}},u=function(e){return e&&e!==n&&s("Expected '"+e+"' instead of '"+n+"'"),n=o.charAt(r),r+=1,n},c=function(){var e,t="";for("-"===n&&(t="-",u("-"));n>="0"&&n<="9";)t+=n,u();if("."===n)for(t+=".";u()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,u(),"-"!==n&&"+"!==n||(t+=n,u());n>="0"&&n<="9";)t+=n,u();if(e=+t,isFinite(e))return e;s("Bad number")},f=function(){var e,t,r,o="";if('"'===n)for(;u();){if('"'===n)return u(),o;if("\\"===n)if(u(),"u"===n){for(r=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)r=16*r+e;o+=String.fromCharCode(r)}else{if("string"!=typeof a[n])break;o+=a[n]}else o+=n}s("Bad string")},l=function(){for(;n&&n<=" ";)u()},h=function(){switch(n){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}s("Unexpected '"+n+"'")},p=function(){var e=[];if("["===n){if(u("["),l(),"]"===n)return u("]"),e;for(;n;){if(e.push(i()),l(),"]"===n)return u("]"),e;u(","),l()}}s("Bad array")},d=function(){var e,t={};if("{"===n){if(u("{"),l(),"}"===n)return u("}"),t;for(;n;){if(e=f(),l(),u(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=i(),l(),"}"===n)return u("}"),t;u(","),l()}}s("Bad object")};i=function(){switch(l(),n){case"{":return d();case"[":return p();case'"':return f();case"-":return c();default:return n>="0"&&n<="9"?c():h()}},e.exports=function(e,t){var a;return o=e,r=0,n=" ",a=i(),l(),n&&s("Syntax error"),"function"==typeof t?function e(r,n){var o,i,a=r[n];if(a&&"object"==typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i=e(a,o),void 0!==i?a[o]=i:delete a[o]);return t.call(r,n,a)}({"":a},""):a}},function(e,t){function r(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,t){var s,u,c,f,l,h=o,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof a&&(p=a.call(t,e,p)),typeof p){case"string":return r(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(o+=i,l=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,s=0;s<f;s+=1)l[s]=n(s,p)||"null";return c=0===l.length?"[]":o?"[\n"+o+l.join(",\n"+o)+"\n"+h+"]":"["+l.join(",")+"]",o=h,c}if(a&&"object"==typeof a)for(f=a.length,s=0;s<f;s+=1)"string"==typeof(u=a[s])&&(c=n(u,p))&&l.push(r(u)+(o?": ":":")+c);else for(u in p)Object.prototype.hasOwnProperty.call(p,u)&&(c=n(u,p))&&l.push(r(u)+(o?": ":":")+c);return c=0===l.length?"{}":o?"{\n"+o+l.join(",\n"+o)+"\n"+h+"}":"{"+l.join(",")+"}",o=h,c}}var o,i,a,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};e.exports=function(e,t,r){var s;if(o="",i="","number"==typeof r)for(s=0;s<r;s+=1)i+=" ";else"string"==typeof r&&(i=r);if(a=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return n("",{"":e})}},function(e,t,r){var n,o,i;/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
!function(r,a){"object"==typeof t&&t&&"string"!=typeof t.nodeName?a(t):(o=[t],n=a,void 0!==(i="function"==typeof n?n.apply(t,o):n)&&(e.exports=i))}(0,function(e){function t(e){return"function"==typeof e}function r(e){return v(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function i(e,t){return y.call(e,t)}function a(e){return!i(m,e)}function s(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return g[e]})}function u(t,r){function o(e){if("string"==typeof e&&(e=e.split(w,2)),!v(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(n(e[0])+"\\s*"),s=new RegExp("\\s*"+n(e[1])),u=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var i,s,u,h=[],p=[],d=[],y=!1,m=!1;o(r||e.tags);for(var g,x,S,O,A,k,j=new l(t);!j.eos();){if(g=j.pos,S=j.scanUntil(i))for(var I=0,R=S.length;I<R;++I)O=S.charAt(I),a(O)?d.push(p.length):m=!0,p.push(["text",O,g,g+1]),g+=1,"\n"===O&&function(){if(y&&!m)for(;d.length;)delete p[d.pop()];else d=[];y=!1,m=!1}();if(!j.scan(i))break;if(y=!0,x=j.scan(P)||"name",j.scan(b),"="===x?(S=j.scanUntil(_),j.scan(_),j.scanUntil(s)):"{"===x?(S=j.scanUntil(u),j.scan(E),j.scanUntil(s),x="&"):S=j.scanUntil(s),!j.scan(s))throw new Error("Unclosed tag at "+j.pos);if(A=[x,S,g,j.pos],p.push(A),"#"===x||"^"===x)h.push(A);else if("/"===x){if(!(k=h.pop()))throw new Error('Unopened section "'+S+'" at '+g);if(k[1]!==S)throw new Error('Unclosed section "'+k[1]+'" at '+g)}else"name"===x||"{"===x||"&"===x?m=!0:"="===x&&o(S)}if(k=h.pop())throw new Error('Unclosed section "'+k[1]+'" at '+j.pos);return f(c(p))}function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function f(e){for(var t,r,n=[],o=n,i=[],a=0,s=e.length;a<s;++a)switch(t=e[a],t[0]){case"#":case"^":o.push(t),i.push(t),o=t[4]=[];break;case"/":r=i.pop(),r[5]=t[2],o=i.length>0?i[i.length-1][4]:n;break;default:o.push(t)}return n}function l(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function p(){this.cache={}}var d=Object.prototype.toString,v=Array.isArray||function(e){return"[object Array]"===d.call(e)},y=RegExp.prototype.test,m=/\S/,g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,w=/\s+/,_=/\s*=/,E=/\s*\}/,P=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},l.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},h.prototype.push=function(e){return new h(e,this)},h.prototype.lookup=function(e){var r,n=this.cache;if(n.hasOwnProperty(e))r=n[e];else{for(var i,a,s=this,u=!1;s;){if(e.indexOf(".")>0)for(r=s.view,i=e.split("."),a=0;null!=r&&a<i.length;)a===i.length-1&&(u=o(r,i[a])),r=r[i[a++]];else r=s.view[e],u=o(s.view,e);if(u)break;s=s.parent}n[e]=r}return t(r)&&(r=r.call(this.view)),r},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var r=this.cache,n=r[e];return null==n&&(n=r[e]=u(e,t)),n},p.prototype.render=function(e,t,r){var n=this.parse(e),o=t instanceof h?t:new h(t);return this.renderTokens(n,o,r,e)},p.prototype.renderTokens=function(e,t,r,n){for(var o,i,a,s="",u=0,c=e.length;u<c;++u)a=void 0,o=e[u],i=o[0],"#"===i?a=this.renderSection(o,t,r,n):"^"===i?a=this.renderInverted(o,t,r,n):">"===i?a=this.renderPartial(o,t,r,n):"&"===i?a=this.unescapedValue(o,t):"name"===i?a=this.escapedValue(o,t):"text"===i&&(a=this.rawValue(o)),void 0!==a&&(s+=a);return s},p.prototype.renderSection=function(e,r,n,o){function i(e){return a.render(e,r,n)}var a=this,s="",u=r.lookup(e[1]);if(u){if(v(u))for(var c=0,f=u.length;c<f;++c)s+=this.renderTokens(e[4],r.push(u[c]),n,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],r.push(u),n,o);else if(t(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");u=u.call(r.view,o.slice(e[3],e[5]),i),null!=u&&(s+=u)}else s+=this.renderTokens(e[4],r,n,o);return s}},p.prototype.renderInverted=function(e,t,r,n){var o=t.lookup(e[1]);if(!o||v(o)&&0===o.length)return this.renderTokens(e[4],t,r,n)},p.prototype.renderPartial=function(e,r,n){if(n){var o=t(n)?n(e[1]):n[e[1]];return null!=o?this.renderTokens(this.parse(o),r,n,o):void 0}},p.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},p.prototype.escapedValue=function(t,r){var n=r.lookup(t[1]);if(null!=n)return e.escape(n)},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var x=new p;return e.clearCache=function(){return x.clearCache()},e.parse=function(e,t){return x.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+r(e)+'" was given as the first argument for mustache#render(template, view, partials)');return x.render(e,t,n)},e.to_html=function(r,n,o,i){var a=e.render(r,n,o);if(!t(i))return a;i(a)},e.escape=s,e.Scanner=l,e.Context=h,e.Writer=p,e})},function(e,t,r){(function(t){var r,r;!function(t){"function"==typeof bootstrap?bootstrap("nedb",t):e.exports=t()}(function(){var e;return function(e,t,n){function o(n,a){if(!t[n]){if(!e[n]){var s="function"==typeof r&&r;if(!a&&s)return r(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){var r=e[n][1][t];return o(r||t)},u,u.exports)}return t[n].exports}for(var i="function"==typeof r&&r,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){function n(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(t===e[r])return r;return-1}var o=e("__browserify_process");o.EventEmitter||(o.EventEmitter=function(){});var i=r.EventEmitter=o.EventEmitter,a="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};i.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},i.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||a(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var r=Array.prototype.slice.call(arguments,1);t.apply(this,r)}return!0}if(a(t)){for(var r=Array.prototype.slice.call(arguments,1),n=t.slice(),o=0,i=n.length;i>o;o++)n[o].apply(this,r);return!0}return!1},i.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(a(this._events[e])){if(!this._events[e].warned){var r;(r=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){var r=this;return r.on(e,function n(){r.removeListener(e,n),t.apply(this,arguments)}),this},i.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var r=this._events[e];if(a(r)){var o=n(r,t);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},i.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},i.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},i.listenerCount=function(e,t){return e._events&&e._events[t]?"function"==typeof e._events[t]?1:e._events[t].length:0}},{__browserify_process:4}],2:[function(e,t,r){function n(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}function o(e,t){for(var r=0,n=e.length;n>=0;n--){var o=e[n];"."==o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var i=e("__browserify_process"),a=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;r.resolve=function(){for(var e="",t=!1,r=arguments.length;r>=-1&&!t;r--){var a=r>=0?arguments[r]:i.cwd();"string"==typeof a&&a&&(e=a+"/"+e,t="/"===a.charAt(0))}return e=o(n(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},r.normalize=function(e){var t="/"===e.charAt(0),r="/"===e.slice(-1);return e=o(n(e.split("/"),function(e){return!!e}),!t).join("/"),e||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){return e&&"string"==typeof e}).join("/"))},r.dirname=function(e){var t=a.exec(e)[1]||"";return t?1===t.length?t:t.substring(0,t.length-1):"."},r.basename=function(e,t){var r=a.exec(e)[2]||"";return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return a.exec(e)[3]||""},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),a=Math.min(o.length,i.length),s=a,u=0;a>u;u++)if(o[u]!==i[u]){s=u;break}for(var c=[],u=s;u<o.length;u++)c.push("..");return c=c.concat(i.slice(s)),c.join("/")},r.sep="/"},{__browserify_process:4}],3:[function(e,t,r){function n(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===Object.prototype.toString.call(e)}function o(e){"object"==typeof e&&Object.prototype.toString.call(e)}function i(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}e("events"),r.isArray=n,r.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},r.print=function(){},r.puts=function(){},r.debug=function(){},r.inspect=function(e,t,u,c){function f(e,u){if(e&&"function"==typeof e.inspect&&e!==r&&(!e.constructor||e.constructor.prototype!==e))return e.inspect(u);switch(typeof e){case"undefined":return h("undefined","undefined");case"string":var c="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return h(c,"string");case"number":return h(""+e,"number");case"boolean":return h(""+e,"boolean")}if(null===e)return h("null","null");var p=a(e),d=t?s(e):p;if("function"==typeof e&&0===d.length){if(o(e))return h(""+e,"regexp");var v=e.name?": "+e.name:"";return h("[Function"+v+"]","special")}if(i(e)&&0===d.length)return h(e.toUTCString(),"date");var y,m,g;if(n(e)?(m="Array",g=["[","]"]):(m="Object",g=["{","}"]),"function"==typeof e){var b=e.name?": "+e.name:"";y=o(e)?" "+e:" [Function"+b+"]"}else y="";if(i(e)&&(y=" "+e.toUTCString()),0===d.length)return g[0]+y+g[1];if(0>u)return o(e)?h(""+e,"regexp"):h("[Object]","special");l.push(e);var w=d.map(function(t){var r,o;if(e.__lookupGetter__&&(e.__lookupGetter__(t)?o=e.__lookupSetter__(t)?h("[Getter/Setter]","special"):h("[Getter]","special"):e.__lookupSetter__(t)&&(o=h("[Setter]","special"))),p.indexOf(t)<0&&(r="["+t+"]"),o||(l.indexOf(e[t])<0?(o=null===u?f(e[t]):f(e[t],u-1),o.indexOf("\n")>-1&&(o=n(e)?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=h("[Circular]","special")),void 0===r){if("Array"===m&&t.match(/^\d+$/))return o;r=JSON.stringify(""+t),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=h(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=h(r,"string"))}return r+": "+o});l.pop();var _=0;return w=w.reduce(function(e,t){return _++,t.indexOf("\n")>=0&&_++,e+t.length+1},0)>50?g[0]+(""===y?"":y+"\n ")+" "+w.join(",\n  ")+" "+g[1]:g[0]+y+" "+w.join(", ")+" "+g[1]}var l=[],h=function(e,t){var r={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n={special:"cyan",number:"blue",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"}[t];return n?"["+r[n][0]+"m"+e+"["+r[n][1]+"m":e};return c||(h=function(e){return e}),f(e,void 0===u?2:u)},r.log=function(){},r.pump=null;var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},s=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.hasOwnProperty.call(e,r)&&t.push(r);return t},u=Object.create||function(e,t){var r;if(null===e)r={__proto__:null};else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var n=function(){};n.prototype=e,r=new n,r.__proto__=e}return void 0!==t&&Object.defineProperties&&Object.defineProperties(r,t),r};r.inherits=function(e,t){e.super_=t,e.prototype=u(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};var c=/%[sdj%]/g;r.format=function(e){if("string"!=typeof e){for(var t=[],n=0;n<arguments.length;n++)t.push(r.inspect(arguments[n]));return t.join(" ")}for(var n=1,o=arguments,i=o.length,a=String(e).replace(c,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":return JSON.stringify(o[n++]);default:return e}}),s=o[n];i>n;s=o[++n])a+=null===s||"object"!=typeof s?" "+s:" "+r.inspect(s);return a}},{events:1}],4:[function(e,t){var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){r.shift()()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],5:[function(e,t){function r(e,t,r){this.db=e,this.query=t||{},r&&(this.execFn=r)}var n=e("./model"),o=e("underscore");r.prototype.limit=function(e){return this._limit=e,this},r.prototype.skip=function(e){return this._skip=e,this},r.prototype.sort=function(e){return this._sort=e,this},r.prototype.projection=function(e){return this._projection=e,this},r.prototype.project=function(e){var t,r,n,i=[],a=this;return void 0===this._projection||0===Object.keys(this._projection).length?e:(t=0!==this._projection._id,this._projection=o.omit(this._projection,"_id"),n=Object.keys(this._projection),n.forEach(function(e){if(void 0!==r&&a._projection[e]!==r)throw new Error("Can't both keep and omit fields except for _id");r=a._projection[e]}),e.forEach(function(e){var a=1===r?o.pick(e,n):o.omit(e,n);t?a._id=e._id:delete a._id,i.push(a)}),i)},r.prototype._exec=function(e){var t,r,o,i=this.db.getCandidates(this.query),a=[],s=0,u=0,c=this,f=null;try{for(t=0;t<i.length;t+=1)if(n.match(i[t],this.query))if(this._sort)a.push(i[t]);else if(this._skip&&this._skip>u)u+=1;else if(a.push(i[t]),s+=1,this._limit&&this._limit<=s)break}catch(t){return e(t)}if(this._sort){r=Object.keys(this._sort);var l=[];for(t=0;t<r.length;t++)o=r[t],l.push({key:o,direction:c._sort[o]});a.sort(function(e,t){var r,o,i;for(i=0;i<l.length;i++)if(r=l[i],0!==(o=r.direction*n.compareThings(n.getDotValue(e,r.key),n.getDotValue(t,r.key),c.db.compareStrings)))return o;return 0});var h=this._limit||a.length,p=this._skip||0;a=a.slice(p,p+h)}try{a=this.project(a)}catch(e){f=e,a=void 0}return this.execFn?this.execFn(f,a,e):e(f,a)},r.prototype.exec=function(){this.db.executor.push({this:this,fn:this._exec,arguments:arguments})},t.exports=r},{"./model":10,underscore:19}],6:[function(e,t){function r(e){for(var t,t,r=new Array(e),n=0;e>n;n++)0==(3&n)&&(t=4294967296*Math.random()),r[n]=255&t>>>((3&n)<<3);return r}function n(e){var t,r,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=e.length%3,a="";for(n=0,r=e.length-i;r>n;n+=3)t=(e[n]<<16)+(e[n+1]<<8)+e[n+2],a+=function(e){return o[63&e>>18]+o[63&e>>12]+o[63&e>>6]+o[63&e]}(t);switch(i){case 1:t=e[e.length-1],a+=o[t>>2],a+=o[63&t<<4],a+="==";break;case 2:t=(e[e.length-2]<<8)+e[e.length-1],a+=o[t>>10],a+=o[63&t>>4],a+=o[63&t<<2],a+="="}return a}function o(e){return n(r(Math.ceil(Math.max(8,2*e)))).replace(/[+\/]/g,"").slice(0,e)}t.exports.uid=o},{}],7:[function(e,t){function r(e){var t;"string"==typeof e?(t=e,this.inMemoryOnly=!1):(e=e||{},t=e.filename,this.inMemoryOnly=e.inMemoryOnly||!1,this.autoload=e.autoload||!1,this.timestampData=e.timestampData||!1),t&&"string"==typeof t&&0!==t.length?this.filename=t:(this.filename=null,this.inMemoryOnly=!0),this.compareStrings=e.compareStrings,this.persistence=new f({db:this,nodeWebkitAppName:e.nodeWebkitAppName,afterSerialization:e.afterSerialization,beforeDeserialization:e.beforeDeserialization,corruptAlertThreshold:e.corruptAlertThreshold}),this.executor=new a,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new s({fieldName:"_id",unique:!0}),this.autoload&&this.loadDatabase(e.onload||function(e){if(e)throw e})}var n=e("./customUtils"),o=e("./model"),i=e("async"),a=e("./executor"),s=e("./indexes"),u=e("util"),c=e("underscore"),f=e("./persistence"),l=e("./cursor");u.inherits(r,e("events").EventEmitter),r.prototype.loadDatabase=function(){this.executor.push({this:this.persistence,fn:this.persistence.loadDatabase,arguments:arguments},!0)},r.prototype.getAllData=function(){return this.indexes._id.getAll()},r.prototype.resetIndexes=function(e){var t=this;Object.keys(this.indexes).forEach(function(r){t.indexes[r].reset(e)})},r.prototype.ensureIndex=function(e,t){var r,n=t||function(){};if(e=e||{},!e.fieldName)return r=new Error("Cannot create an index without a fieldName"),r.missingFieldName=!0,n(r);if(this.indexes[e.fieldName])return n(null);this.indexes[e.fieldName]=new s(e);try{this.indexes[e.fieldName].insert(this.getAllData())}catch(t){return delete this.indexes[e.fieldName],n(t)}this.persistence.persistNewState([{$$indexCreated:e}],function(e){return n(e?e:null)})},r.prototype.removeIndex=function(e,t){var r=t||function(){};delete this.indexes[e],this.persistence.persistNewState([{$$indexRemoved:e}],function(e){return r(e?e:null)})},r.prototype.addToIndexes=function(e){var t,r,n,o=Object.keys(this.indexes);for(t=0;t<o.length;t+=1)try{this.indexes[o[t]].insert(e)}catch(e){r=t,n=e;break}if(n){for(t=0;r>t;t+=1)this.indexes[o[t]].remove(e);throw n}},r.prototype.removeFromIndexes=function(e){var t=this;Object.keys(this.indexes).forEach(function(r){t.indexes[r].remove(e)})},r.prototype.updateIndexes=function(e,t){var r,n,o,i=Object.keys(this.indexes);for(r=0;r<i.length;r+=1)try{this.indexes[i[r]].update(e,t)}catch(e){n=r,o=e;break}if(o){for(r=0;n>r;r+=1)this.indexes[i[r]].revertUpdate(e,t);throw o}},r.prototype.getCandidates=function(e){var t,r=Object.keys(this.indexes);return t=[],Object.keys(e).forEach(function(r){("string"==typeof e[r]||"number"==typeof e[r]||"boolean"==typeof e[r]||u.isDate(e[r])||null===e[r])&&t.push(r)}),t=c.intersection(t,r),t.length>0?this.indexes[t[0]].getMatching(e[t[0]]):(t=[],Object.keys(e).forEach(function(r){e[r]&&e[r].hasOwnProperty("$in")&&t.push(r)}),t=c.intersection(t,r),t.length>0?this.indexes[t[0]].getMatching(e[t[0]].$in):(t=[],Object.keys(e).forEach(function(r){e[r]&&(e[r].hasOwnProperty("$lt")||e[r].hasOwnProperty("$lte")||e[r].hasOwnProperty("$gt")||e[r].hasOwnProperty("$gte"))&&t.push(r)}),t=c.intersection(t,r),t.length>0?this.indexes[t[0]].getBetweenBounds(e[t[0]]):this.getAllData()))},r.prototype._insert=function(e,t){var r,n=t||function(){};try{r=this.prepareDocumentForInsertion(e),this._insertInCache(r)}catch(e){return n(e)}this.persistence.persistNewState(u.isArray(r)?r:[r],function(e){return e?n(e):n(null,o.deepCopy(r))})},r.prototype.createNewId=function(){var e=n.uid(16);return this.indexes._id.getMatching(e).length>0&&(e=this.createNewId()),e},r.prototype.prepareDocumentForInsertion=function(e){var t,r=this;if(u.isArray(e))t=[],e.forEach(function(e){t.push(r.prepareDocumentForInsertion(e))});else{t=o.deepCopy(e),void 0===t._id&&(t._id=this.createNewId());var n=new Date;this.timestampData&&void 0===t.createdAt&&(t.createdAt=n),this.timestampData&&void 0===t.updatedAt&&(t.updatedAt=n),o.checkObject(t)}return t},r.prototype._insertInCache=function(e){u.isArray(e)?this._insertMultipleDocsInCache(e):this.addToIndexes(e)},r.prototype._insertMultipleDocsInCache=function(e){var t,r,n;for(t=0;t<e.length;t+=1)try{this.addToIndexes(e[t])}catch(e){n=e,r=t;break}if(n){for(t=0;r>t;t+=1)this.removeFromIndexes(e[t]);throw n}},r.prototype.insert=function(){this.executor.push({this:this,fn:this._insert,arguments:arguments})},r.prototype.count=function(e,t){var r=new l(this,e,function(e,t,r){return e?r(e):r(null,t.length)});return"function"!=typeof t?r:void r.exec(t)},r.prototype.find=function(e,t,r){switch(arguments.length){case 1:t={};break;case 2:"function"==typeof t&&(r=t,t={})}var n=new l(this,e,function(e,t,r){var n,i=[];if(e)return r(e);for(n=0;n<t.length;n+=1)i.push(o.deepCopy(t[n]));return r(null,i)});return n.projection(t),"function"!=typeof r?n:void n.exec(r)},r.prototype.findOne=function(e,t,r){switch(arguments.length){case 1:t={};break;case 2:"function"==typeof t&&(r=t,t={})}var n=new l(this,e,function(e,t,r){return e?r(e):1===t.length?r(null,o.deepCopy(t[0])):r(null,null)});return n.projection(t).limit(1),"function"!=typeof r?n:void n.exec(r)},r.prototype._update=function(e,t,r,n){var a,s,u,f,h=this,p=0;"function"==typeof r&&(n=r,r={}),a=n||function(){},s=void 0!==r.multi&&r.multi,u=void 0!==r.upsert&&r.upsert,i.waterfall([function(r){if(!u)return r();new l(h,e).limit(1)._exec(function(n,i){if(n)return a(n);if(1===i.length)return r();var s;try{o.checkObject(t),s=t}catch(r){try{s=o.modify(o.deepCopy(e,!0),t)}catch(n){return a(n)}}return h._insert(s,function(e,t){return e?a(e):a(null,1,t)})})},function(){var n,i=h.getCandidates(e),u=[];try{for(f=0;f<i.length;f+=1)o.match(i[f],e)&&(s||0===p)&&(p+=1,n=o.modify(i[f],t),h.timestampData&&(n.updatedAt=new Date),u.push({oldDoc:i[f],newDoc:n}))}catch(e){return a(e)}try{h.updateIndexes(u)}catch(e){return a(e)}var l=c.pluck(u,"newDoc");h.persistence.persistNewState(l,function(e){if(e)return a(e);if(r.returnUpdatedDocs){var t=[];return l.forEach(function(e){t.push(o.deepCopy(e))}),a(null,p,t)}return a(null,p)})}])},r.prototype.update=function(){this.executor.push({this:this,fn:this._update,arguments:arguments})},r.prototype._remove=function(e,t,r){var n,i,a=this,s=0,u=[],c=this.getCandidates(e);"function"==typeof t&&(r=t,t={}),n=r||function(){},i=void 0!==t.multi&&t.multi;try{c.forEach(function(t){o.match(t,e)&&(i||0===s)&&(s+=1,u.push({$$deleted:!0,_id:t._id}),a.removeFromIndexes(t))})}catch(e){return n(e)}a.persistence.persistNewState(u,function(e){return e?n(e):n(null,s)})},r.prototype.remove=function(){this.executor.push({this:this,fn:this._remove,arguments:arguments})},t.exports=r},{"./cursor":5,"./customUtils":6,"./executor":8,"./indexes":9,"./model":10,"./persistence":11,async:13,events:1,underscore:19,util:3}],8:[function(e,r){function n(){this.buffer=[],this.ready=!1,this.queue=i.queue(function(e,r){var n,i,a=e.arguments[e.arguments.length-1],s=[];for(i=0;i<e.arguments.length;i+=1)s.push(e.arguments[i]);"function"==typeof a?(n=function(){"function"==typeof t?t(r):o.nextTick(r),a.apply(null,arguments)},s[s.length-1]=n):(n=function(){r()},s.push(n)),e.fn.apply(e.this,s)},1)}var o=e("__browserify_process"),i=e("async");n.prototype.push=function(e,t){this.ready||t?this.queue.push(e):this.buffer.push(e)},n.prototype.processBuffer=function(){var e;for(this.ready=!0,e=0;e<this.buffer.length;e+=1)this.queue.push(this.buffer[e]);this.buffer=[]},r.exports=n},{__browserify_process:4,async:13}],9:[function(e,t){function r(e,t){return e===t}function n(e){return null===e?"$null":"string"==typeof e?"$string"+e:"boolean"==typeof e?"$boolean"+e:"number"==typeof e?"$number"+e:u.isArray(e)?"$date"+e.getTime():e}function o(e){this.fieldName=e.fieldName,this.unique=e.unique||!1,this.sparse=e.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:a.compareThings,checkValueEquality:r},this.reset()}var i=e("binary-search-tree").AVLTree,a=e("./model"),s=e("underscore"),u=e("util");o.prototype.reset=function(e){this.tree=new i(this.treeOptions),e&&this.insert(e)},o.prototype.insert=function(e){var t,r,o,i,c;if(u.isArray(e))return void this.insertMultipleDocs(e);if(void 0!==(t=a.getDotValue(e,this.fieldName))||!this.sparse)if(u.isArray(t)){for(r=s.uniq(t,n),o=0;o<r.length;o+=1)try{this.tree.insert(r[o],e)}catch(e){c=e,i=o;break}if(c){for(o=0;i>o;o+=1)this.tree.delete(r[o],e);throw c}}else this.tree.insert(t,e)},o.prototype.insertMultipleDocs=function(e){var t,r,n;for(t=0;t<e.length;t+=1)try{this.insert(e[t])}catch(e){r=e,n=t;break}if(r){for(t=0;n>t;t+=1)this.remove(e[t]);throw r}},o.prototype.remove=function(e){var t,r=this;return u.isArray(e)?void e.forEach(function(e){r.remove(e)}):void(void 0===(t=a.getDotValue(e,this.fieldName))&&this.sparse||(u.isArray(t)?s.uniq(t,n).forEach(function(t){r.tree.delete(t,e)}):this.tree.delete(t,e)))},o.prototype.update=function(e,t){if(u.isArray(e))return void this.updateMultipleDocs(e);this.remove(e);try{this.insert(t)}catch(t){throw this.insert(e),t}},o.prototype.updateMultipleDocs=function(e){var t,r,n;for(t=0;t<e.length;t+=1)this.remove(e[t].oldDoc);for(t=0;t<e.length;t+=1)try{this.insert(e[t].newDoc)}catch(e){n=e,r=t;break}if(n){for(t=0;r>t;t+=1)this.remove(e[t].newDoc);for(t=0;t<e.length;t+=1)this.insert(e[t].oldDoc);throw n}},o.prototype.revertUpdate=function(e,t){var r=[];u.isArray(e)?(e.forEach(function(e){r.push({oldDoc:e.newDoc,newDoc:e.oldDoc})}),this.update(r)):this.update(t,e)},o.prototype.getMatching=function(e){var t=this;if(u.isArray(e)){var r={},n=[];return e.forEach(function(e){t.getMatching(e).forEach(function(e){r[e._id]=e})}),Object.keys(r).forEach(function(e){n.push(r[e])}),n}return t.tree.search(e)},o.prototype.getBetweenBounds=function(e){return this.tree.betweenBounds(e)},o.prototype.getAll=function(){var e=[];return this.tree.executeOnEveryNode(function(t){var r;for(r=0;r<t.data.length;r+=1)e.push(t.data[r])}),e},t.exports=o},{"./model":10,"binary-search-tree":14,underscore:19,util:3}],10:[function(e,t){function r(e,t){if("number"==typeof e&&(e=e.toString()),!("$"!==e[0]||"$$date"===e&&"number"==typeof t||"$$deleted"===e&&!0===t||"$$indexCreated"===e||"$$indexRemoved"===e))throw new Error("Field names cannot begin with the $ character");if(-1!==e.indexOf("."))throw new Error("Field names cannot contain a .")}function n(e){g.isArray(e)&&e.forEach(function(e){n(e)}),"object"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){r(t,e[t]),n(e[t])})}function o(e){return JSON.stringify(e,function(e,t){return r(e,t),void 0===t?void 0:null===t?null:"function"==typeof this[e].getTime?{$$date:this[e].getTime()}:t})}function i(e){return JSON.parse(e,function(e,t){return"$$date"===e?new Date(t):"string"==typeof t||"number"==typeof t||"boolean"==typeof t||null===t?t:t&&t.$$date?t.$$date:t})}function a(e,t){var r;return"boolean"==typeof e||"number"==typeof e||"string"==typeof e||null===e||g.isDate(e)?e:g.isArray(e)?(r=[],e.forEach(function(e){r.push(a(e,t))}),r):"object"==typeof e?(r={},Object.keys(e).forEach(function(n){(!t||"$"!==n[0]&&-1===n.indexOf("."))&&(r[n]=a(e[n],t))}),r):void 0}function s(e){return"boolean"==typeof e||"number"==typeof e||"string"==typeof e||null===e||g.isDate(e)||g.isArray(e)}function u(e,t){return t>e?-1:e>t?1:0}function c(e,t){var r,n;for(r=0;r<Math.min(e.length,t.length);r+=1)if(0!==(n=f(e[r],t[r])))return n;return u(e.length,t.length)}function f(e,t,r){var n,o,i,a,s=r||u;if(void 0===e)return void 0===t?0:-1;if(void 0===t)return void 0===e?0:1;if(null===e)return null===t?0:-1;if(null===t)return null===e?0:1;if("number"==typeof e)return"number"==typeof t?u(e,t):-1;if("number"==typeof t)return"number"==typeof e?u(e,t):1;if("string"==typeof e)return"string"==typeof t?s(e,t):-1;if("string"==typeof t)return"string"==typeof e?s(e,t):1;if("boolean"==typeof e)return"boolean"==typeof t?u(e,t):-1;if("boolean"==typeof t)return"boolean"==typeof e?u(e,t):1;if(g.isDate(e))return g.isDate(t)?u(e.getTime(),t.getTime()):-1;if(g.isDate(t))return g.isDate(e)?u(e.getTime(),t.getTime()):1;if(g.isArray(e))return g.isArray(t)?c(e,t):-1;if(g.isArray(t))return g.isArray(e)?c(e,t):1;for(n=Object.keys(e).sort(),o=Object.keys(t).sort(),a=0;a<Math.min(n.length,o.length);a+=1)if(0!==(i=f(e[n[a]],t[o[a]])))return i;return u(n.length,o.length)}function l(e){return function(t,r,n){var o="string"==typeof r?r.split("."):r;1===o.length?_[e](t,r,n):(t[o[0]]=t[o[0]]||{},w[e](t[o[0]],o.slice(1),n))}}function h(e,t){var r,o,i=Object.keys(t),s=b.map(i,function(e){return e[0]}),u=b.filter(s,function(e){return"$"===e});if(-1!==i.indexOf("_id")&&t._id!==e._id)throw new Error("You cannot change a document's _id");if(0!==u.length&&u.length!==s.length)throw new Error("You cannot mix modifiers and normal fields");if(0===u.length?(r=a(t),r._id=e._id):(o=b.uniq(i),r=a(e),o.forEach(function(e){var n;if(!w[e])throw new Error("Unknown modifier "+e);if("object"!=typeof t[e])throw new Error("Modifier "+e+"'s argument must be an object");n=Object.keys(t[e]),n.forEach(function(n){w[e](r,n,t[e][n])})})),n(r),e._id!==r._id)throw new Error("You can't change a document's _id");return r}function p(e,t){var r,n,o="string"==typeof t?t.split("."):t;if(e){if(0===o.length)return e;if(1===o.length)return e[o[0]];if(g.isArray(e[o[0]])){if("number"==typeof(r=parseInt(o[1],10))&&!isNaN(r))return p(e[o[0]][r],o.slice(2));for(n=new Array,r=0;r<e[o[0]].length;r+=1)n.push(p(e[o[0]][r],o.slice(1)));return n}return p(e[o[0]],o.slice(1))}}function d(e,t){var r,n,o;if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)return e===t;if(g.isDate(e)||g.isDate(t))return g.isDate(e)&&g.isDate(t)&&e.getTime()===t.getTime();if((!g.isArray(e)||!g.isArray(t))&&(g.isArray(e)||g.isArray(t))||void 0===e||void 0===t)return!1;try{r=Object.keys(e),n=Object.keys(t)}catch(e){return!1}if(r.length!==n.length)return!1;for(o=0;o<r.length;o+=1){if(-1===n.indexOf(r[o]))return!1;if(!d(e[r[o]],t[r[o]]))return!1}return!0}function v(e,t){return!("string"!=typeof e&&"number"!=typeof e&&!g.isDate(e)&&"string"!=typeof t&&"number"!=typeof t&&!g.isDate(t))&&typeof e==typeof t}function y(e,t){var r,n,o,i;if(s(e)||s(t))return m({needAKey:e},"needAKey",t);for(r=Object.keys(t),i=0;i<r.length;i+=1)if(n=r[i],o=t[n],"$"===n[0]){if(!P[n])throw new Error("Unknown logical operator "+n);if(!P[n](e,o))return!1}else if(!m(e,n,o))return!1;return!0}function m(e,t,r,n){var o,i,a,s,u=p(e,t);if(g.isArray(u)&&!n){if(g.isArray(r))return m(e,t,r,!0);if(null!==r&&"object"==typeof r&&!g.isRegExp(r))for(i=Object.keys(r),o=0;o<i.length;o+=1)if(x[i[o]])return m(e,t,r,!0);for(o=0;o<u.length;o+=1)if(m({k:u[o]},"k",r))return!0;return!1}if(null!==r&&"object"==typeof r&&!g.isRegExp(r)&&!g.isArray(r)){if(i=Object.keys(r),a=b.map(i,function(e){return e[0]}),s=b.filter(a,function(e){return"$"===e}),0!==s.length&&s.length!==a.length)throw new Error("You cannot mix operators and normal fields");if(s.length>0){for(o=0;o<i.length;o+=1){if(!E[i[o]])throw new Error("Unknown comparison function "+i[o]);if(!E[i[o]](u,r[i[o]]))return!1}return!0}}return g.isRegExp(r)?E.$regex(u,r):!!d(u,r)}var g=e("util"),b=e("underscore"),w={},_={},E={},P={},x={};_.$set=function(e,t,r){e[t]=r},_.$unset=function(e,t){delete e[t]},_.$push=function(e,t,r){if(e.hasOwnProperty(t)||(e[t]=[]),!g.isArray(e[t]))throw new Error("Can't $push an element on non-array values");if(null!==r&&"object"==typeof r&&r.$each){if(Object.keys(r).length>1)throw new Error("Can't use another field in conjunction with $each");if(!g.isArray(r.$each))throw new Error("$each requires an array value");r.$each.forEach(function(r){e[t].push(r)})}else e[t].push(r)},_.$addToSet=function(e,t,r){var n=!0;if(e.hasOwnProperty(t)||(e[t]=[]),!g.isArray(e[t]))throw new Error("Can't $addToSet an element on non-array values");if(null!==r&&"object"==typeof r&&r.$each){if(Object.keys(r).length>1)throw new Error("Can't use another field in conjunction with $each");if(!g.isArray(r.$each))throw new Error("$each requires an array value");r.$each.forEach(function(r){_.$addToSet(e,t,r)})}else e[t].forEach(function(e){0===f(e,r)&&(n=!1)}),n&&e[t].push(r)},_.$pop=function(e,t,r){if(!g.isArray(e[t]))throw new Error("Can't $pop an element from non-array values");if("number"!=typeof r)throw new Error(r+" isn't an integer, can't use it with $pop");0!==r&&(e[t]=r>0?e[t].slice(0,e[t].length-1):e[t].slice(1))},_.$pull=function(e,t,r){var n,o;if(!g.isArray(e[t]))throw new Error("Can't $pull an element from non-array values");for(n=e[t],o=n.length-1;o>=0;o-=1)y(n[o],r)&&n.splice(o,1)},_.$inc=function(e,t,r){if("number"!=typeof r)throw new Error(r+" must be a number");if("number"!=typeof e[t]){if(b.has(e,t))throw new Error("Don't use the $inc modifier on non-number fields");e[t]=r}else e[t]+=r},Object.keys(_).forEach(function(e){w[e]=l(e)}),E.$lt=function(e,t){return v(e,t)&&t>e},E.$lte=function(e,t){return v(e,t)&&t>=e},E.$gt=function(e,t){return v(e,t)&&e>t},E.$gte=function(e,t){return v(e,t)&&e>=t},E.$ne=function(e,t){return void 0===e||!d(e,t)},E.$in=function(e,t){var r;if(!g.isArray(t))throw new Error("$in operator called with a non-array");for(r=0;r<t.length;r+=1)if(d(e,t[r]))return!0;return!1},E.$nin=function(e,t){if(!g.isArray(t))throw new Error("$nin operator called with a non-array");return!E.$in(e,t)},E.$regex=function(e,t){if(!g.isRegExp(t))throw new Error("$regex operator called with non regular expression");return"string"==typeof e&&t.test(e)},E.$exists=function(e,t){return t=!(!t&&""!==t),void 0===e?!t:t},E.$size=function(e,t){if(!g.isArray(e))return!1;if(0!=t%1)throw new Error("$size operator called without an integer");return e.length==t},x.$size=!0,P.$or=function(e,t){var r;if(!g.isArray(t))throw new Error("$or operator used without an array");for(r=0;r<t.length;r+=1)if(y(e,t[r]))return!0;return!1},P.$and=function(e,t){var r;if(!g.isArray(t))throw new Error("$and operator used without an array");for(r=0;r<t.length;r+=1)if(!y(e,t[r]))return!1;return!0},P.$not=function(e,t){return!y(e,t)},P.$where=function(e,t){var r;if(!b.isFunction(t))throw new Error("$where operator used without a function");if(r=t.call(e),!b.isBoolean(r))throw new Error("$where function must return boolean");return r},t.exports.serialize=o,t.exports.deserialize=i,t.exports.deepCopy=a,t.exports.checkObject=n,t.exports.isPrimitiveType=s,t.exports.modify=h,t.exports.getDotValue=p,t.exports.match=y,t.exports.areThingsEqual=d,t.exports.compareThings=f},{underscore:19,util:3}],11:[function(e,t){function r(e){var t,n,o;if(this.db=e.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=void 0!==e.corruptAlertThreshold?e.corruptAlertThreshold:.1,!this.inMemoryOnly&&this.filename&&"~"===this.filename.charAt(this.filename.length-1))throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files");if(e.afterSerialization&&!e.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss");if(!e.afterSerialization&&e.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss");for(this.afterSerialization=e.afterSerialization||function(e){return e},this.beforeDeserialization=e.beforeDeserialization||function(e){return e},t=1;30>t;t+=1)for(n=0;10>n;n+=1)if(o=u.uid(t),this.beforeDeserialization(this.afterSerialization(o))!==o)throw new Error("beforeDeserialization is not the reverse of afterSerialization, cautiously refusing to start NeDB to prevent dataloss");this.filename&&e.nodeWebkitAppName&&(console.log("=================================================================="),console.log("WARNING: The nodeWebkitAppName option is deprecated"),console.log("To get the path to the directory where Node Webkit stores the data"),console.log("for your app, use the internal nw.gui module like this"),console.log("require('nw.gui').App.dataPath"),console.log("See https://github.com/rogerwang/node-webkit/issues/500"),console.log("=================================================================="),this.filename=r.getNWAppFilename(e.nodeWebkitAppName,this.filename))}var n=e("__browserify_process"),o=e("./storage"),i=e("path"),a=e("./model"),s=e("async"),u=e("./customUtils"),c=e("./indexes");r.ensureDirectoryExists=function(e,t){var r=t||function(){};o.mkdirp(e,function(e){return r(e)})},r.getNWAppFilename=function(e,t){var r;switch(n.platform){case"win32":case"win64":if(!(r=n.env.LOCALAPPDATA||n.env.APPDATA))throw new Error("Couldn't find the base application data folder");r=i.join(r,e);break;case"darwin":if(!(r=n.env.HOME))throw new Error("Couldn't find the base application data directory");r=i.join(r,"Library","Application Support",e);break;case"linux":if(!(r=n.env.HOME))throw new Error("Couldn't find the base application data directory");r=i.join(r,".config",e);break;default:throw new Error("Can't use the Node Webkit relative path for platform "+n.platform)}return i.join(r,"nedb-data",t)},r.prototype.persistCachedDatabase=function(e){var t=e||function(){},r="",n=this;return this.inMemoryOnly?t(null):(this.db.getAllData().forEach(function(e){r+=n.afterSerialization(a.serialize(e))+"\n"}),Object.keys(this.db.indexes).forEach(function(e){"_id"!=e&&(r+=n.afterSerialization(a.serialize({$$indexCreated:{fieldName:e,unique:n.db.indexes[e].unique,sparse:n.db.indexes[e].sparse}}))+"\n")}),void o.crashSafeWriteFile(this.filename,r,function(e){return e?t(e):(n.db.emit("compaction.done"),t(null))}))},r.prototype.compactDatafile=function(){this.db.executor.push({this:this,fn:this.persistCachedDatabase,arguments:[]})},r.prototype.setAutocompactionInterval=function(e){var t=this,r=Math.max(e||0,5e3);this.stopAutocompaction(),this.autocompactionIntervalId=setInterval(function(){t.compactDatafile()},r)},r.prototype.stopAutocompaction=function(){this.autocompactionIntervalId&&clearInterval(this.autocompactionIntervalId)},r.prototype.persistNewState=function(e,t){var r=this,n="",i=t||function(){};return r.inMemoryOnly?i(null):(e.forEach(function(e){n+=r.afterSerialization(a.serialize(e))+"\n"}),0===n.length?i(null):void o.appendFile(r.filename,n,"utf8",function(e){return i(e)}))},r.prototype.treatRawData=function(e){var t,r=e.split("\n"),n={},o=[],i={},s=-1;for(t=0;t<r.length;t+=1){var u;try{u=a.deserialize(this.beforeDeserialization(r[t])),u._id?!0===u.$$deleted?delete n[u._id]:n[u._id]=u:u.$$indexCreated&&void 0!=u.$$indexCreated.fieldName?i[u.$$indexCreated.fieldName]=u.$$indexCreated:"string"==typeof u.$$indexRemoved&&delete i[u.$$indexRemoved]}catch(e){s+=1}}if(r.length>0&&s/r.length>this.corruptAlertThreshold)throw new Error("More than "+Math.floor(100*this.corruptAlertThreshold)+"% of the data file is corrupt, the wrong beforeDeserialization hook may be used. Cautiously refusing to start NeDB to prevent dataloss");return Object.keys(n).forEach(function(e){o.push(n[e])}),{data:o,indexes:i}},r.prototype.loadDatabase=function(e){var t=e||function(){},n=this;return n.db.resetIndexes(),n.inMemoryOnly?t(null):void s.waterfall([function(e){r.ensureDirectoryExists(i.dirname(n.filename),function(){o.ensureDatafileIntegrity(n.filename,function(){o.readFile(n.filename,"utf8",function(t,r){if(t)return e(t);try{var o=n.treatRawData(r)}catch(t){return e(t)}Object.keys(o.indexes).forEach(function(e){n.db.indexes[e]=new c(o.indexes[e])});try{n.db.resetIndexes(o.data)}catch(t){return n.db.resetIndexes(),e(t)}n.db.persistence.persistCachedDatabase(e)})})})}],function(e){return e?t(e):(n.db.executor.processBuffer(),t(null))})},t.exports=r},{"./customUtils":6,"./indexes":9,"./model":10,"./storage":12,__browserify_process:4,async:13,path:2}],12:[function(e,t){function r(e,t){f.getItem(e,function(e,r){return t(null!==r?!0:!1)})}function n(e,t,r){f.getItem(e,function(n,o){null===o?f.removeItem(t,function(){return r()}):f.setItem(t,o,function(){f.removeItem(e,function(){return r()})})})}function o(e,t,r,n){"function"==typeof r&&(n=r),f.setItem(e,t,function(){return n()})}function i(e,t,r,n){"function"==typeof r&&(n=r),f.getItem(e,function(r,o){o=o||"",o+=t,f.setItem(e,o,function(){return n()})})}function a(e,t,r){"function"==typeof t&&(r=t),f.getItem(e,function(e,t){return r(null,t||"")})}function s(e,t){f.removeItem(e,function(){return t()})}function u(e,t){return t()}function c(e,t){return t(null)}var f=e("localforage");f.config({name:"NeDB",storeName:"nedbdata"}),t.exports.exists=r,t.exports.rename=n,t.exports.writeFile=o,t.exports.crashSafeWriteFile=o,t.exports.appendFile=i,t.exports.readFile=a,t.exports.unlink=s,t.exports.mkdirp=u,t.exports.ensureDatafileIntegrity=c},{localforage:18}],13:[function(r,n){var o=r("__browserify_process");!function(){function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(i,arguments)}}var i,a,s={};i=this,null!=i&&(a=i.async),s.noConflict=function(){return i.async=a,s};var u=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r+=1)t(e[r],r,e)},c=function(e,t){if(e.map)return e.map(t);var r=[];return u(e,function(e,n,o){r.push(t(e,n,o))}),r},f=function(e,t,r){return e.reduce?e.reduce(t,r):(u(e,function(e,n,o){r=t(r,e,n,o)}),r)},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};void 0!==o&&o.nextTick?(s.nextTick=o.nextTick,s.setImmediate=void 0!==t?function(e){t(e)}:s.nextTick):"function"==typeof t?(s.nextTick=function(e){t(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(e,t,n){if(n=n||function(){},!e.length)return n();var o=0;u(e,function(i){t(i,r(function(t){t?(n(t),n=function(){}):(o+=1)>=e.length&&n(null)}))})},s.forEach=s.each,s.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,o=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r(null):o())})};o()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,r,n){h(t).apply(null,[e,r,n])},s.forEachLimit=s.eachLimit;var h=function(e){return function(t,r,n){if(n=n||function(){},!t.length||0>=e)return n();var o=0,i=0,a=0;!function s(){if(o>=t.length)return n();for(;e>a&&i<t.length;)i+=1,a+=1,r(t[i-1],function(e){e?(n(e),n=function(){}):(o+=1,a-=1,o>=t.length?n():s())})}()}},p=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},d=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[h(e)].concat(r))}},v=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},y=function(e,t,r,n){var o=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r,n){o[e.index]=n,t(r)})},function(e){n(e,o)})};s.map=p(y),s.mapSeries=v(y),s.mapLimit=function(e,t,r,n){return m(t)(e,r,n)};var m=function(e){return d(e,y)};s.reduce=function(e,t,r,n){s.eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,r,n){var o=c(e,function(e){return e}).reverse();s.reduce(o,t,r,n)},s.foldr=s.reduceRight;var g=function(e,t,r,n){var o=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&o.push(e),t()})},function(){n(c(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=p(g),s.filterSeries=v(g),s.select=s.filter,s.selectSeries=s.filterSeries;var b=function(e,t,r,n){var o=[];t=c(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||o.push(e),t()})},function(){n(c(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=p(b),s.rejectSeries=v(b);var w=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(){n()})};s.detect=p(w),s.detectSeries=v(w),s.some=function(e,t,r){s.each(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(){r(!1)})},s.any=s.some,s.every=function(e,t,r){s.each(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(){r(!0)})},s.all=s.every,s.sortBy=function(e,t,r){s.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);var n=function(e,t){var r=e.criteria,n=t.criteria;return n>r?-1:r>n?1:0};r(null,c(t.sort(n),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var r=l(e);if(!r.length)return t(null);var n={},o=[],i=function(e){o.unshift(e)},a=function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)},c=function(){u(o.slice(0),function(e){e()})};i(function(){l(n).length===r.length&&(t(null,n),t=function(){})}),u(r,function(r){var o=e[r]instanceof Function?[e[r]]:e[r],h=function(e){var o=Array.prototype.slice.call(arguments,1);if(o.length<=1&&(o=o[0]),e){var i={};u(l(n),function(e){i[e]=n[e]}),i[r]=o,t(e,i),t=function(){}}else n[r]=o,s.setImmediate(c)},p=o.slice(0,Math.abs(o.length-1))||[],d=function(){return f(p,function(e,t){return e&&n.hasOwnProperty(t)},!0)&&!n.hasOwnProperty(r)};if(d())o[o.length-1](h,n);else{var v=function(){d()&&(a(v),o[o.length-1](h,n))};i(v)}})},s.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),i=e.next();i?o.push(n(i)):o.push(t),s.setImmediate(function(){e.apply(null,o)})}}};n(s.iterator(e))()};var _=function(e,t,r){if(r=r||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.each(l(t),function(e,r){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[e]=o,r(t)})},function(e){r(e,n)})}};s.parallel=function(e,t){_({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,r){_({map:m(t),each:h(t)},e,r)},s.series=function(e,t){if(t=t||function(){},e.constructor===Array)s.mapSeries(e,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},t);else{var r={};s.eachSeries(l(e),function(t,n){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[t]=o,n(e)})},function(e){t(e,r)})}},s.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var E=function(e,t,r,n){var o=[];e(t,function(e,t){r(e,function(e,r){o=o.concat(r||[]),t(e)})},function(e){n(e,o)})};s.concat=p(E),s.concatSeries=v(E),s.whilst=function(e,t,r){e()?t(function(n){return n?r(n):void s.whilst(e,t,r)}):r()},s.doWhilst=function(e,t,r){e(function(n){return n?r(n):void(t()?s.doWhilst(e,t,r):r())})},s.until=function(e,t,r){e()?r():t(function(n){return n?r(n):void s.until(e,t,r)})},s.doUntil=function(e,t,r){e(function(n){return n?r(n):void(t()?r():s.doUntil(e,t,r))})},s.queue=function(e,t){function n(e,r,n,o){r.constructor!==Array&&(r=[r]),u(r,function(r){var i={data:r,callback:"function"==typeof o?o:null};n?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===t&&e.saturated(),s.setImmediate(e.process)})}void 0===t&&(t=1);var o=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,t){n(i,e,!1,t)},unshift:function(e,t){n(i,e,!0,t)},process:function(){if(o<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),o+=1;var n=function(){o-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&0===i.tasks.length+o&&i.drain(),i.process()},a=r(n);e(t.data,a)}},length:function(){return i.tasks.length},running:function(){return o}};return i},s.cargo=function(e,t){var r=!1,n=[],o={tasks:n,payload:t,saturated:null,empty:null,drain:null,push:function(e,r){e.constructor!==Array&&(e=[e]),u(e,function(e){n.push({data:e,callback:"function"==typeof r?r:null}),o.saturated&&n.length===t&&o.saturated()}),s.setImmediate(o.process)},process:function i(){if(!r){if(0===n.length)return void(o.drain&&o.drain());var a="number"==typeof t?n.splice(0,t):n.splice(0),s=c(a,function(e){return e.data});o.empty&&o.empty(),r=!0,e(s,function(){r=!1;var e=arguments;u(a,function(t){t.callback&&t.callback.apply(null,e)}),i()})}},length:function(){return n.length},running:function(){return r}};return o};var P=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&u(r,function(t){console[e](t)}))}]))}};s.log=P("log"),s.dir=P("dir"),s.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var o=function(){var o=Array.prototype.slice.call(arguments),i=o.pop(),a=t.apply(null,o);a in r?i.apply(null,r[a]):a in n?n[a].push(i):(n[a]=[i],e.apply(null,o.concat([function(){r[a]=arguments;var e=n[a];delete n[a];for(var t=0,o=e.length;o>t;t++)e[t].apply(null,arguments)}])))};return o.memo=r,o.unmemoized=e,o},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,r){for(var n=[],o=0;e>o;o++)n.push(o);return s.map(n,t,r)},s.timesSeries=function(e,t,r){for(var n=[],o=0;e>o;o++)n.push(o);return s.mapSeries(n,t,r)},s.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();s.reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}};var x=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),o=n.pop();return e(t,function(e,t){e.apply(r,n.concat([t]))},o)};if(arguments.length>2){return r.apply(this,Array.prototype.slice.call(arguments,2))}return r};s.applyEach=p(x),s.applyEachSeries=v(x),s.forever=function(e,t){function r(n){if(n){if(t)return t(n);throw n}e(r)}r()},void 0!==e&&e.amd?e([],function(){return s}):void 0!==n&&n.exports?n.exports=s:i.async=s}()},{__browserify_process:4}],14:[function(e,t){t.exports.BinarySearchTree=e("./lib/bst"),t.exports.AVLTree=e("./lib/avltree")},{"./lib/avltree":15,"./lib/bst":16}],15:[function(e,t){function r(e){this.tree=new n(e)}function n(e){e=e||{},this.left=null,this.right=null,this.parent=void 0!==e.parent?e.parent:null,e.hasOwnProperty("key")&&(this.key=e.key),this.data=e.hasOwnProperty("value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||i.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||i.defaultCheckValueEquality}var o=e("./bst"),i=e("./customUtils"),a=e("util");e("underscore"),a.inherits(n,o),r._AVLTree=n,n.prototype.checkHeightCorrect=function(){var e,t;if(this.hasOwnProperty("key")){if(this.left&&void 0===this.left.height)throw new Error("Undefined height for node "+this.left.key);if(this.right&&void 0===this.right.height)throw new Error("Undefined height for node "+this.right.key);if(void 0===this.height)throw new Error("Undefined height for node "+this.key);if(e=this.left?this.left.height:0,t=this.right?this.right.height:0,this.height!==1+Math.max(e,t))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}},n.prototype.balanceFactor=function(){return(this.left?this.left.height:0)-(this.right?this.right.height:0)},n.prototype.checkBalanceFactors=function(){if(Math.abs(this.balanceFactor())>1)throw new Error("Tree is unbalanced at node "+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()},n.prototype.checkIsAVLT=function(){n.super_.prototype.checkIsBST.call(this),this.checkHeightCorrect(),this.checkBalanceFactors()},r.prototype.checkIsAVLT=function(){this.tree.checkIsAVLT()},n.prototype.rightRotation=function(){var e,t,r,n,o=this,i=this.left;return i?(e=i.right,o.parent?(i.parent=o.parent,o.parent.left===o?o.parent.left=i:o.parent.right=i):i.parent=null,i.right=o,o.parent=i,o.left=e,e&&(e.parent=o),t=i.left?i.left.height:0,r=e?e.height:0,n=o.right?o.right.height:0,o.height=Math.max(r,n)+1,i.height=Math.max(t,o.height)+1,i):this},n.prototype.leftRotation=function(){var e,t,r,n,o=this,i=this.right;return i?(e=i.left,o.parent?(i.parent=o.parent,o.parent.left===o?o.parent.left=i:o.parent.right=i):i.parent=null,i.left=o,o.parent=i,o.right=e,e&&(e.parent=o),t=o.left?o.left.height:0,r=e?e.height:0,n=i.right?i.right.height:0,o.height=Math.max(t,r)+1,i.height=Math.max(n,o.height)+1,i):this},n.prototype.rightTooSmall=function(){return this.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())},n.prototype.leftTooSmall=function(){return this.balanceFactor()>=-1?this:(this.right.balanceFactor()>0&&this.right.rightRotation(),this.leftRotation())},n.prototype.rebalanceAlongPath=function(e){var t,r,n=this;if(!this.hasOwnProperty("key"))return delete this.height,this;for(r=e.length-1;r>=0;r-=1)e[r].height=1+Math.max(e[r].left?e[r].left.height:0,e[r].right?e[r].right.height:0),e[r].balanceFactor()>1&&(t=e[r].rightTooSmall(),0===r&&(n=t)),e[r].balanceFactor()<-1&&(t=e[r].leftTooSmall(),0===r&&(n=t));return n},n.prototype.insert=function(e,t){var r=[],n=this;if(!this.hasOwnProperty("key"))return this.key=e,this.data.push(t),this.height=1,this;for(;;){if(0===n.compareKeys(n.key,e)){if(n.unique){var o=new Error("Can't insert key "+e+", it violates the unique constraint");throw o.key=e,o.errorType="uniqueViolated",o}return n.data.push(t),this}if(r.push(n),n.compareKeys(e,n.key)<0){if(!n.left){r.push(n.createLeftChild({key:e,value:t}));break}n=n.left}else{if(!n.right){r.push(n.createRightChild({key:e,value:t}));break}n=n.right}}return this.rebalanceAlongPath(r)},r.prototype.insert=function(e,t){var r=this.tree.insert(e,t);r&&(this.tree=r)},n.prototype.delete=function(e,t){var r,n=[],o=this,i=[];if(!this.hasOwnProperty("key"))return this;for(;0!==o.compareKeys(e,o.key);)if(i.push(o),o.compareKeys(e,o.key)<0){if(!o.left)return this;o=o.left}else{if(!o.right)return this;o=o.right}if(o.data.length>1&&t)return o.data.forEach(function(e){o.checkValueEquality(e,t)||n.push(e)}),o.data=n,this;if(!o.left&&!o.right)return o===this?(delete o.key,o.data=[],delete o.height,this):(o.parent.left===o?o.parent.left=null:o.parent.right=null,this.rebalanceAlongPath(i));if(!o.left||!o.right)return r=o.left?o.left:o.right,o===this?(r.parent=null,r):(o.parent.left===o?(o.parent.left=r,r.parent=o.parent):(o.parent.right=r,r.parent=o.parent),this.rebalanceAlongPath(i));if(i.push(o),r=o.left,!r.right)return o.key=r.key,o.data=r.data,o.left=r.left,r.left&&(r.left.parent=o),this.rebalanceAlongPath(i);for(;r.right;)i.push(r),r=r.right;return o.key=r.key,o.data=r.data,r.parent.right=r.left,r.left&&(r.left.parent=r.parent),this.rebalanceAlongPath(i)},r.prototype.delete=function(e,t){var r=this.tree.delete(e,t);r&&(this.tree=r)},["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach(function(e){r.prototype[e]=function(){return this.tree[e].apply(this.tree,arguments)}}),t.exports=r},{"./bst":16,"./customUtils":17,underscore:19,util:3}],16:[function(e,t){function r(e){e=e||{},this.left=null,this.right=null,this.parent=void 0!==e.parent?e.parent:null,e.hasOwnProperty("key")&&(this.key=e.key),this.data=e.hasOwnProperty("value")?[e.value]:[],this.unique=e.unique||!1,this.compareKeys=e.compareKeys||o.defaultCompareKeysFunction,this.checkValueEquality=e.checkValueEquality||o.defaultCheckValueEquality}function n(e,t){var r;for(r=0;r<t.length;r+=1)e.push(t[r])}var o=e("./customUtils");r.prototype.getMaxKeyDescendant=function(){return this.right?this.right.getMaxKeyDescendant():this},r.prototype.getMaxKey=function(){return this.getMaxKeyDescendant().key},r.prototype.getMinKeyDescendant=function(){return this.left?this.left.getMinKeyDescendant():this},r.prototype.getMinKey=function(){return this.getMinKeyDescendant().key},r.prototype.checkAllNodesFullfillCondition=function(e){this.hasOwnProperty("key")&&(e(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(e),this.right&&this.right.checkAllNodesFullfillCondition(e))},r.prototype.checkNodeOrdering=function(){var e=this;this.hasOwnProperty("key")&&(this.left&&(this.left.checkAllNodesFullfillCondition(function(t){if(e.compareKeys(t,e.key)>=0)throw new Error("Tree with root "+e.key+" is not a binary search tree")}),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition(function(t){if(e.compareKeys(t,e.key)<=0)throw new Error("Tree with root "+e.key+" is not a binary search tree")}),this.right.checkNodeOrdering()))},r.prototype.checkInternalPointers=function(){if(this.left){if(this.left.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error("Parent pointer broken for key "+this.key);this.right.checkInternalPointers()}},r.prototype.checkIsBST=function(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error("The root shouldn't have a parent")},r.prototype.getNumberOfKeys=function(){var e;return this.hasOwnProperty("key")?(e=1,this.left&&(e+=this.left.getNumberOfKeys()),this.right&&(e+=this.right.getNumberOfKeys()),e):0},r.prototype.createSimilar=function(e){return e=e||{},e.unique=this.unique,e.compareKeys=this.compareKeys,e.checkValueEquality=this.checkValueEquality,new this.constructor(e)},r.prototype.createLeftChild=function(e){var t=this.createSimilar(e);return t.parent=this,this.left=t,t},r.prototype.createRightChild=function(e){var t=this.createSimilar(e);return t.parent=this,this.right=t,t},r.prototype.insert=function(e,t){if(!this.hasOwnProperty("key"))return this.key=e,void this.data.push(t);if(0===this.compareKeys(this.key,e)){if(this.unique){var r=new Error("Can't insert key "+e+", it violates the unique constraint");throw r.key=e,r.errorType="uniqueViolated",r}return void this.data.push(t)}this.compareKeys(e,this.key)<0?this.left?this.left.insert(e,t):this.createLeftChild({key:e,value:t}):this.right?this.right.insert(e,t):this.createRightChild({key:e,value:t})},r.prototype.search=function(e){return this.hasOwnProperty("key")?0===this.compareKeys(this.key,e)?this.data:this.compareKeys(e,this.key)<0?this.left?this.left.search(e):[]:this.right?this.right.search(e):[]:[]},r.prototype.getLowerBoundMatcher=function(e){var t=this;return e.hasOwnProperty("$gt")||e.hasOwnProperty("$gte")?e.hasOwnProperty("$gt")&&e.hasOwnProperty("$gte")?0===t.compareKeys(e.$gte,e.$gt)?function(r){return t.compareKeys(r,e.$gt)>0}:t.compareKeys(e.$gte,e.$gt)>0?function(r){return t.compareKeys(r,e.$gte)>=0}:function(r){return t.compareKeys(r,e.$gt)>0}:e.hasOwnProperty("$gt")?function(r){return t.compareKeys(r,e.$gt)>0}:function(r){return t.compareKeys(r,e.$gte)>=0}:function(){return!0}},r.prototype.getUpperBoundMatcher=function(e){var t=this;return e.hasOwnProperty("$lt")||e.hasOwnProperty("$lte")?e.hasOwnProperty("$lt")&&e.hasOwnProperty("$lte")?0===t.compareKeys(e.$lte,e.$lt)?function(r){return t.compareKeys(r,e.$lt)<0}:t.compareKeys(e.$lte,e.$lt)<0?function(r){return t.compareKeys(r,e.$lte)<=0}:function(r){return t.compareKeys(r,e.$lt)<0}:e.hasOwnProperty("$lt")?function(r){return t.compareKeys(r,e.$lt)<0}:function(r){return t.compareKeys(r,e.$lte)<=0}:function(){return!0}},r.prototype.betweenBounds=function(e,t,r){var o=[];return this.hasOwnProperty("key")?(t=t||this.getLowerBoundMatcher(e),r=r||this.getUpperBoundMatcher(e),t(this.key)&&this.left&&n(o,this.left.betweenBounds(e,t,r)),t(this.key)&&r(this.key)&&n(o,this.data),r(this.key)&&this.right&&n(o,this.right.betweenBounds(e,t,r)),o):[]},r.prototype.deleteIfLeaf=function(){return!this.left&&!this.right&&(this.parent?(this.parent.left===this?this.parent.left=null:this.parent.right=null,!0):(delete this.key,this.data=[],!0))},r.prototype.deleteIfOnlyOneChild=function(){var e;return this.left&&!this.right&&(e=this.left),!this.left&&this.right&&(e=this.right),!!e&&(this.parent?(this.parent.left===this?(this.parent.left=e,e.parent=this.parent):(this.parent.right=e,e.parent=this.parent),!0):(this.key=e.key,this.data=e.data,this.left=null,e.left&&(this.left=e.left,e.left.parent=this),this.right=null,e.right&&(this.right=e.right,e.right.parent=this),!0))},r.prototype.delete=function(e,t){var r,n=[],o=this;if(this.hasOwnProperty("key")){if(this.compareKeys(e,this.key)<0)return void(this.left&&this.left.delete(e,t));if(this.compareKeys(e,this.key)>0)return void(this.right&&this.right.delete(e,t));if(0!==!this.compareKeys(e,this.key))return this.data.length>1&&void 0!==t?(this.data.forEach(function(e){o.checkValueEquality(e,t)||n.push(e)}),void(o.data=n)):void(this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(Math.random()>=.5?(r=this.left.getMaxKeyDescendant(),this.key=r.key,this.data=r.data,this===r.parent?(this.left=r.left,r.left&&(r.left.parent=r.parent)):(r.parent.right=r.left,r.left&&(r.left.parent=r.parent))):(r=this.right.getMinKeyDescendant(),this.key=r.key,this.data=r.data,this===r.parent?(this.right=r.right,r.right&&(r.right.parent=r.parent)):(r.parent.left=r.right,r.right&&(r.right.parent=r.parent)))))}},r.prototype.executeOnEveryNode=function(e){this.left&&this.left.executeOnEveryNode(e),e(this),this.right&&this.right.executeOnEveryNode(e)},r.prototype.prettyPrint=function(e,t){t=t||"",console.log(t+"* "+this.key),e&&console.log(t+"* "+this.data),(this.left||this.right)&&(this.left?this.left.prettyPrint(e,t+"  "):console.log(t+"  *"),this.right?this.right.prettyPrint(e,t+"  "):console.log(t+"  *"))},t.exports=r},{"./customUtils":17}],17:[function(e,t){function r(e){var t,n;return 0===e?[]:1===e?[0]:(t=r(e-1),n=Math.floor(Math.random()*e),t.splice(n,0,e-1),t)}function n(e,t){if(t>e)return-1;if(e>t)return 1;if(e===t)return 0;var r=new Error("Couldn't compare elements");throw r.a=e,r.b=t,r}function o(e,t){return e===t}t.exports.getRandomArray=r,t.exports.defaultCompareKeysFunction=n,t.exports.defaultCheckValueEquality=o},{}],18:[function(t,r,n){var o=t("__browserify_process"),i=self;!function(){var e,t,r,n;!function(){var o={},i={};e=function(e,t,r){o[e]={deps:t,callback:r}},n=r=t=function(e){if(n._eak_seen=o,i[e])return i[e];if(i[e]={},!o[e])throw new Error("Could not find module "+e);for(var r,a=o[e],s=a.deps,u=a.callback,c=[],f=0,l=s.length;l>f;f++)"exports"===s[f]?c.push(r={}):c.push(t(function(t){if("."!==t.charAt(0))return t;for(var r=t.split("/"),n=e.split("/").slice(0,-1),o=0,i=r.length;i>o;o++){var a=r[o];if(".."===a)n.pop();else{if("."===a)continue;n.push(a)}}return n.join("/")}(s[f])));var h=u.apply(this,c);return i[e]=r||h}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to all.");return new t(function(t,r){function n(e,r){a[e]=r,0==--s&&t(a)}var i,a=[],s=e.length;0===s&&t([]);for(var u=0;u<e.length;u++)i=e[u],i&&o(i.then)?i.then(function(e){return function(t){n(e,t)}}(u),r):n(u,i)})}var n=e.isArray,o=e.isFunction;t.all=r}),e("promise/asap",["exports"],function(e){"use strict";function t(){for(var e=0;e<c.length;e++){var t=c[e];(0,t[0])(t[1])}c=[]}function r(e,t){1===c.push([e,t])&&n()}var n,a="undefined"!=typeof window?window:{},s=a.MutationObserver||a.WebKitMutationObserver,u=void 0!==i?i:void 0===this?window:this,c=[];n=void 0!==o&&"[object process]"==={}.toString.call(o)?function(){return function(){o.nextTick(t)}}():s?function(){var e=0,r=new s(t),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():function(){return function(){u.setTimeout(t,1)}}(),e.asap=r}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?r[e]:void(r[e]=t)}var r={instrument:!1};e.config=r,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,r){"use strict";function n(){var e;"Promise"in(e=void 0!==i?i:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),a(t)}()||(e.Promise=o)}var o=e.Promise,a=t.isFunction;r.polyfill=n}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,r,n,o,i,a,s){"use strict";function u(e){if(!_(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(e,this)}function c(e,t){function r(e){d(t,e)}function n(e){y(t,e)}try{e(r,n)}catch(e){n(e)}}function f(e,t,r,n){var o,i,a,s,u=_(r);if(u)try{o=r(n),a=!0}catch(e){s=!0,i=e}else o=n,a=!0;p(t,o)||(u&&a?d(t,o):s?y(t,i):e===j?d(t,o):e===I&&y(t,o))}function l(e,t,r,n){var o=e._subscribers,i=o.length;o[i]=t,o[i+j]=r,o[i+I]=n}function h(e,t){for(var r,n,o=e._subscribers,i=e._detail,a=0;a<o.length;a+=3)r=o[a],n=o[a+t],f(t,r,n,i);e._subscribers=null}function p(e,t){var r,n=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(w(t)&&(n=t.then,_(n)))return n.call(t,function(n){return!!r||(r=!0,void(t!==n?d(e,n):v(e,n)))},function(t){return!!r||(r=!0,void y(e,t))}),!0}catch(t){return!!r||(y(e,t),!0)}return!1}function d(e,t){e===t?v(e,t):p(e,t)||v(e,t)}function v(e,t){e._state===A&&(e._state=k,e._detail=t,b.async(m,e))}function y(e,t){e._state===A&&(e._state=k,e._detail=t,b.async(g,e))}function m(e){h(e,e._state=j)}function g(e){h(e,e._state=I)}var b=e.config;e.configure;var w=t.objectOrFunction,_=t.isFunction;t.now;var E=r.all,P=n.race,x=o.resolve,S=i.reject,O=a.asap;b.async=O;var A=void 0,k=0,j=1,I=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var r=this,n=new this.constructor(function(){});if(this._state){var o=arguments;b.async(function(){f(r._state,n,o[r._state-1],r._detail)})}else l(this,n,e,t);return n},catch:function(e){return this.then(null,e)}},u.all=E,u.race=P,u.resolve=x,u.reject=S,s.Promise=u}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to race.");return new t(function(t,r){for(var n,o=0;o<e.length;o++)n=e[o],n&&"function"==typeof n.then?n.then(t,r):t(n)})}var n=e.isArray;t.race=r}),e("promise/reject",["exports"],function(e){"use strict";function t(e){return new this(function(t,r){r(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return r(e)||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}var o=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=r,e.isArray=n,e.now=o}),t("promise/polyfill").polyfill()}(),function(t,o){"object"==typeof n&&"object"==typeof r?r.exports=o():"function"==typeof e&&e.amd?e([],o):"object"==typeof n?n.localforage=o():t.localforage=o()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,function(){function e(e,t){e[t]=function(){var r=arguments;return e.ready().then(function(){return e[t].apply(e,r)})}}function o(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(arguments[0][r]=h(t[r])?t[r].slice():t[r])}return arguments[0]}function i(e){for(var t in s)if(s.hasOwnProperty(t)&&s[t]===e)return!0;return!1}var a={},s={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},u=[s.INDEXEDDB,s.WEBSQL,s.LOCALSTORAGE],c=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],f={description:"",driver:u.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},l=function(e){var t=t||e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.OIndexedDB||e.msIndexedDB,r={};return r[s.WEBSQL]=!!e.openDatabase,r[s.INDEXEDDB]=!!function(){if(void 0!==e.openDatabase&&e.navigator&&e.navigator.userAgent&&/Safari/.test(e.navigator.userAgent)&&!/Chrome/.test(e.navigator.userAgent))return!1;try{return t&&"function"==typeof t.open&&void 0!==e.IDBKeyRange}catch(e){return!1}}(),r[s.LOCALSTORAGE]=!!function(){try{return e.localStorage&&"setItem"in e.localStorage&&e.localStorage.setItem}catch(e){return!1}}(),r}(this),h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=function(){function t(e){n(this,t),this.INDEXEDDB=s.INDEXEDDB,this.LOCALSTORAGE=s.LOCALSTORAGE,this.WEBSQL=s.WEBSQL,this._defaultConfig=o({},f),this._config=o({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return t.prototype.config=function(e){if("object"==typeof e){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},t.prototype.defineDriver=function(e,t,r){var n=new Promise(function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),s=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void r(o);if(i(e._driver))return void r(s);for(var u=c.concat("_initStorage"),f=0;f<u.length;f++){var h=u[f];if(!h||!e[h]||"function"!=typeof e[h])return void r(o)}var p=Promise.resolve(!0);"_support"in e&&(p=e._support&&"function"==typeof e._support?e._support():Promise.resolve(!!e._support)),p.then(function(r){l[n]=r,a[n]=e,t()},r)}catch(e){r(e)}});return n.then(t,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(e,t,n){var o=this,s=function(){if(i(e))switch(e){case o.INDEXEDDB:return new Promise(function(e){e(r(1))});case o.LOCALSTORAGE:return new Promise(function(e){e(r(2))});case o.WEBSQL:return new Promise(function(e){e(r(4))})}else if(a[e])return Promise.resolve(a[e]);return Promise.reject(new Error("Driver not found."))}();return s.then(t,n),s},t.prototype.getSerializer=function(e){var t=new Promise(function(e){e(r(3))});return e&&"function"==typeof e&&t.then(function(t){e(t)}),t},t.prototype.ready=function(e){var t=this,r=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return r.then(e,e),r},t.prototype.setDriver=function(e,t,r){function n(){i._config.driver=i.driver()}function o(e){return function(){function t(){for(;r<e.length;){var o=e[r];return r++,i._dbInfo=null,i._ready=null,i.getDriver(o).then(function(e){return i._extend(e),n(),i._ready=i._initStorage(i._config),i._ready}).catch(t)}n();var a=new Error("No available storage method found.");return i._driverSet=Promise.reject(a),i._driverSet}var r=0;return t()}}var i=this;h(e)||(e=[e]);var a=this._getSupportedDrivers(e),s=null!==this._driverSet?this._driverSet.catch(function(){return Promise.resolve()}):Promise.resolve();return this._driverSet=s.then(function(){var e=a[0];return i._dbInfo=null,i._ready=null,i.getDriver(e).then(function(e){i._driver=e._driver,n(),i._wrapLibraryMethodsWithReady(),i._initDriver=o(a)})}).catch(function(){n();var e=new Error("No available storage method found.");return i._driverSet=Promise.reject(e),i._driverSet}),this._driverSet.then(t,r),this._driverSet},t.prototype.supports=function(e){return!!l[e]},t.prototype._extend=function(e){o(this,e)},t.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;n>r;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<c.length;t++)e(this,c[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),d=new p;t.default=d}.call("undefined"!=typeof window?window:self),e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,function(){function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=P.BlobBuilder||P.MSBlobBuilder||P.MozBlobBuilder||P.WebKitBlobBuilder,n=new r,o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(t.type)}}function r(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;t>o;o++)n[o]=e.charCodeAt(o);return r}function n(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.open("GET",e),n.withCredentials=!0,n.responseType="arraybuffer",n.onreadystatechange=function(){return 4===n.readyState?200===n.status?t({response:n.response,type:n.getResponseHeader("Content-Type")}):void r({status:n.status,response:n.response}):void 0},n.send()})}function o(t){return new Promise(function(r,o){var i=e([""],{type:"image/png"}),a=t.transaction([A],"readwrite");a.objectStore(A).put(i,"key"),a.oncomplete=function(){var e=t.transaction([A],"readwrite"),i=e.objectStore(A).get("key");i.onerror=o,i.onsuccess=function(e){var t=e.target.result,o=URL.createObjectURL(t);n(o).then(function(e){r(!(!e||"image/png"!==e.type))},function(){r(!1)}).then(function(){URL.revokeObjectURL(o)})}}}).catch(function(){return!1})}function i(e){return"boolean"==typeof S?Promise.resolve(S):o(e).then(function(e){return S=e})}function a(e){return new Promise(function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)})}function s(t){return e([r(atob(t.data))],{type:t.type})}function u(e){return e&&e.__local_forage_encoded_blob}function c(e){function t(){return Promise.resolve()}var r=this,n={db:null};if(e)for(var o in e)n[o]=e[o];O||(O={});var i=O[n.name];i||(i={forages:[],db:null},O[n.name]=i),i.forages.push(this);for(var a=[],s=0;s<i.forages.length;s++){var u=i.forages[s];u!==this&&a.push(u.ready().catch(t))}var c=i.forages.slice(0);return Promise.all(a).then(function(){return n.db=i.db,f(n)}).then(function(e){return n.db=e,p(n,r._defaultConfig.version)?l(n):e}).then(function(e){n.db=i.db=e,r._dbInfo=n;for(var t in c){var o=c[t];o!==r&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})}function f(e){return h(e,!1)}function l(e){return h(e,!0)}function h(e,t){return new Promise(function(r,n){if(e.db){if(!t)return r(e.db);e.db.close()}var o=[e.name];t&&o.push(e.version);var i=x.open.apply(x,o);t&&(i.onupgradeneeded=function(t){var r=i.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(A)}catch(r){if("ConstraintError"!==r.name)throw r;P.console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(){n(i.error)},i.onsuccess=function(){r(i.result)}})}function p(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&P.console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function d(e,t){var r=this;"string"!=typeof e&&(P.console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),u(e)&&(e=s(e)),t(e)},a.onerror=function(){n(a.error)}}).catch(n)});return E(n,t),n}function v(e,t){var r=this,n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=i.openCursor(),c=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;u(n)&&(n=s(n));var o=e(n,r.key,c++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}).catch(n)});return E(n,t),n}function y(e,t,r){var n=this;"string"!=typeof e&&(P.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new Promise(function(r,o){var s;n.ready().then(function(){return s=n._dbInfo,i(s.db)}).then(function(e){return!e&&t instanceof Blob?a(t):t}).then(function(t){var n=s.db.transaction(s.storeName,"readwrite"),i=n.objectStore(s.storeName);null===t&&(t=void 0);var a=i.put(t,e);n.oncomplete=function(){void 0===t&&(t=null),r(t)},n.onabort=n.onerror=function(){var e=a.error?a.error:a.transaction.error;o(e)}}).catch(o)});return E(o,r),o}function m(e,t){var r=this;"string"!=typeof e&&(P.console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName),s=a.delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;n(e)}}).catch(n)});return E(n,t),n}function g(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){var n=t._dbInfo,o=n.db.transaction(n.storeName,"readwrite"),i=o.objectStore(n.storeName),a=i.clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=a.error?a.error:a.transaction.error;r(e)}}).catch(r)});return E(r,e),r}function b(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){var n=t._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),i=o.count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}).catch(r)});return E(r,e),r}function w(e,t){var r=this,n=new Promise(function(t,n){return 0>e?void t(null):void r.ready().then(function(){var o=r._dbInfo,i=o.db.transaction(o.storeName,"readonly").objectStore(o.storeName),a=!1,s=i.openCursor();s.onsuccess=function(){var r=s.result;return r?void(0===e?t(r.key):a?t(r.key):(a=!0,r.advance(e))):void t(null)},s.onerror=function(){n(s.error)}}).catch(n)});return E(n,t),n}function _(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){var n=t._dbInfo,o=n.db.transaction(n.storeName,"readonly").objectStore(n.storeName),i=o.openCursor(),a=[];i.onsuccess=function(){var t=i.result;return t?(a.push(t.key),void t.continue()):void e(a)},i.onerror=function(){r(i.error)}}).catch(r)});return E(r,e),r}function E(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var P=this,x=x||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;if(x){var S,O,A="local-forage-detect-blob-support",k={_driver:"asyncStorage",_initStorage:c,iterate:v,getItem:d,setItem:y,removeItem:m,clear:g,length:b,key:w,keys:_};t.default=k}}.call("undefined"!=typeof window?window:self),e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,function(){function e(e){var t=this,n={};if(e)for(var o in e)n[o]=e[o];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,new Promise(function(e){e(r(3))}).then(function(e){return n.serializer=e,Promise.resolve()})}function n(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,r=p.length-1;r>=0;r--){var n=p.key(r);0===n.indexOf(e)&&p.removeItem(n)}});return l(r,e),r}function o(e,t){var r=this;"string"!=typeof e&&(h.console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then(function(){var t=r._dbInfo,n=p.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n});return l(n,t),n}function i(e,t){var r=this,n=r.ready().then(function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=p.length,a=1,s=0;i>s;s++){var u=p.key(s);if(0===u.indexOf(n)){var c=p.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(o),a++)))return c}}});return l(n,t),n}function a(e,t){var r=this,n=r.ready().then(function(){var t,n=r._dbInfo;try{t=p.key(e)}catch(e){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t});return l(n,t),n}function s(e){var t=this,r=t.ready().then(function(){for(var e=t._dbInfo,r=p.length,n=[],o=0;r>o;o++)0===p.key(o).indexOf(e.keyPrefix)&&n.push(p.key(o).substring(e.keyPrefix.length));return n});return l(r,e),r}function u(e){var t=this,r=t.keys().then(function(e){return e.length});return l(r,e),r}function c(e,t){var r=this;"string"!=typeof e&&(h.console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=r.ready().then(function(){var t=r._dbInfo;p.removeItem(t.keyPrefix+e)});return l(n,t),n}function f(e,t,r){var n=this;"string"!=typeof e&&(h.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=n.ready().then(function(){void 0===t&&(t=null);var r=t;return new Promise(function(o,i){var a=n._dbInfo;a.serializer.serialize(t,function(t,n){if(n)i(n);else try{p.setItem(a.keyPrefix+e,t),o(r)}catch(e){("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&i(e),i(e)}})})});return l(o,r),o}function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var h=this,p=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;p=this.localStorage}catch(e){return}var d={_driver:"localStorageWrapper",_initStorage:e,iterate:i,getItem:o,setItem:f,removeItem:c,clear:n,length:u,key:a,keys:s};t.default=d}.call("undefined"!=typeof window?window:self),e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,function(){function e(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var r=P.BlobBuilder||P.MSBlobBuilder||P.MozBlobBuilder||P.WebKitBlobBuilder,n=new r,o=0;o<e.length;o+=1)n.append(e[o]);return n.getBlob(t.type)}}function r(e,t){var r="";if(e&&(r=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var n,o=c;e instanceof ArrayBuffer?(n=e,o+=l):(n=e.buffer,"[object Int8Array]"===r?o+=p:"[object Uint8Array]"===r?o+=d:"[object Uint8ClampedArray]"===r?o+=v:"[object Int16Array]"===r?o+=y:"[object Uint16Array]"===r?o+=g:"[object Int32Array]"===r?o+=m:"[object Uint32Array]"===r?o+=b:"[object Float32Array]"===r?o+=w:"[object Float64Array]"===r?o+=_:t(new Error("Failed to get type for BinaryArray"))),t(o+i(n))}else if("[object Blob]"===r){var a=new FileReader;a.onload=function(){var r=s+e.type+"~"+i(this.result);t(c+h+r)},a.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(r){console.error("Couldn't convert value into a JSON string: ",e),t(null,r)}}function n(t){if(t.substring(0,f)!==c)return JSON.parse(t);var r,n=t.substring(E),i=t.substring(f,E);if(i===h&&u.test(n)){var a=n.match(u);r=a[1],n=n.substring(a[0].length)}var s=o(n);switch(i){case l:return s;case h:return e([s],{type:r});case p:return new Int8Array(s);case d:return new Uint8Array(s);case v:return new Uint8ClampedArray(s);case y:return new Int16Array(s);case g:return new Uint16Array(s);case m:return new Int32Array(s);case b:return new Uint32Array(s);case w:return new Float32Array(s);case _:return new Float64Array(s);default:throw new Error("Unkown type: "+i)}}function o(e){var t,r,n,o,i,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var f=new ArrayBuffer(s),l=new Uint8Array(f);for(t=0;u>t;t+=4)r=a.indexOf(e[t]),n=a.indexOf(e[t+1]),o=a.indexOf(e[t+2]),i=a.indexOf(e[t+3]),l[c++]=r<<2|n>>4,l[c++]=(15&n)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return f}function i(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=a[r[t]>>2],n+=a[(3&r[t])<<4|r[t+1]>>4],n+=a[(15&r[t+1])<<2|r[t+2]>>6],n+=a[63&r[t+2]];return 2==r.length%3?n=n.substring(0,n.length-1)+"=":1==r.length%3&&(n=n.substring(0,n.length-2)+"=="),n}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="~~local_forage_type~",u=/^~~local_forage_type~([^~]+)~/,c="__lfsc__:",f=c.length,l="arbf",h="blob",p="si08",d="ui08",v="uic8",y="si16",m="si32",g="ur16",b="ui32",w="fl32",_="fl64",E=f+l.length,P=this,x={serialize:r,deserialize:n,stringToBuffer:o,bufferToString:i};t.default=x}.call("undefined"!=typeof window?window:self),e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,function(){function e(e){var t=this,n={db:null};if(e)for(var o in e)n[o]="string"!=typeof e[o]?e[o].toString():e[o];var i=new Promise(function(r,o){try{n.db=p(n.name,String(n.version),n.description,n.size)}catch(n){return t.setDriver(t.LOCALSTORAGE).then(function(){return t._initStorage(e)}).then(r).catch(o)}n.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,r()},function(e,t){o(t)})})});return new Promise(function(e){e(r(3))}).then(function(e){return n.serializer=e,i})}function n(e,t){var r=this;"string"!=typeof e&&(h.console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){r.executeSql("SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function o(e,t){var r=this,n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){r.executeSql("SELECT * FROM "+o.storeName,[],function(r,n){for(var i=n.rows,a=i.length,s=0;a>s;s++){var u=i.item(s),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function i(e,t,r){var n=this;"string"!=typeof e&&(h.console.warn(e+" used as a key, but it is not a string."),e=String(e));var o=new Promise(function(r,o){n.ready().then(function(){void 0===t&&(t=null);var i=t,a=n._dbInfo;a.serializer.serialize(t,function(t,n){n?o(n):a.db.transaction(function(n){n.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){r(i)},function(e,t){o(t)})},function(e){e.code===e.QUOTA_ERR&&o(e)})})}).catch(o)});return l(o,r),o}function a(e,t){var r=this;"string"!=typeof e&&(h.console.warn(e+" used as a key, but it is not a string."),e=String(e));var n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){r.executeSql("DELETE FROM "+o.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function s(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){t.executeSql("DELETE FROM "+n.storeName,[],function(){e()},function(e,t){r(t)})})}).catch(r)});return l(r,e),r}function u(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+n.storeName,[],function(t,r){var n=r.rows.item(0).c;e(n)},function(e,t){r(t)})})}).catch(r)});return l(r,e),r}function c(e,t){var r=this,n=new Promise(function(t,n){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(r){r.executeSql("SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)},function(e,t){n(t)})})}).catch(n)});return l(n,t),n}function f(e){var t=this,r=new Promise(function(e,r){t.ready().then(function(){var n=t._dbInfo;n.db.transaction(function(t){t.executeSql("SELECT key FROM "+n.storeName,[],function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)},function(e,t){r(t)})})}).catch(r)});return l(r,e),r}function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}var h=this,p=this.openDatabase;if(p){var d={_driver:"webSQLStorage",_initStorage:e,iterate:o,getItem:n,setItem:i,removeItem:a,clear:s,length:u,key:c,keys:f};t.default=d}}.call("undefined"!=typeof window?window:self),e.exports=t.default}])})},{__browserify_process:4}],19:[function(e,t,r){(function(){var e=this,n=e._,o={},i=Array.prototype,a=Object.prototype,s=Function.prototype,u=i.push,c=i.slice,f=i.concat,l=a.toString,h=a.hasOwnProperty,p=i.forEach,d=i.map,v=i.reduce,y=i.reduceRight,m=i.filter,g=i.every,b=i.some,w=i.indexOf,_=i.lastIndexOf,E=Array.isArray,P=Object.keys,x=s.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};void 0!==r?(void 0!==t&&t.exports&&(r=t.exports=S),r._=S):e._=S,S.VERSION="1.4.4";var O=S.each=S.forEach=function(e,t,r){if(null!=e)if(p&&e.forEach===p)e.forEach(t,r);else if(e.length===+e.length){for(var n=0,i=e.length;i>n;n++)if(t.call(r,e[n],n,e)===o)return}else for(var a in e)if(S.has(e,a)&&t.call(r,e[a],a,e)===o)return};S.map=S.collect=function(e,t,r){var n=[];return null==e?n:d&&e.map===d?e.map(t,r):(O(e,function(e,o,i){n[n.length]=t.call(r,e,o,i)}),n)};var A="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,r,n){var o=arguments.length>2;if(null==e&&(e=[]),v&&e.reduce===v)return n&&(t=S.bind(t,n)),o?e.reduce(t,r):e.reduce(t);if(O(e,function(e,i,a){o?r=t.call(n,r,e,i,a):(r=e,o=!0)}),!o)throw new TypeError(A);return r},S.reduceRight=S.foldr=function(e,t,r,n){var o=arguments.length>2;if(null==e&&(e=[]),y&&e.reduceRight===y)return n&&(t=S.bind(t,n)),o?e.reduceRight(t,r):e.reduceRight(t);var i=e.length;if(i!==+i){var a=S.keys(e);i=a.length}if(O(e,function(s,u,c){u=a?a[--i]:--i,o?r=t.call(n,r,e[u],u,c):(r=e[u],o=!0)}),!o)throw new TypeError(A);return r},S.find=S.detect=function(e,t,r){var n;return k(e,function(e,o,i){return t.call(r,e,o,i)?(n=e,!0):void 0}),n},S.filter=S.select=function(e,t,r){var n=[];return null==e?n:m&&e.filter===m?e.filter(t,r):(O(e,function(e,o,i){t.call(r,e,o,i)&&(n[n.length]=e)}),n)},S.reject=function(e,t,r){return S.filter(e,function(e,n,o){return!t.call(r,e,n,o)},r)},S.every=S.all=function(e,t,r){t||(t=S.identity);var n=!0;return null==e?n:g&&e.every===g?e.every(t,r):(O(e,function(e,i,a){return(n=n&&t.call(r,e,i,a))?void 0:o}),!!n)};var k=S.some=S.any=function(e,t,r){t||(t=S.identity);var n=!1;return null==e?n:b&&e.some===b?e.some(t,r):(O(e,function(e,i,a){return n||(n=t.call(r,e,i,a))?o:void 0}),!!n)};S.contains=S.include=function(e,t){return null!=e&&(w&&e.indexOf===w?-1!=e.indexOf(t):k(e,function(e){return e===t}))},S.invoke=function(e,t){var r=c.call(arguments,2),n=S.isFunction(t);return S.map(e,function(e){return(n?t:e[t]).apply(e,r)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.where=function(e,t,r){return S.isEmpty(t)?r?null:[]:S[r?"find":"filter"](e,function(e){for(var r in t)if(t[r]!==e[r])return!1;return!0})},S.findWhere=function(e,t){return S.where(e,t,!0)},S.max=function(e,t,r){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return O(e,function(e,o,i){var a=t?t.call(r,e,o,i):e;a>=n.computed&&(n={value:e,computed:a})}),n.value},S.min=function(e,t,r){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return O(e,function(e,o,i){var a=t?t.call(r,e,o,i):e;a<n.computed&&(n={value:e,computed:a})}),n.value},S.shuffle=function(e){var t,r=0,n=[];return O(e,function(e){t=S.random(r++),n[r-1]=n[t],n[t]=e}),n};var j=function(e){return S.isFunction(e)?e:function(t){return t[e]}};S.sortBy=function(e,t,r){var n=j(t);return S.pluck(S.map(e,function(e,t,o){return{value:e,index:t,criteria:n.call(r,e,t,o)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(n>r||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var I=function(e,t,r,n){var o={},i=j(t||S.identity);return O(e,function(t,a){var s=i.call(r,t,a,e);n(o,s,t)}),o};S.groupBy=function(e,t,r){return I(e,t,r,function(e,t,r){(S.has(e,t)?e[t]:e[t]=[]).push(r)})},S.countBy=function(e,t,r){return I(e,t,r,function(e,t){S.has(e,t)||(e[t]=0),e[t]++})},S.sortedIndex=function(e,t,r,n){r=null==r?S.identity:j(r);for(var o=r.call(n,t),i=0,a=e.length;a>i;){var s=i+a>>>1;r.call(n,e[s])<o?i=s+1:a=s}return i},S.toArray=function(e){return e?S.isArray(e)?c.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:c.call(e,0,t)},S.initial=function(e,t,r){return c.call(e,0,e.length-(null==t||r?1:t))},S.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,r){return c.call(e,null==t||r?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var R=function(e,t,r){return O(e,function(e){S.isArray(e)?t?u.apply(r,e):R(e,t,r):r.push(e)}),r};S.flatten=function(e,t){return R(e,t,[])},S.without=function(e){return S.difference(e,c.call(arguments,1))},S.uniq=S.unique=function(e,t,r,n){S.isFunction(t)&&(n=r,r=t,t=!1);var o=r?S.map(e,r,n):e,i=[],a=[];return O(o,function(r,n){(t?n&&a[a.length-1]===r:S.contains(a,r))||(a.push(r),i.push(e[n]))}),i},S.union=function(){return S.uniq(f.apply(i,arguments))},S.intersection=function(e){var t=c.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=f.apply(i,c.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=c.call(arguments),t=S.max(S.pluck(e,"length")),r=new Array(t),n=0;t>n;n++)r[n]=S.pluck(e,""+n);return r},S.object=function(e,t){if(null==e)return{};for(var r={},n=0,o=e.length;o>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},S.indexOf=function(e,t,r){if(null==e)return-1;var n=0,o=e.length;if(r){if("number"!=typeof r)return n=S.sortedIndex(e,t),e[n]===t?n:-1;n=0>r?Math.max(0,o+r):r}if(w&&e.indexOf===w)return e.indexOf(t,r);for(;o>n;n++)if(e[n]===t)return n;return-1},S.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(_&&e.lastIndexOf===_)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);for(var o=n?r:e.length;o--;)if(e[o]===t)return o;return-1},S.range=function(e,t,r){arguments.length<=1&&(t=e||0,e=0),r=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/r),0),o=0,i=new Array(n);n>o;)i[o++]=e,e+=r;return i},S.bind=function(e,t){if(e.bind===x&&x)return x.apply(e,c.call(arguments,1));var r=c.call(arguments,2);return function(){return e.apply(t,r.concat(c.call(arguments)))}},S.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},S.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=S.functions(e)),O(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var r={};return t||(t=S.identity),function(){var n=t.apply(this,arguments);return S.has(r,n)?r[n]:r[n]=e.apply(this,arguments)}},S.delay=function(e,t){var r=c.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(c.call(arguments,1)))},S.throttle=function(e,t){var r,n,o,i,a=0,s=function(){a=new Date,o=null,i=e.apply(r,n)};return function(){var u=new Date,c=t-(u-a);return r=this,n=arguments,0>=c?(clearTimeout(o),o=null,a=u,i=e.apply(r,n)):o||(o=setTimeout(s,c)),i}},S.debounce=function(e,t,r){var n,o;return function(){var i=this,a=arguments,s=function(){n=null,r||(o=e.apply(i,a))},u=r&&!n;return clearTimeout(n),n=setTimeout(s,t),u&&(o=e.apply(i,a)),o}},S.once=function(e){var t,r=!1;return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return function(){var r=[e];return u.apply(r,arguments),t.apply(this,r)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},S.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=P||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var r in e)S.has(e,r)&&(t[t.length]=r);return t},S.values=function(e){var t=[];for(var r in e)S.has(e,r)&&t.push(e[r]);return t},S.pairs=function(e){var t=[];for(var r in e)S.has(e,r)&&t.push([r,e[r]]);return t},S.invert=function(e){var t={};for(var r in e)S.has(e,r)&&(t[e[r]]=r);return t},S.functions=S.methods=function(e){var t=[];for(var r in e)S.isFunction(e[r])&&t.push(r);return t.sort()},S.extend=function(e){return O(c.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]}),e},S.pick=function(e){var t={},r=f.apply(i,c.call(arguments,1));return O(r,function(r){r in e&&(t[r]=e[r])}),t},S.omit=function(e){var t={},r=f.apply(i,c.call(arguments,1));for(var n in e)S.contains(r,n)||(t[n]=e[n]);return t},S.defaults=function(e){return O(c.call(arguments,1),function(t){if(t)for(var r in t)null==e[r]&&(e[r]=t[r])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var $=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var o=l.call(e);if(o!=l.call(t))return!1;switch(o){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==e)return n[i]==t;r.push(e),n.push(t);var a=0,s=!0;if("[object Array]"==o){if(a=e.length,s=a==t.length)for(;a--&&(s=$(e[a],t[a],r,n)););}else{var u=e.constructor,c=t.constructor;if(u!==c&&!(S.isFunction(u)&&u instanceof u&&S.isFunction(c)&&c instanceof c))return!1;for(var f in e)if(S.has(e,f)&&(a++,!(s=S.has(t,f)&&$(e[f],t[f],r,n))))break;if(s){for(f in t)if(S.has(t,f)&&!a--)break;s=!a}}return r.pop(),n.pop(),s};S.isEqual=function(e,t){return $(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=E||function(e){return"[object Array]"==l.call(e)},S.isObject=function(e){return e===Object(e)},O(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==l.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return h.call(e,t)},S.noConflict=function(){return e._=n,this},S.identity=function(e){return e},S.times=function(e,t,r){for(var n=Array(e),o=0;e>o;o++)n[o]=t.call(r,o);return n},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};T.unescape=S.invert(T.escape);var F={escape:new RegExp("["+S.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(T.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(F[e],function(t){return T[e][t]})}}),S.result=function(e,t){if(null==e)return null;var r=e[t];return S.isFunction(r)?r.call(e):r},S.mixin=function(e){O(S.functions(e),function(t){var r=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),M.call(this,r.apply(S,e))}})};var D=0;S.uniqueId=function(e){var t=++D+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,r){var n;r=S.defaults({},r,S.templateSettings);var o=new RegExp([(r.escape||C).source,(r.interpolate||C).source,(r.evaluate||C).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(o,function(t,r,n,o,s){return a+=e.slice(i,s).replace(N,function(e){return"\\"+L[e]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),i=s+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(r.variable||"obj","_",a)}catch(e){throw e.source=a,e}if(t)return n(t,S);var s=function(e){return n.call(this,e,S)};return s.source="function("+(r.variable||"obj")+"){\n"+a+"}",s},S.chain=function(e){return S(e).chain()};var M=function(e){return this._chain?S(e).chain():e};S.mixin(S),O(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];S.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],M.call(this,r)}}),O(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return M.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}]},{},[7])(7)})}).call(t,r(120).setImmediate)},function(e,t,r){(function(e,n){var o;!function(i){function a(e){throw new RangeError($[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,"."),n+s(e.split("."),t).join(".")}function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function f(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?F(e/S):e>>1,e+=F(e/t);e>T*P>>1;n+=_)e=F(e/T);return F(n+(T+1)*e/(e+x))}function d(e){var t,r,n,o,i,s,u,c,h,d,v=[],y=e.length,m=0,g=A,b=O;for(r=e.lastIndexOf(k),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),v.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(i=m,s=1,u=_;o>=y&&a("invalid-input"),c=l(e.charCodeAt(o++)),(c>=_||c>F((w-m)/s))&&a("overflow"),m+=c*s,h=u<=b?E:u>=b+P?P:u-b,!(c<h);u+=_)d=_-h,s>F(w/d)&&a("overflow"),s*=d;t=v.length+1,b=p(m-i,t,0==i),F(m/t)>w-g&&a("overflow"),g+=F(m/t),m%=t,v.splice(m++,0,g)}return f(v)}function v(e){var t,r,n,o,i,s,u,f,l,d,v,y,m,g,b,x=[];for(e=c(e),y=e.length,t=A,r=0,i=O,s=0;s<y;++s)(v=e[s])<128&&x.push(D(v));for(n=o=x.length,o&&x.push(k);n<y;){for(u=w,s=0;s<y;++s)(v=e[s])>=t&&v<u&&(u=v);for(m=n+1,u-t>F((w-r)/m)&&a("overflow"),r+=(u-t)*m,t=u,s=0;s<y;++s)if(v=e[s],v<t&&++r>w&&a("overflow"),v==t){for(f=r,l=_;d=l<=i?E:l>=i+P?P:l-i,!(f<d);l+=_)b=f-d,g=_-d,x.push(D(h(d+b%g,0))),f=F(b/g);x.push(D(h(f,0))),i=p(r,m,n==o),r=0,++n}++r,++t}return x.join("")}function y(e){return u(e,function(e){return j.test(e)?d(e.slice(4).toLowerCase()):e})}function m(e){return u(e,function(e){return I.test(e)?"xn--"+v(e):e})}var g=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);var b,w=2147483647,_=36,E=1,P=26,x=38,S=700,O=72,A=128,k="-",j=/^xn--/,I=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,$={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=_-E,F=Math.floor,D=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:c,encode:f},decode:d,encode:v,toASCII:m,toUnicode:y},void 0!==(o=function(){return b}.call(t,r,t,e))&&(e.exports=o)}()}).call(t,r(121)(e),r(27))},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;f<c;++f){var l,h,p,d,v=e[f].replace(s,"%20"),y=v.indexOf(r);y>=0?(l=v.substr(0,y),h=v.substr(y+1)):(l=v,h=""),p=decodeURIComponent(l),d=decodeURIComponent(h),n(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(o(a))+r;return i(e[a])?n(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(268),t.encode=t.stringify=r(269)},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[u]=n,s(u),u++}function o(e){delete c[e]}function i(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function a(e){if(f)setTimeout(a,0,e);else{var t=c[e];if(t){f=!0;try{i(t)}finally{o(e),f=!1}}}}if(!e.setImmediate){var s,u=1,c={},f=!1,l=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var e=l.documentElement;s=function(t){var r=l.createElement("script");r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(a,0,e)}}(),h.setImmediate=n,h.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(27),r(76))},function(e,t,r){e.exports=r(273)},function(e,t,r){(function(e){var n=r(277);t.encode=function(t){var r=n.parse(t);return new e(r).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},t.decode=function(t){var r=t.replace(/-/g,"+").replace(/_/g,"/")+"==";return n.unparse(new e(r,"base64"))},t.v4=function(){return n.v4(null,new e(16)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)},t.nice=function(){var t=n.v4(null,new e(16));return t[0]=127&t[0],t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").substring(0,22)}}).call(t,r(211).Buffer)},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&c.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return c.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}var u=r(267),c=r(275);t.parse=o,t.resolve=a,t.resolveObject=s,t.format=i,t.Url=n;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(d),y=["%","/","?",";","#"].concat(v),m=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=r(270);n.prototype.parse=function(e,t,r){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),e=i.join(o);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var l=h.exec(s);if(l)return this.path=s,this.href=s,this.pathname=l[1],l[2]?(this.search=l[2],this.query=t?P.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=f.exec(s);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,s=s.substr(p.length)}if(r||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===s.substr(0,2);!x||p&&_[p]||(s=s.substr(2),this.slashes=!0)}if(!_[p]&&(x||p&&!E[p])){for(var S=-1,O=0;O<m.length;O++){var A=s.indexOf(m[O]);-1!==A&&(-1===S||A<S)&&(S=A)}var k,j;j=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==j&&(k=s.slice(0,j),s=s.slice(j+1),this.auth=decodeURIComponent(k)),S=-1;for(var O=0;O<y.length;O++){var A=s.indexOf(y[O]);-1!==A&&(-1===S||A<S)&&(S=A)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var R=this.hostname.split(/\./),O=0,$=R.length;O<$;O++){var T=R[O];if(T&&!T.match(g)){for(var F="",D=0,C=T.length;D<C;D++)T.charCodeAt(D)>127?F+="x":F+=T[D];if(!F.match(g)){var L=R.slice(0,O),N=R.slice(O+1),M=T.match(b);M&&(L.push(M[1]),N.unshift(M[2])),N.length&&(s="/"+N.join(".")+s),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+B,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[d])for(var O=0,$=v.length;O<$;O++){var U=v[O];if(-1!==s.indexOf(U)){var z=encodeURIComponent(U);z===U&&(z=escape(U)),s=s.split(U).join(z)}}var V=s.indexOf("#");-1!==V&&(this.hash=s.substr(V),s=s.slice(0,V));var K=s.indexOf("?");if(-1!==K?(this.search=s.substr(K),this.query=s.substr(K+1),t&&(this.query=P.parse(this.query)),s=s.slice(0,K)):t&&(this.search="",this.query={}),s&&(this.pathname=s),E[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",Q=this.search||"";this.path=B+Q}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=P.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var f=s[u];"protocol"!==f&&(r[f]=e[f])}return E[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!E[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var p=l[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||_[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||m||r.host&&e.pathname,w=b,P=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!E[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(""===P[0]?P[0]=r.host:P.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===P[0])),g)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,P=d;else if(d.length)P||(P=[]),P.pop(),P=P.concat(d),r.search=e.search,r.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(x){r.hostname=r.host=P.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=e.search,r.query=e.query,c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!P.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var O=P.slice(-1)[0],A=(r.host||e.host||P.length>1)&&("."===O||".."===O)||""===O,k=0,j=P.length;j>=0;j--)O=P[j],"."===O?P.splice(j,1):".."===O?(P.splice(j,1),k++):k&&(P.splice(j,1),k--);if(!b&&!w)for(;k--;k)P.unshift("..");!b||""===P[0]||P[0]&&"/"===P[0].charAt(0)||P.unshift(""),A&&"/"!==P.join("/").substr(-1)&&P.push("");var I=""===P[0]||P[0]&&"/"===P[0].charAt(0);if(x){r.hostname=r.host=I?"":P.length?P.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return b=b||r.host&&P.length,b&&!I&&P.unshift(""),P.length?r.pathname=P.join("/"):(r.pathname=null,r.path=null),c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){(function(t){var r,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var o=new Uint8Array(16);r=function(){return n.getRandomValues(o),o}}if(!r){var i=new Array(16);r=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=r}).call(t,r(27))},function(e,t,r){function n(e,t,r){var n=t&&r||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){o<16&&(t[n+o++]=c[e])});o<16;)t[n+o++]=0;return t}function o(e,t){var r=t||0,n=u;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}function i(e,t,r){var n=t&&r||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:p,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:v+1,c=s-d+(u-v)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||s>d)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=s,v=u,p=a,s+=122192928e5;var f=(1e4*(268435455&s)+u)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var l=s/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=255&l,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var y=e.node||h,m=0;m<6;m++)i[n+m]=y[m];return t||o(i)}function a(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[n+a]=i[a];return t||o(i)}for(var s=r(276),u=[],c={},f=0;f<256;f++)u[f]=(f+256).toString(16).substr(1),c[u[f]]=f;var l=s(),h=[1|l[0],l[1],l[2],l[3],l[4],l[5]],p=16383&(l[6]<<8|l[7]),d=0,v=0,y=a;y.v1=i,y.v4=a,y.parse=n,y.unparse=o,e.exports=y}])});
//# sourceMappingURL=anno-memory-store.js.map